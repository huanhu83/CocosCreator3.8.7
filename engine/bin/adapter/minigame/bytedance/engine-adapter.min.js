!function i(a,o,r){function c(t,e){if(!o[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},a[t][0].call(n.exports,function(e){return c(a[t][1][e]||e)},n,n.exports,i,a,o,r)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<r.length;e++)c(r[e]);return c}({1:[function(s,R,B){"use strict";var l=s("./cache-manager"),e=window.fsUtils,u=e.fs,d=e.downloadFile,a=e.readText,o=e.readArrayBuffer,i=e.readJson,f=e.loadSubpackage,h=e.getUserDataPath,r=e.exists,p=/^https?:\/\/.*/,g=cc.assetManager.downloader,e=cc.assetManager.parser,t=cc.assetManager.presets,m=(g.maxConcurrency=12,g.maxRequestsPerFrame=64,t.scene.maxConcurrency=12,t.scene.maxRequestsPerFrame=64,{}),v=cc.sys;function n(e,t,n){p.test(e)?n&&n(new Error("Can not load remote scripts")):(v.platform!==v.Platform.TAOBAO_CREATIVE_APP&&s("../../../".concat(e)),n&&n(null))}function c(t,e,n){cc.AudioPlayer.load(t).then(function(e){e={player:e,url:t,duration:e.duration,type:e.type};n(null,e)}).catch(function(e){n(e)})}function y(i,t,a,e,o){var n=function(e,t){var n=!1,i=!1;!e.startsWith(h())&&p.test(e)?t.reload||((t=l.cachedFiles.get(e))?(i=!0,e=t.url):(t=l.tempFiles.get(e))&&(n=!0,e=t)):n=!0;return{url:e,inLocal:n,inCache:i}}(i,a);n.inLocal?t(n.url,a,o):n.inCache?(l.updateLastTime(i),t(n.url,a,function(e,t){e&&l.removeCache(i),o(e,t)})):d(i,null,a.header,e,function(e,n){e?o(e,null):t(n,a,function(e,t){e||(l.tempFiles.add(i,n),l.cacheFile(i,n,a.cacheEnabled,a.__cacheBundleRoot__,!0)),o(e,t)})})}function _(e,t,n){o(e,n)}function b(e,t,n){a(e,n)}function w(e,t,n){i(e,n)}function E(e,t,n){y(e,w,t,t.onFileProgress,n)}function P(e,t,n){n(null,__globalAdapter.loadFont(e)||"Arial")}function F(t,e,n){r(t,function(e){e?n(null,t):n(new Error("file ".concat(t," does not exist!")))})}function T(e,t,n){y(e,F,t,t.onFileProgress,n)}v.platform===v.Platform.TAOBAO_MINI_GAME&&(s=globalThis.__taobaoRequire);function x(e,n,i){o(e,function(e,t){e?i(e):M(t,n,i)})}function C(e,n,i){o(e,function(e,t){e?i(e):k(t,n,i)})}function S(e,n,i){o(e,function(e,t){e?i(e):O(t,n,i)})}function A(e,n,i){a(e,function(e,t){e?i(e):D(t,n,i)})}var M=e.parsePVRTex,k=e.parsePKMTex,O=e.parseASTCTex,D=e.parsePlist;g.downloadScript=n,g._downloadArrayBuffer=function(e,t,n){y(e,_,t,t.onFileProgress,n)},g._downloadJson=E,e.parsePVRTex=x,e.parsePKMTex=C,e.parseASTCTex=S,e.parsePlist=A,g.register({".js":n,".mp3":T,".ogg":T,".wav":T,".m4a":T,".png":T,".jpg":T,".bmp":T,".jpeg":T,".gif":T,".ico":T,".tiff":T,".image":T,".webp":T,".pvr":T,".pkm":T,".astc":T,".font":T,".eot":T,".ttf":T,".woff":T,".svg":T,".ttc":T,".txt":T,".xml":T,".vsh":T,".fsh":T,".atlas":T,".tmx":T,".tsx":T,".plist":T,".fnt":T,".json":E,".ExportJson":T,".binary":T,".bin":T,".dbbin":T,".skel":T,".mp4":T,".avi":T,".mov":T,".mpg":T,".mpeg":T,".rm":T,".rmvb":T,bundle:function(e,t,r){var n,i,c,a=cc.path.basename(e),o=(o=t.version||cc.assetManager.downloader.bundleVers[a])?"".concat(o,"."):"";m[a]?(n=(v.platform===v.Platform.TAOBAO_MINI_GAME?"":"subpackages/").concat(a,"/config.").concat(o,"json"),f(a,t.onFileProgress,function(e){e?r(e,null):E(n,t,function(e,t){var n;(n=t)&&(v.platform===v.Platform.TAOBAO_MINI_GAME?n.base="".concat(a,"/"):n.base="subpackages/".concat(a,"/")),r(e,t)})})):(p.test(e)||e.startsWith(h())?(c=e,i="src/bundle-scripts/".concat(a,"/index.").concat(o,"js"),l.makeBundleFolder(a)):-1!==g.remoteBundles.indexOf(a)?(c="".concat(g.remoteServerAddress,"remote/").concat(a),i="src/bundle-scripts/".concat(a,"/index.").concat(o,"js"),l.makeBundleFolder(a)):(c="assets/".concat(a),i="assets/".concat(a,"/index.").concat(o,"js")),v.platform===v.Platform.TAOBAO_MINI_GAME?s(i):v.platform!==v.Platform.TAOBAO_CREATIVE_APP&&s("./".concat(i)),t.__cacheBundleRoot__=a,E("".concat(c,"/config.").concat(o,"json"),t,function(e,n){var i,a,o;e?r&&r(e):n.isZip?(e=n.zipVersion,e="".concat(c,"/res.").concat(e?"".concat(e,"."):"","zip"),i=e,a=t,o=function(e,t){e?r&&r(e):(n.base="".concat(t,"/res/"),v.platform===v.Platform.ALIPAY_MINI_GAME&&v.os===v.OS.ANDROID&&(e="".concat(t,"res/"),u.accessSync({path:e}).success)&&(n.base=e),r&&r(null,n))},(e=l.cachedFiles.get(i))?(l.updateLastTime(i),o&&o(null,e.url)):p.test(i)?d(i,a.downloadPath,a.header,a.onFileProgress,function(e,t){e?o&&o(e):l.unzipAndCacheBundle(i,t,a.__cacheBundleRoot__,o)}):l.unzipAndCacheBundle(i,i,a.__cacheBundleRoot__,o)):(n.base="".concat(c,"/"),r&&r(null,n))}))},default:function(e,t,n){y(e,b,t,t.onFileProgress,n)}}),e.register({".png":g.downloadDomImage,".jpg":g.downloadDomImage,".bmp":g.downloadDomImage,".jpeg":g.downloadDomImage,".gif":g.downloadDomImage,".ico":g.downloadDomImage,".tiff":g.downloadDomImage,".image":g.downloadDomImage,".webp":g.downloadDomImage,".pvr":x,".pkm":C,".astc":S,".font":P,".eot":P,".ttf":P,".woff":P,".svg":P,".ttc":P,".mp3":c,".ogg":c,".wav":c,".m4a":c,".txt":b,".xml":b,".vsh":b,".fsh":b,".atlas":b,".tmx":b,".tsx":b,".fnt":b,".plist":A,".binary":_,".bin":_,".dbbin":_,".skel":_,".ExportJson":w}),cc.assetManager.transformPipeline.append(function(e){for(var t=e.output=e.input,n=0,i=t.length;n<i;n++){var a=t[n],o=a.options;if(a.config)o.__cacheBundleRoot__=a.config.name;else{if("bundle"===a.ext)continue;o.cacheEnabled=void 0!==o.cacheEnabled&&o.cacheEnabled}".cconb"===a.ext?a.url=a.url.replace(a.ext,".bin"):".ccon"===a.ext&&(a.url=a.url.replace(a.ext,".json"))}});var I=cc.assetManager.init;cc.assetManager.init=function(e){I.call(cc.assetManager,e);e=cc.settings.querySettings("assets","subpackages");e&&e.forEach(function(e){return m[e]="subpackages/".concat(e)}),l.init()}},{"./cache-manager":3}],2:[function(e,t,n){"use strict";function i(){this._delegate=null,this._editing=!1,this._eventListeners={onKeyboardInput:null,onKeyboardConfirm:null,onKeyboardComplete:null}}var a,o,r,c,s;cc&&cc.internal&&cc.internal.EditBox&&(a=cc.internal.EditBox,o=cc.js,r=a.KeyboardReturnType,s=c=null,o.extend(i,a._EditBoxImpl),a._EditBoxImpl=i,Object.assign(i.prototype,{init:function(e){e?this._delegate=e:cc.error("EditBox init failed")},beginEditing:function(){var t=this;this._editing||this._ensureKeyboardHide(function(){var e=t._delegate;t._showKeyboard(),t._registerKeyboardEvent(),t._editing=!0,s=t,e._editBoxEditingDidBegan()})},endEditing:function(){this._hideKeyboard();var e=this._eventListeners;e.onKeyboardComplete&&e.onKeyboardComplete()},_registerKeyboardEvent:function(){var n=this,i=this._delegate,e=this._eventListeners;e.onKeyboardInput=function(e){e.value.length>i.maxLength&&(e.value=e.value.substr(0,i.maxLength)),i._string!==e.value&&i._editBoxTextChanged(e.value)},e.onKeyboardConfirm=function(e){e&&e.value?i._editBoxEditingReturn(e.value):i._editBoxEditingReturn();var t=n._eventListeners;t.onKeyboardComplete&&t.onKeyboardComplete(e)},e.onKeyboardComplete=function(e){n._editing=!1,s=null,cc.sys.platform!==cc.sys.Platform.WECHAT_MINI_PROGRAM&&n._unregisterKeyboardEvent(),e&&e.value&&e.value!==i.string&&i._editBoxTextChanged(e.value),e&&e.value?i._editBoxEditingDidEnded(e.value):i._editBoxEditingDidEnded()},__globalAdapter.onKeyboardInput(e.onKeyboardInput),__globalAdapter.onKeyboardConfirm(e.onKeyboardConfirm),__globalAdapter.onKeyboardComplete(e.onKeyboardComplete)},_unregisterKeyboardEvent:function(){var e=this._eventListeners;e.onKeyboardInput&&(__globalAdapter.offKeyboardInput(e.onKeyboardInput),e.onKeyboardInput=null),e.onKeyboardConfirm&&(__globalAdapter.offKeyboardConfirm(e.onKeyboardConfirm),e.onKeyboardConfirm=null),e.onKeyboardComplete&&(__globalAdapter.offKeyboardComplete(e.onKeyboardComplete),e.onKeyboardComplete=null)},_otherEditing:function(){return!!s&&s!==this&&s._editing},_ensureKeyboardHide:function(e){var t=this._otherEditing();if(!t&&!c)return e();c&&clearTimeout(c),t&&s.endEditing(),c=setTimeout(function(){c=null,e()},600)},_showKeyboard:function(){var e=this._delegate,t=e.inputMode===a.InputMode.ANY;__globalAdapter.showKeyboard({defaultValue:e.string,maxLength:65535,multiple:t,confirmHold:!1,confirmType:function(e){switch(e){case r.DEFAULT:case r.DONE:return"done";case r.SEND:return"send";case r.SEARCH:return"search";case r.GO:return"go";case r.NEXT:return"next";default:return"done"}}(e.returnType),success:function(e){},fail:function(e){cc.warn(e.errMsg)}})},_hideKeyboard:function(){__globalAdapter.hideKeyboard({success:function(e){},fail:function(e){cc.warn(e.errMsg)}})}}))},{}],3:[function(e,t,n){"use strict";var i=window.fsUtils,a=i.getUserDataPath,o=i.readJsonSync,s=i.makeDirSync,r=i.writeFileSync,u=i.copyFile,d=i.downloadFile,l=i.deleteFile,f=i.rmdirSync,h=i.unzip,p=i.isOutOfStorage,g=i.exists,m=!1,c=null,v=!1,y=0,_=/^https?:\/\/.*/;cc.assetManager.cacheManager=t.exports={cacheDir:"gamecaches",cachedFileName:"cacheList.json",cacheEnabled:!0,autoClear:!0,cacheInterval:500,deleteInterval:500,writeFileInterval:2e3,outOfStorage:!1,tempFiles:null,cachedFiles:null,cacheQueue:{},version:"1.0",getCache:function(e){return this.cachedFiles.has(e)?this.cachedFiles.get(e).url:""},getTemp:function(e){return this.tempFiles.has(e)?this.tempFiles.get(e):""},init:function(){this.cacheDir="".concat(a(),"/").concat(this.cacheDir);var e="".concat(this.cacheDir,"/").concat(this.cachedFileName),t=o(e);t instanceof Error||!t.version?(t instanceof Error||f(this.cacheDir,!0),this.cachedFiles=new cc.AssetManager.Cache,s(this.cacheDir,!0),r(e,JSON.stringify({files:this.cachedFiles._map,version:this.version}),"utf8")):this.cachedFiles=new cc.AssetManager.Cache(t.files),this.tempFiles=new cc.AssetManager.Cache},updateLastTime:function(e){this.cachedFiles.has(e)&&(this.cachedFiles.get(e).lastTime=Date.now())},_write:function(){c=null,r("".concat(this.cacheDir,"/").concat(this.cachedFileName),JSON.stringify({files:this.cachedFiles._map,version:this.version}),"utf8")},writeCacheFile:function(){c=c||setTimeout(this._write.bind(this),this.writeFileInterval)},_cache:function(){m=!1;var e,t,n,i,a,o,r,c=this,s="";for(e in this.cacheQueue){s=e;break}function l(e){if(e){if(p(e.message))return c.outOfStorage=!0,void(c.autoClear&&c.clearLRU())}else c.cachedFiles.add(s,{bundle:a,url:r,lastTime:o}),c.writeCacheFile();delete c.cacheQueue[s],cc.js.isEmptyObject(c.cacheQueue)||m||(m=!0,setTimeout(c._cache.bind(c),c.cacheInterval))}s&&(n=(t=this.cacheQueue[s]).srcUrl,i=t.isCopy,a=t.cacheBundleRoot,o=Date.now().toString(),r="",r=(a?"".concat(this.cacheDir,"/").concat(a,"/"):"".concat(this.cacheDir,"/")).concat(o).concat(y++).concat(cc.path.extname(s)),i?u(n,r,l):d(n,r,null,l))},cacheFile:function(e,t,n,i,a){!(n=void 0!==n?n:this.cacheEnabled)||this.cacheQueue[e]||this.cachedFiles.has(e)||(this.cacheQueue[e]={srcUrl:t,cacheBundleRoot:i,isCopy:a},m)||this.outOfStorage||(m=!0,setTimeout(this._cache.bind(this),this.cacheInterval))},clearCache:function(){var t=this;f(this.cacheDir,!0),this.cachedFiles=new cc.AssetManager.Cache,s(this.cacheDir,!0),this.outOfStorage=!1,clearTimeout(c),this._write(),cc.assetManager.bundles.forEach(function(e){_.test(e.base)&&t.makeBundleFolder(e.name)})},clearLRU:function(){if(!v){v=!0;var n=[],i=this;this.cachedFiles.forEach(function(t,e){i._isZipFile(e)&&cc.assetManager.bundles.find(function(e){return-1!==e.base.indexOf(t.url)})||n.push({originUrl:e,url:t.url,lastTime:t.lastTime})}),n.sort(function(e,t){return e.lastTime-t.lastTime}),n.length<3?console.warn("Insufficient storage, cleaning now"):n.length=Math.floor(n.length/3);for(var e=0,t=n.length;e<t;e++){var a="".concat(cc.assetManager.utils.getUuidFromURL(n[e].originUrl),"@native");cc.assetManager.files.remove(a),this.cachedFiles.remove(n[e].originUrl)}clearTimeout(c),this._write(),setTimeout(function e(){var t=n.pop();i._removePathOrFile(t.originUrl,t.url),0<n.length?setTimeout(e,i.deleteInterval):v=!1},i.deleteInterval)}},removeCache:function(e){var t;this.cachedFiles.has(e)&&(t=this.cachedFiles.remove(e).url,clearTimeout(c),this._write(),this._removePathOrFile(e,t))},_removePathOrFile:function(e,t){!this._isZipFile(e)||this._isZipFile(t)?l(t,this._deleteFileCB.bind(this)):(f(t,!0),this._deleteFileCB())},_deleteFileCB:function(e){e||(this.outOfStorage=!1)},makeBundleFolder:function(t){var n=this;g("".concat(this.cacheDir,"/").concat(t),function(e){e||s("".concat(n.cacheDir,"/").concat(t),!0)})},unzipAndCacheBundle:function(t,n,i,a){var o=Date.now().toString(),r="".concat(this.cacheDir,"/").concat(i,"/").concat(o).concat(y++),c=this;s(r,!0),h(n,r,function(e){e?(f(r,!0),p(e.message)&&(c.outOfStorage=!0,c.autoClear)&&c.clearLRU(),a&&a(e)):(c.cachedFiles.add(t,{bundle:i,url:r,lastTime:o}),c.writeCacheFile(),a&&a(null,r),g(n,function(e){e&&l(n)}))})},_isZipFile:function(e){return".zip"===e.slice(-4)}}},{}],4:[function(e,t,n){"use strict";e("./Editbox"),e("./AssetManager")},{"./AssetManager":1,"./Editbox":2}],5:[function(e,t,n){"use strict";var i,a,o,r;cc&&cc.Label&&(i=cc.Label,o=(a=document.createElement("canvas")).getContext("2d"),r={canvas:a,context:o},cc.game.on(cc.Game.EVENT_ENGINE_INITED,function(){Object.assign(i._canvasPool,{get:function(){return r},put:function(){}})}))},{}],6:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===a(e)?e:String(e)}(i.key),i)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,i,u;cc.internal.VideoPlayer&&(l=cc.internal.VideoPlayer.EventType,i=cc.Vec3,cc.mat4(),new i,new i,tt.getSystemInfoSync().pixelRatio,cc.internal.VideoPlayerImplManager.getImpl=function(e){return new u(e)},u=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e);var n,i=c(a);function a(e){if(this instanceof a)return(e=i.call(this,e)).videoNode=new cc.Node,e.videoNode.addComponent(cc.Sprite),e.videoNode.layer=e._node.layer,e._node.insertChild(e.videoNode,0),e;throw new TypeError("Cannot call a class as a function")}return t=a,(e=[{key:"syncClip",value:function(e){this.removeVideoPlayer(),e&&this.createVideoPlayer(e._nativeAsset)}},{key:"syncURL",value:function(e){this.removeVideoPlayer(),e&&this.createVideoPlayer(e)}},{key:"onCanplay",value:function(){this._loaded||(this._loaded=!0,this.setVisible(this._visible),this.dispatchEvent(l.READY_TO_PLAY),this.delayedPlay())}},{key:"_bindEvent",value:function(){var n=this,i=this._video,a=this;i&&(i.onCanplay(function(){if(a._video===i){a._loaded=!0,a._playing=!0;try{a.setVisible(a._visible),a.dispatchEvent(l.READY_TO_PLAY),i.play(),n.videoTexture=new cc.Texture2D,n.videoTexture.reset({width:i.width,height:i.height,format:cc.Texture2D.PixelFormat.RGBA8888});var e=n.videoNode.getComponent(cc.Sprite),t=new cc.SpriteFrame;t.texture=n.videoTexture,e.spriteFrame=t}catch(e){console.error("Video playback error:",e)}}}),i.onPlay(function(){a._video===i&&(a._playing=!0,a.dispatchEvent(l.PLAYING))}),i.onEnded(function(){a._video===i&&(a._playing=!1,a._currentTime=a._duration,a.dispatchEvent(l.COMPLETED))}),i.onPause(function(){a._video===i&&(a._playing=!1,a.dispatchEvent(l.PAUSED))}),i.onTimeUpdate(function(e){a._duration=e.duration,a._currentTime=e.position}),i.onStop(function(){a._video===i&&(a._playing=!1,a.dispatchEvent(l.STOPPED))}))}},{key:"_unbindEvent",value:function(){var e=this._video;e&&(e.offPlay(),e.offEnded(),e.offPause(),e.offTimeUpdate(),e.offStop())}},{key:"createVideoPlayer",value:function(e){tt.createVideo?(this._video||(this._video=tt.createOffscreenVideo(),this._duration=0,this._currentTime=0,this._loaded=!1,this.setVisible(this._visible),this._bindEvent(),this._forceUpdate=!0),this.setURL(e),this._forceUpdate=!0):console.warn("VideoPlayer not supported")}},{key:"setURL",value:function(e){var t=this,n=t._video;n&&n.src!==e&&(t._playing&&n.stop(),t._unbindEvent(),n.autoplay=!0,n.src=e,n.muted=!0,t._loaded=!1,n.onPlay(function(){t._bindEvent(),n.muted=!1,t._loaded=!0,t.dispatchEvent(l.READY_TO_PLAY)}),n.onEnded(function(){n.offPlay(),n.stop(),t._playing=!1,t._currentTime=0,t.dispatchEvent(l.COMPLETED)}))}},{key:"removeVideoPlayer",value:function(){var e=this.video;e&&(e.stop(),e.destroy(),this._playing=!1,this._loaded=!1,this._loadedMeta=!1,this._ignorePause=!1,this._cachedCurrentTime=0,this._video=null)}},{key:"setVisible",value:function(e){var t=this._video;t&&this._visible!==e&&(t.width=e&&this._actualWidth||0,this._visible=e)}},{key:"getDuration",value:function(){return this.duration()}},{key:"duration",value:function(){return this._duration}},{key:"syncPlaybackRate",value:function(e){var t=this._video;t&&e!==t.playbackRate&&(.5===e|.8===e|1===e|1.25===e|1.5===e?t.playbackRate=e:console.warn("The platform does not support this PlaybackRate!"))}},{key:"syncVolume",value:function(){console.warn("The platform does not support")}},{key:"syncMute",value:function(e){var t=this._video;t&&t.muted!==e&&(t.muted=e)}},{key:"syncLoop",value:function(e){var t=this._video;t&&t.loop!==e&&(t.loop=e)}},{key:"syncStayOnBottom",value:function(){console.warn("The platform does not support")}},{key:"getCurrentTime",value:function(){return this.video?this.currentTime():-1}},{key:"currentTime",value:function(){return this._currentTime}},{key:"seekTo",value:function(e){var t=this._video;t&&this._loaded&&t.seek(e)}},{key:"disable",value:function(e){this._video&&(e||this._video.pause(),this.setVisible(!1),this._visible=!1)}},{key:"enable",value:function(){this._video&&(this.setVisible(!0),this._visible=!0)}},{key:"canPlay",value:function(){this._playing=!0,this._video.play(),this.syncCurrentTime()}},{key:"resume",value:function(){var e=this._video;!this._playing&&e&&e.play()}},{key:"pause",value:function(){var e=this._video;this._playing&&e&&e.pause()}},{key:"stop",value:function(){var t=this,e=this._video;e&&this._visible&&e.stop().then(function(e){e.errMsg&&!e.errMsg.includes("ok")?console.error("failed to stop video player"):(t._currentTime=0,t._playing=!1,t.dispatchEvent(l.STOPPED))})}},{key:"canFullScreen",value:function(e){this._video&&this.setFullScreenEnabled(e)}},{key:"setFullScreenEnabled",value:function(e){var t=this._video;t&&this._fullScreenEnabled!==e&&(e?t.requestFullScreen():t.exitFullScreen(),this._fullScreenEnabled=e)}},{key:"syncKeepAspectRatio",value:function(e){console.warn("On bytedance game videoPlayer is always keep the aspect ratio")}},{key:"syncMatrix",value:function(){this.videoTexture&&this.videoTexture.uploadData(this.video)}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(cc.internal.VideoPlayerImpl))},{}],7:[function(e,t,n){"use strict";e("../fs-utils"),e("../../../../common/engine/index"),e("./VideoPlayer"),e("./Label")},{"../../../../common/engine/index":4,"../fs-utils":8,"./Label":5,"./VideoPlayer":6}],8:[function(a,e,t){"use strict";var o=tt.getFileSystemManager?tt.getFileSystemManager():null,n=/size.*limit.*exceeded/,r={fs:o,isOutOfStorage:function(e){return n.test(e)},getUserDataPath:function(){return tt.env.USER_DATA_PATH},checkFsValid:function(){return!!o||(console.warn("can not get the file system!"),!1)},deleteFile:function(t,n){o.unlink({filePath:t,success:function(){n&&n(null)},fail:function(e){console.warn("Delete file failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error(e.errMsg))}})},downloadFile:function(t,e,n,i,a){var o={url:t,success:function(e){200===e.statusCode?a&&a(null,e.tempFilePath||e.filePath):(e.filePath&&r.deleteFile(e.filePath),console.warn("Download file failed: path: ".concat(t," message: ").concat(e.statusCode)),a&&a(new Error(e.statusCode),null))},fail:function(e){console.warn("Download file failed: path: ".concat(t," message: ").concat(e.errMsg)),a&&a(new Error(e.errMsg),null)}},e=(e&&(o.filePath=e),n&&(o.header=n),tt.downloadFile(o));i&&e.onProgressUpdate(i)},saveFile:function(t,e,n){tt.saveFile({tempFilePath:t,filePath:e,success:function(){n&&n(null)},fail:function(e){console.warn("Save file failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error(e.errMsg))}})},copyFile:function(t,e,n){o.copyFile({srcPath:t,destPath:e,success:function(){n&&n(null)},fail:function(e){console.warn("Copy file failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error(e.errMsg))}})},writeFile:function(t,e,n,i){o.writeFile({filePath:t,encoding:n,data:e,success:function(){i&&i(null)},fail:function(e){console.warn("Write file failed: path: ".concat(t," message: ").concat(e.errMsg)),i&&i(new Error(e.errMsg))}})},writeFileSync:function(t,e,n){try{return o.writeFileSync(t,e,n),null}catch(e){return console.warn("Write file failed: path: ".concat(t," message: ").concat(e.message)),new Error(e.message)}},readFile:function(t,e,n){o.readFile({filePath:t,encoding:e,success:function(e){n&&n(null,e.data)},fail:function(e){console.warn("Read file failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error(e.errMsg),null)}})},readDir:function(t,n){o.readdir({dirPath:t,success:function(e){n&&n(null,e.files)},fail:function(e){console.warn("Read directory failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error(e.errMsg),null)}})},readText:function(e,t){r.readFile(e,"utf8",t)},readArrayBuffer:function(e,t){r.readFile(e,void 0,t)},readJson:function(i,a){r.readFile(i,"utf8",function(t,e){var n=null;if(!t)try{n=JSON.parse(e)}catch(e){console.warn("Read json failed: path: ".concat(i," message: ").concat(e.message)),t=new Error(e.message)}a&&a(t,n)})},readJsonSync:function(t){try{var e=o.readFileSync(t,"utf8");return JSON.parse(e)}catch(e){return console.warn("Read json failed: path: ".concat(t," message: ").concat(e.message)),new Error(e.message)}},makeDirSync:function(t,e){try{return o.mkdirSync(t,e),null}catch(e){return console.warn("Make directory failed: path: ".concat(t," message: ").concat(e.message)),new Error(e.message)}},rmdirSync:function(t,e){try{return o.rmdirSync(t,e),null}catch(e){return console.warn("rm directory failed: path: ".concat(t," message: ").concat(e.message)),new Error(e.message)}},exists:function(e,t){o.access({path:e,success:function(){t&&t(!0)},fail:function(){t&&t(!1)}})},loadSubpackage:function(t,e,n){var i;return tt.loadSubpackage?(i=tt.loadSubpackage({name:t,success:function(){n&&n()},fail:function(e){console.warn("Load Subpackage failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error("Failed to load subpackage ".concat(t,": ").concat(e.errMsg)))}}),e&&i.onProgressUpdate(e),i):(console.warn("tt.loadSubpackage not supported, fallback to loading bundle"),a("subpackages/".concat(t,"/game.js")),n&&n(),null)},unzip:function(t,e,n){o.unzip({zipFilePath:t,targetPath:e,success:function(){n&&n(null)},fail:function(e){console.warn("unzip failed: path: ".concat(t," message: ").concat(e.errMsg)),n&&n(new Error("unzip failed: ".concat(e.errMsg)))}})}};window.fsUtils=e.exports=r},{}]},{},[7]);