System.register(["./global-exports-ZavlJGEN.js","./gc-object-BD6DANSw.js","./_virtual_internal_constants-CVZmBipG.js"],(function(t){"use strict";var e,n,r,i,a,m,o,u,s,c,h,l,f,y,d,v,g,p,x,_,w,z,E,N,T,A,S,I,b,O,M,P,C,U,F,R,L,B,H,k,q,D,V;return{setters:[function(t){e=t.l},function(t){n=t.F,r=t.L,i=t.j,a=t.h,m=t.w,o=t.aq,u=t._,s=t.V,c=t.ab,h=t.l,l=t.a,f=t.U,y=t.a8,d=t.X,v=t.Z,g=t.a3,p=t.n,x=t.s,_=t.S,w=t.aA,z=t.aO,E=t.aP,N=t.aK,T=t.O,A=t.G,S=t.z,I=t.aJ,b=t.ao,O=t.aQ,M=t.aR,P=t.m,C=t.o,U=t.C,F=t.f,R=t.aS,L=t.E,B=t.c,H=t.J,k=t.p,q=t.T,D=t.an,V=t.a9},null],execute:function(){t({F:St,H:Ht,P:vt,U:Mm,W:nt,X:_t,Y:xt,a:fa,a2:tn,a3:Se,a6:ft,a7:yt,a8:gt,a9:wt,aM:mu,aN:Nu,aY:function(t,e){return ia(t,e,0)},aZ:ia,a_:function(t,e,n){for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var m=t[a];if(n(m,e)<0)i=a-1;else{if(!(n(m,e)>0))return a;r=a+1}}return~r},aa:zt,ab:Et,ac:Nt,ad:Tt,ae:At,af:It,ag:bt,ah:Ot,ai:Mt,aj:Pt,ak:Ct,al:Bt,ao:function(t){t>0&&(Z=t)},ap:function(t){for(var e,n=i(t);!(e=n()).done;)rt(e.value)},aq:function(t){return tt||(tt="undefined"==typeof Proxy?{}:new Proxy(t,{get:function(t,e,n){return rt(e),Reflect.get(t,e,n)}})),tt},ar:Ei,as:Ni,ay:function(t){return t[Fa]},b:dt,b3:function(t){var e=Math.max(Math.max(t.x,t.y),t.z),n=128;e>1e-4&&(n=Math.log(e)/Math.log(1.1),n=dt((n=Math.ceil(n))+128,0,255));var r=1/Math.pow(1.1,n-128),i=Ie(t.multiplyScalar(r),new ge(0,0,0),new ge(1,1,1));i.multiplyScalar(255);var a,m,o=be(i).add((a=i.subtract(be(i)),m=new ge(.5,.5,.5),a<m?m:a));return new $t(o.x/255,o.y/255,o.z/255,n/255)},b7:ju,ba:Pa,h:pt,k:La,p:Sa,t:am,u:pe,v:On,w:fn,x:Rn,y:te,z:Pn});var G,W,K,Q,j,Y,X=t("e","__editorExtras__"),Z=10;t("r",G),t("i",W),t("q",K);var J=0,$=new Map;Q=function(t,e,n,r,i,a,m){var o=$.get(a);o&&o.logTimes>o.count&&(i("'%s' is deprecated, please use '%s' instead. "+m,t+"."+e,n+"."+r),o.count++)},t("r",G=function(t,e,r){null!=t&&r.forEach((function(r){var i=J++;$.set(i,{id:i,count:0,logTimes:void 0!==r.logTimes?r.logTimes:Z});var a=null!=r.target?r.target:t,m=null!=r.newName?r.newName:r.name,o=null!=r.targetName?r.targetName:e,u=a===t,s=r.suggest?"("+r.suggest+")":"";if(null!=r.customFunction)t[r.name]=function(){var t;return Q(e,r.name,o,m,n,i,s),(t=r.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=r.customSetter||null!=r.customGetter){var c=null!=r.customSetter,h=null!=r.customGetter;c&&h?Object.defineProperty(t,r.name,{get:function(){return Q(e,r.name,o,m,n,i,s),r.customGetter.call(this)},set:function(t){Q(e,r.name,o,m,n,i,s),r.customSetter.call(this,t)},enumerable:!1}):c?Object.defineProperty(t,r.name,{set:function(t){Q(e,r.name,o,m,n,i,s),r.customSetter.call(this,t)},enumerable:!1}):h&&Object.defineProperty(t,r.name,{get:function(){return Q(e,r.name,o,m,n,i,s),r.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(t,r.name,{get:function(){return Q(e,r.name,o,m,n,i,s),u?this[m]:a[m]},set:function(t){Q(e,r.name,o,m,n,i,s),u?this[m]=t:a[m]=t},enumerable:!1})}))}),Y=function(t,e,n,r,i){var a=$.get(r);a&&a.logTimes>a.count&&(n("'%s' has been removed. "+i,t+"."+e),a.count++)},t("i",W=function(t,e,n){null!=t&&n.forEach((function(n){var i=J++;$.set(i,{id:i,count:0,logTimes:void 0!==n.logTimes?n.logTimes:Z});var a=n.suggest?"("+n.suggest+")":"";Object.defineProperty(t,n.name,{get:function(){return Y(e,n.name,r,i,a)},set:function(){Y(e,n.name,r,i,a)},enumerable:!1})}))}),j=function(t,e,n,r,i){var a=$.get(r);a&&a.logTimes>a.count&&(n("'%s' is deprecated. "+i,t+"."+e),a.count++)},t("q",K=function(t,e,r){if(null!=t){var i=function(e,n,r,i,a,m){if(e.get){var o=e.get;e.get=function(){return j(n,r,i,a,m),o.call(this)}}if(e.set){var u=e.set;e.set=function(t){j(n,r,i,a,m),u.call(this,t)}}Object.defineProperty(t,r,e)};r.forEach((function(r){var a=r.name,m=Object.getOwnPropertyDescriptor(t,a);if(m&&m.configurable){var o=J++;$.set(o,{id:o,count:0,logTimes:void 0!==r.logTimes?r.logTimes:Z});var u=r.suggest?"("+r.suggest+")":"";if(void 0!==m.value)if("function"==typeof m.value){var s=m.value;t[a]=function(){return j(e,a,n,o,u),s.call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}}else{var c=m.value;Object.defineProperty(t,a,{configurable:!0,get:function(){return j(e,a,n,o,u),c}}),m.writable&&Object.defineProperty(t,a,{set:function(t){j(e,a,n,o,u),c=t}})}else i(m,e,a,n,o,u);Object.defineProperty(t,a,{enumerable:!1})}}))}});var tt,et={};function nt(t){for(var e in t){var n=t[e];et[e]=n}}function rt(t){var e=et[t];if(e){var n=e.newName,r=e.since;e.removed?n?a(16003,t,r,n):a(16002,t,r):n?m(16001,t,r,n):m(16e3,t,r)}}var it=Math.abs,at=Math.floor,mt=Math.PI,ot=mt/180,ut=180/mt,st=Math.random,ct=t("a4",.5*mt),ht=t("a5",2*mt),lt=t("N",1e-6);function ft(t,e){return it(t-e)<=lt*Math.max(1,it(t),it(e))}function yt(t,e,n){return n=n||lt,it(t-e)<=n}function dt(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}function vt(t){return t<0?0:t>1?1:t}function gt(t,e,n){return t+(e-t)*n}function pt(t){return t*ot}function xt(t){return t*ut}function _t(){return st()}function wt(t){st=t}function zt(t,e){return _t()*(e-t)+t}function Et(t,e){return at(zt(t,e))}function Nt(t){return(t=(9301*t+49297)%233280)/233280}function Tt(t,e,n){return Nt(t)*(n-e)+e}function At(t,e,n){return at(Tt(t,e,n))}function St(t){return o(t)}function It(t,e){return t-at(t/e)*e}function bt(t,e){return t=It(t,2*e),e-it(t-e)}function Ot(t,e,n){return(n-t)/(e-t)}function Mt(t){return it(t.x)>it(t.y)?it(t.x)>it(t.z)?t.x:t.z:it(t.y)>it(t.z)?t.y:t.z}function Pt(t,e){return it(t)>it(e)?t:e}function Ct(t,e){e.forEach((function(e){Object.defineProperty(t,e,{enumerable:!0})}))}var Ut,Ft,Rt=(Ut=new Float32Array(1),Ft=new Int32Array(Ut.buffer),function(t){Ut[0]=t;var e=Ft[0],n=e>>16&32768,r=2147483647&e,i=r-(112<<23)+4096>>13;return i=r<113<<23?0:i,i=r>=143<<23?31744:i,i=r>255<<23?32256:i,Ft[0]=n|i,Ft[0]}),Lt=function(){var t=new Float32Array(1),e=new Int32Array(t.buffer);return function(n){var r,i=32767&n,a=i<<13;return 31744!==a?(a+=112<<23,0===i?a=(1048575&a)>>1:32767===i&&(a=2147483647)):a=2139095040,r=(n>>15&1)<<31|a,e[0]=r,t[0]}}();function Bt(t){return Rt(t)}function Ht(t){return Lt(t)}var kt=Math.abs,qt=Math.max,Dt=Math.min,Vt=Math.PI,Gt=Math.sin,Wt=Math.cos,Kt=Math.atan2,Qt=Math.sqrt,jt=Math.ceil,Yt=Math.floor,Xt=Math.round;function Zt(t,e,n,r){return Object.freeze(new $t(t,e,n,r))}var Jt,$t=t("g",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=i||0),a}u(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.fromColor=function(t,e){return t.x=e.r,t.y=e.g,t.z=e.b,t.w=e.a,t},e.angle=function(t,e){var n=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x,a=t.x*e.x+t.y*e.y+t.z*e.z;return Kt(Qt(n*n+r*r+i*i),a)},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t.w=e.w*n.w,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t.w=e.w/n.w,t},e.ceil=function(t,e){return t.x=jt(e.x),t.y=jt(e.y),t.z=jt(e.z),t.w=jt(e.w),t},e.floor=function(t,e){return t.x=Yt(e.x),t.y=Yt(e.y),t.z=Yt(e.z),t.w=Yt(e.w),t},e.min=function(t,e,n){return t.x=Dt(e.x,n.x),t.y=Dt(e.y,n.y),t.z=Dt(e.z,n.z),t.w=Dt(e.w,n.w),t},e.max=function(t,e,n){return t.x=qt(e.x,n.x),t.y=qt(e.y,n.y),t.z=qt(e.z,n.z),t.w=qt(e.w,n.w),t},e.round=function(t,e){return t.x=Xt(e.x),t.y=Xt(e.y),t.z=Xt(e.z),t.w=Xt(e.w),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return Qt(n*n+r*r+i*i+a*a)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return n*n+r*r+i*i+a*a},e.len=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return Qt(e*e+n*n+r*r+i*i)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t.w=1/e.w,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w;return kt(n)<lt?t.x=0:t.x=1/n,kt(r)<lt?t.y=0:t.y=1/r,kt(i)<lt?t.z=0:t.z=1/i,kt(a)<lt?t.w=0:t.w=1/a,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,m=n*n+r*r+i*i+a*a;return m>0?(m=1/Qt(m),t.x=n*m,t.y=r*m,t.z=i*m,t.w=a*m):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.scale=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.random=function(t,e){e=e||1;var n=2*_t()*Vt,r=2*_t()-1,i=Qt(1-r*r);return t.x=i*Wt(n)*e,t.y=i*Gt(n)*e,t.z=r*e,t.w=0,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*m,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*m,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*m,t.w=n.m03*r+n.m07*i+n.m11*a+n.m15*m,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*m,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*m,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*m,t.w=e.w,t},e.transformQuat=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=n.x,o=n.y,u=n.z,s=n.w,c=s*r+o*a-u*i,h=s*i+u*r-m*a,l=s*a+m*i-o*r,f=-m*r-o*i-u*a;return t.x=c*s+f*-m+h*-u-l*-o,t.y=h*s+f*-o+l*-m-c*-u,t.z=l*s+f*-u+c*-o-h*-m,t.w=e.w,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){void 0===n&&(n=lt);var r=1/0;return!(kt(t.x)===r||kt(t.y)===r||kt(t.z)===r||kt(t.w)===r||kt(e.x)===r||kt(e.y)===r||kt(e.z)===r||kt(e.w)===r)&&kt(t.x-e.x)<=n*qt(1,kt(t.x),kt(e.x))&&kt(t.y-e.y)<=n*qt(1,kt(t.y),kt(e.y))&&kt(t.z-e.z)<=n*qt(1,kt(t.z),kt(e.z))&&kt(t.w-e.w)<=n*qt(1,kt(t.w),kt(e.w))};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},n.equals=function(t,e){void 0===e&&(e=lt);var n=this;return kt(n.x-t.x)<=e*qt(1,kt(n.x),kt(t.x))&&kt(n.y-t.y)<=e*qt(1,kt(n.y),kt(t.y))&&kt(n.z-t.z)<=e*qt(1,kt(n.z),kt(t.z))&&kt(n.w-t.w)<=e*qt(1,kt(n.w),kt(t.w))},n.equals4f=function(t,e,n,r,i){void 0===i&&(i=lt);var a=this;return kt(a.x-t)<=i*qt(1,kt(a.x),kt(t))&&kt(a.y-e)<=i*qt(1,kt(a.y),kt(e))&&kt(a.z-n)<=i*qt(1,kt(a.z),kt(n))&&kt(a.w-r)<=i*qt(1,kt(a.w),kt(r))},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.strictEquals4f=function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r},n.lerp=function(t,e){var n=this,r=n.x,i=n.y,a=n.z,m=n.w;return n.x=r+e*(t.x-r),n.y=i+e*(t.y-i),n.z=a+e*(t.z-a),n.w=m+e*(t.w-m),n},n.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},n.clampf=function(t,e){var n=this;return n.x=dt(n.x,t.x,e.x),n.y=dt(n.y,t.y,e.y),n.z=dt(n.z,t.z,e.z),n.w=dt(n.w,t.w,e.w),n},n.add=function(t){var e=this;return e.x+=t.x,e.y+=t.y,e.z+=t.z,e.w+=t.w,e},n.add4f=function(t,e,n,r){var i=this;return i.x+=t,i.y+=e,i.z+=n,i.w+=r,i},n.subtract=function(t){var e=this;return e.x-=t.x,e.y-=t.y,e.z-=t.z,e.w-=t.w,e},n.subtract4f=function(t,e,n,r){var i=this;return i.x-=t,i.y-=e,i.z-=n,i.w-=r,i},n.multiplyScalar=function(t){var e=this;return e.x*=t,e.y*=t,e.z*=t,e.w*=t,e},n.multiply=function(t){var e=this;return e.x*=t.x,e.y*=t.y,e.z*=t.z,e.w*=t.w,e},n.multiply4f=function(t,e,n,r){var i=this;return i.x*=t,i.y*=e,i.z*=n,i.w*=r,i},n.divide=function(t){var e=this;return e.x/=t.x,e.y/=t.y,e.z/=t.z,e.w/=t.w,e},n.divide4f=function(t,e,n,r){var i=this;return i.x/=t,i.y/=e,i.z/=n,i.w/=r,i},n.negative=function(){var t=this;return t.x=-t.x,t.y=-t.y,t.z=-t.z,t.w=-t.w,t},n.dot=function(t){var e=this;return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},n.cross=function(t){var e=this,n=e.x,r=e.y,i=e.z,a=t.x,m=t.y,o=t.z;return e.x=r*o-i*m,e.y=i*a-n*o,e.z=n*m-r*a,e},n.length=function(){var t=this,e=t.x,n=t.y,r=t.z,i=t.w;return Qt(e*e+n*n+r*r+i*i)},n.lengthSqr=function(){var t=this,e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},n.normalize=function(){var t=this,e=t.x,n=t.y,r=t.z,i=t.w,a=e*e+n*n+r*r+i*i;return a>0&&(a=1/Qt(a),t.x=e*a,t.y=n*a,t.z=r*a,t.w=i*a),t},n.scale=function(t){var e=this;return e.x*=t,e.y*=t,e.z*=t,e.w*=t,e},n.transformMat4=function(t){var e=this,n=e.x,r=e.y,i=e.z,a=e.w;return e.x=t.m00*n+t.m04*r+t.m08*i+t.m12*a,e.y=t.m01*n+t.m05*r+t.m09*i+t.m13*a,e.z=t.m02*n+t.m06*r+t.m10*i+t.m14*a,e.w=t.m03*n+t.m07*r+t.m11*i+t.m15*a,e},e}(s));function te(t,e,n,r){return new $t(t,e,n,r)}$t.ZERO=Zt(0,0,0,0),$t.ONE=Zt(1,1,1,1),$t.NEG_ONE=Zt(-1,-1,-1,-1),$t.UNIT_X=Zt(1,0,0,0),$t.UNIT_Y=Zt(0,1,0,0),$t.UNIT_Z=Zt(0,0,1,0),$t.UNIT_W=Zt(0,0,0,1),c.fastDefine("cc.Vec4",$t,{x:0,y:0,z:0,w:0}),e.Vec4=$t,e.v4=te;var ee=Math.abs,ne=Math.max,re=Math.min,ie=Math.PI,ae=Math.acos,me=Math.sin,oe=Math.cos,ue=Math.sqrt,se=Math.ceil,ce=Math.floor,he=Math.round;function le(t,e,n){return Object.freeze(new ge(t,e,n))}var fe,ye,de,ve,ge=t("f",function(t){function n(e,n,r){var i;return i=t.call(this)||this,"object"==typeof e?(i.x=e.x,i.y=e.y,i.z=e.z):(i.x=e||0,i.y=n||0,i.z=r||0),i}u(n,t),n.zero=function(t){return t.x=0,t.y=0,t.z=0,t},n.clone=function(t){return new n(t.x,t.y,t.z)},n.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t},n.set=function(t,e,n,r){return t.x=e,t.y=n,t.z=r,t},n.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},n.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},n.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},n.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},n.ceil=function(t,e){return t.x=se(e.x),t.y=se(e.y),t.z=se(e.z),t},n.floor=function(t,e){return t.x=ce(e.x),t.y=ce(e.y),t.z=ce(e.z),t},n.min=function(t,e,n){return t.x=re(e.x,n.x),t.y=re(e.y,n.y),t.z=re(e.z,n.z),t},n.max=function(t,e,n){return t.x=ne(e.x,n.x),t.y=ne(e.y,n.y),t.z=ne(e.z,n.z),t},n.round=function(t,e){return t.x=he(e.x),t.y=he(e.y),t.z=he(e.z),t},n.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},n.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t},n.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return ue(n*n+r*r+i*i)},n.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},n.len=function(t){var e=t.x,n=t.y,r=t.z;return ue(e*e+n*n+r*r)},n.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z;return e*e+n*n+r*r},n.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},n.invert=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t},n.invertSafe=function(t,e){var n=e.x,r=e.y,i=e.z;return ee(n)<lt?t.x=0:t.x=1/n,ee(r)<lt?t.y=0:t.y=1/r,ee(i)<lt?t.z=0:t.z=1/i,t},n.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=n*n+r*r+i*i;return a>0?(a=1/ue(a),t.x=n*a,t.y=r*a,t.z=i*a):(t.x=0,t.y=0,t.z=0),t},n.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},n.cross=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=n.x,o=n.y,u=n.z;return t.x=i*u-a*o,t.y=a*m-r*u,t.z=r*o-i*m,t},n.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t},n.random=function(t,e){e=e||1;var n=2*_t()*ie,r=2*_t()-1,i=ue(1-r*r);return t.x=i*oe(n)*e,t.y=i*me(n)*e,t.z=r*e,t},n.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=n.m03*r+n.m07*i+n.m11*a+n.m15;return m=m?1/m:1,t.x=(n.m00*r+n.m04*i+n.m08*a+n.m12)*m,t.y=(n.m01*r+n.m05*i+n.m09*a+n.m13)*m,t.z=(n.m02*r+n.m06*i+n.m10*a+n.m14)*m,t},n.transformMat4Normal=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=n.m03*r+n.m07*i+n.m11*a;return m=m?1/m:1,t.x=(n.m00*r+n.m04*i+n.m08*a)*m,t.y=(n.m01*r+n.m05*i+n.m09*a)*m,t.z=(n.m02*r+n.m06*i+n.m10*a)*m,t},n.transformMat3=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=r*n.m00+i*n.m03+a*n.m06,t.y=r*n.m01+i*n.m04+a*n.m07,t.z=r*n.m02+i*n.m05+a*n.m08,t},n.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14,t},n.transformQuat=function(t,e,n){var r=n.w*e.x+n.y*e.z-n.z*e.y,i=n.w*e.y+n.z*e.x-n.x*e.z,a=n.w*e.z+n.x*e.y-n.y*e.x,m=-n.x*e.x-n.y*e.y-n.z*e.z;return t.x=r*n.w+m*-n.x+i*-n.z-a*-n.y,t.y=i*n.w+m*-n.y+a*-n.x-r*-n.z,t.z=a*n.w+m*-n.z+r*-n.y-i*-n.x,t},n.transformRTS=function(t,e,n,r,i){var a=e.x*i.x,m=e.y*i.y,o=e.z*i.z,u=n.w*a+n.y*o-n.z*m,s=n.w*m+n.z*a-n.x*o,c=n.w*o+n.x*m-n.y*a,h=-n.x*a-n.y*m-n.z*o;return t.x=u*n.w+h*-n.x+s*-n.z-c*-n.y+r.x,t.y=s*n.w+h*-n.y+c*-n.x-u*-n.z+r.y,t.z=c*n.w+h*-n.z+u*-n.y-s*-n.x+r.z,t},n.transformInverseRTS=function(t,e,n,r,i){var a=e.x-r.x,m=e.y-r.y,o=e.z-r.z,u=n.w*a-n.y*o+n.z*m,s=n.w*m-n.z*a+n.x*o,c=n.w*o-n.x*m+n.y*a,h=n.x*a+n.y*m+n.z*o;return t.x=(u*n.w+h*n.x+s*n.z-c*n.y)/i.x,t.y=(s*n.w+h*n.y+c*n.x-u*n.z)/i.y,t.z=(c*n.w+h*n.z+u*n.y-s*n.x)/i.z,t},n.rotateX=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,m=e.z-n.z,o=oe(r),u=me(r),s=i,c=a*o-m*u,h=a*u+m*o;return t.x=s+n.x,t.y=c+n.y,t.z=h+n.z,t},n.rotateY=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,m=e.z-n.z,o=oe(r),u=me(r),s=m*u+i*o,c=a,h=m*o-i*u;return t.x=s+n.x,t.y=c+n.y,t.z=h+n.z,t},n.rotateZ=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,m=e.z-n.z,o=oe(r),u=me(r),s=i*o-a*u,c=i*u+a*o,h=m;return t.x=s+n.x,t.y=c+n.y,t.z=h+n.z,t},n.rotateN=function(t,e,n,r,i){var a=e.x-n.x,m=e.y-n.y,o=e.z-n.z,u=r.x,s=r.y,c=r.z,h=oe(i),l=me(i),f=a*(u*u*(1-h)+h)+m*(u*s*(1-h)-c*l)+o*(u*c*(1-h)+s*l),y=a*(u*s*(1-h)+c*l)+m*(s*s*(1-h)+h)+o*(s*c*(1-h)-u*l),d=a*(u*c*(1-h)-s*l)+m*(s*c*(1-h)+u*l)+o*(c*c*(1-h)+h);return t.x=f+n.x,t.y=y+n.y,t.z=d+n.z,t},n.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t},n.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t},n.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},n.equals=function(t,e,n){void 0===n&&(n=lt);var r=t.x,i=t.y,a=t.z,m=e.x,o=e.y,u=e.z;return ee(r-m)<=n*ne(1,ee(r),ee(m))&&ee(i-o)<=n*ne(1,ee(i),ee(o))&&ee(a-u)<=n*ne(1,ee(a),ee(u))},n.angle=function(t,e){var n=t.x*t.x+t.y*t.y+t.z*t.z,r=e.x*e.x+e.y*e.y+e.z*e.z;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y+t.z*e.z)/ue(n*r);return i=dt(i,-1,1),ae(i)},n.projectOnPlane=function(t,e,r){return n.subtract(t,e,n.project(t,e,r))},n.project=function(t,e,r){var i=n.lengthSqr(r);return i<1e-6?n.set(t,0,0,0):n.multiplyScalar(t,r,n.dot(e,r)/i)},n.moveTowards=function(t,e,n,r){var i=n.x-e.x,a=n.y-e.y,m=n.z-e.z,o=i*i+a*a+m*m;if(0===o||r>=0&&o<r*r)return t.x=n.x,t.y=n.y,t.z=n.z,t;var u=r/ue(o);return t.x=e.x+i*u,t.y=e.y+a*u,t.z=e.z+m*u,t},n.generateOrthogonal=function(t,e){var r=e.x,i=e.y,a=e.z,m=ee(r),o=ee(i),u=ee(a);return m<o&&m<u?n.set(t,0,a,-i):o<u?n.set(t,a,0,-r):n.set(t,i,-r,0),n.normalize(t,t)};var r=n.prototype;return r.clone=function(){return new n(this.x,this.y,this.z)},r.set=function(t,e,n){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=n||0),this},r.equals=function(t,e){return void 0===e&&(e=lt),ee(this.x-t.x)<=e&&ee(this.y-t.y)<=e&&ee(this.z-t.z)<=e},r.equals3f=function(t,e,n,r){return void 0===r&&(r=lt),ee(this.x-t)<=r&&ee(this.y-e)<=r&&ee(this.z-n)<=r},r.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},r.strictEquals3f=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},r.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},r.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this},r.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},r.add3f=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},r.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},r.subtract3f=function(t,e,n){return this.x-=t,this.y-=e,this.z-=n,this},r.multiplyScalar=function(t){return"object"==typeof t&&m(16357),this.x*=t,this.y*=t,this.z*=t,this},r.multiply=function(t){return"object"!=typeof t&&m(16358),this.x*=t.x,this.y*=t.y,this.z*=t.z,this},r.multiply3f=function(t,e,n){return this.x*=t,this.y*=e,this.z*=n,this},r.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},r.divide3f=function(t,e,n){return this.x/=t,this.y/=e,this.z/=n,this},r.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},r.clampf=function(t,e){return this.x=dt(this.x,t.x,e.x),this.y=dt(this.y,t.y,e.y),this.z=dt(this.z,t.z,e.z),this},r.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},r.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,m=t.z;return this.x=n*m-r*a,this.y=r*i-e*m,this.z=e*a-n*i,this},r.length=function(){var t=this;return ue(t.x*t.x+t.y*t.y+t.z*t.z)},r.lengthSqr=function(){var t=this;return t.x*t.x+t.y*t.y+t.z*t.z},r.normalize=function(){var t=this,e=t.x,n=t.y,r=t.z,i=e*e+n*n+r*r;return i>0&&(i=1/ue(i),t.x=e*i,t.y=n*i,t.z=r*i),t},r.transformMat4=function(t){var e=this,n=e.x,r=e.y,i=e.z,a=t.m03*n+t.m07*r+t.m11*i+t.m15;return a=a?1/a:1,e.x=(t.m00*n+t.m04*r+t.m08*i+t.m12)*a,e.y=(t.m01*n+t.m05*r+t.m09*i+t.m13)*a,e.z=(t.m02*n+t.m06*r+t.m10*i+t.m14)*a,e},r.toVec2=function(){return new e.Vec2(this.x,this.y)},n}(s));function pe(t,e,n){return new ge(t,e,n)}Jt=ge,ge.UNIT_X=le(1,0,0),ge.UNIT_Y=le(0,1,0),ge.UNIT_Z=le(0,0,1),ge.RIGHT=le(1,0,0),ge.UP=le(0,1,0),ge.FORWARD=le(0,0,-1),ge.ZERO=le(0,0,0),ge.ONE=le(1,1,1),ge.NEG_ONE=le(-1,-1,-1),ge.slerp=(fe=new Jt,ye=new Jt,de=new Jt,function(t,e,n,r){var i=1e-5,a=Jt.len(e),m=Jt.len(n);if(a<i||m<i)return Jt.lerp(t,e,n,r);var o=gt(a,m,r),u=Jt.dot(e,n)/(a*m);if(u>.99999)return Jt.lerp(t,e,n,r);if(u<-.99999){var s=Jt.multiplyScalar(fe,e,1/a),c=Jt.generateOrthogonal(ye,s);return _e(de,s,c,ie*r),Jt.multiplyScalar(t,de,o),t}var h=u,l=ae(h)*r,f=Jt.multiplyScalar(fe,e,1/a),y=Jt.multiplyScalar(ye,n,1/m);return Jt.scaleAndAdd(de,y,f,-h),Jt.normalize(de,de),Jt.multiplyScalar(de,de,me(l)),Jt.scaleAndAdd(de,de,f,oe(l)),Jt.multiplyScalar(t,de,o),t}),ge.signedAngle=(ve=new Jt,function(t,e,n){var r=Jt.angle(t,e),i=Jt.cross(ve,t,e);return Jt.dot(i,n)<0?-r:r}),c.fastDefine("cc.Vec3",ge,{x:0,y:0,z:0}),e.Vec3=ge;var xe,_e=(xe={x:0,y:0,z:0,w:0},function(t,e,n,r){var i=.5*r,a=me(i);return xe.x=a*n.x,xe.y=a*n.y,xe.z=a*n.z,xe.w=oe(i),ge.transformQuat(t,e,xe),t});e.v3=pe;var we=1/255,ze=Math.abs,Ee=Math.max;function Ne(t,e,n,r){return Object.freeze(new Ae(t,e,n,r))}var Te,Ae=t("C",function(t){function e(e,n,r,i){var a;return(a=t.call(this)||this)._data=new Uint8ClampedArray(4),"string"==typeof e?a.fromHEX(e):void 0!==n?a.set(e,n,r,i):a.set(e),a}u(e,t),e.clone=function(t){var n=new e;return n.r=t.r,n.g=t.g,n.b=t.b,n.a=t.a,n},e.copy=function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t},e.set=function(t,e,n,r,i){return t.r=e,t.g=n,t.b=r,t.a=i,t},e.toVec4=function(t,e){var n=t._data;return(e=void 0!==e?e:new $t).x=n[0]*we,e.y=n[1]*we,e.z=n[2]*we,e.w=n[3]*we,e},e.fromVec4=function(t,n){var r=(n=void 0===n?new e:n)._data;return r[0]=t.x/we,r[1]=t.y/we,r[2]=t.z/we,r[3]=t.w/we,n},e.fromHEX=function(t,e){var n;return"string"==typeof e?(6===(e="#"===e[0]?e.substring(1):e).length?e+="FF":3===e.length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+"FF":4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n=Number("0x"+e)):(e<16777216&&(e=255+(e<<8)),n=e),t.r=n>>>24,t.g=(16711680&n)>>>16,t.b=(65280&n)>>>8,t.a=255&n,t},e.add=function(t,e,n){return t.r=e.r+n.r,t.g=e.g+n.g,t.b=e.b+n.b,t.a=e.a+n.a,t},e.subtract=function(t,e,n){return t.r=e.r-n.r,t.g=e.g-n.g,t.b=e.b-n.b,t.a=e.a-n.a,t},e.multiply=function(t,e,n){return t.r=e.r*n.r,t.g=e.g*n.g,t.b=e.b*n.b,t.a=e.a*n.a,t},e.divide=function(t,e,n){return t.r=e.r/n.r,t.g=e.g/n.g,t.b=e.b/n.b,t.a=e.a/n.a,t},e.scale=function(t,e,n){return t.r=e.r*n,t.g=e.g*n,t.b=e.b*n,t.a=e.a*n,t},e.lerp=function(t,e,n,r){var i=e.r,a=e.g,m=e.b,o=e.a;return t.r=i+(n.r-i)*r,t.g=a+(n.g-a)*r,t.b=m+(n.b-m)*r,t.a=o+(n.a-o)*r,t},e.toArray=function(t,n,r){void 0===r&&(r=0);var i=n instanceof e||n.a>1?1/255:1;return t[r+0]=n.r*i,t[r+1]=n.g*i,t[r+2]=n.b*i,t[r+3]=n.a*i,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),e.r=255*t[n+0],e.g=255*t[n+1],e.b=255*t[n+2],e.a=255*t[n+3],e},e.fromUint32=function(t,e){return e>>>=0,t.r=255&e,t.g=e>>8&255,t.b=e>>16&255,t.a=e>>24&255,t},e.toUint32=function(t){return(t.a<<24|t.b<<16|t.g<<8|t.r)>>>0},e.strictEquals=function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a},e.equals=function(t,e,n){return void 0===n&&(n=lt),!(ze(t.r)===1/0||ze(t.g)===1/0||ze(t.b)===1/0||ze(t.a)===1/0)&&ze(t.r-e.r)<=n*Ee(1,ze(t.r),ze(e.r))&&ze(t.g-e.g)<=n*Ee(1,ze(t.g),ze(e.g))&&ze(t.b-e.b)<=n*Ee(1,ze(t.b),ze(e.b))&&ze(t.a-e.a)<=n*Ee(1,ze(t.a),ze(e.a))},e.hex=function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0};var n=e.prototype;return n.clone=function(){var t=new e;return t._data.set(this._data),t},n.equals=function(t){var e=t,n=this._data;return t&&n[0]===e.r&&n[1]===e.g&&n[2]===e.b&&n[3]===e.a},n.lerp=function(t,n){return e.lerp(this,this,t,n),this},n.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},n.toCSS=function(t){return void 0===t&&(t="rgba"),"rgba"===t?"rgba("+this.r+","+this.g+","+this.b+","+(this.a*we).toFixed(2)+")":"rgb"===t?"rgb("+this.r+","+this.g+","+this.b+")":"#"+this.toHEX(t)},n.fromHEX=function(t){var e;return"string"==typeof t?(6===(t="#"===t[0]?t.substring(1):t).length?t+="FF":3===t.length?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+"FF":4===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),e=Number("0x"+t)):(t<16777216&&(t=255+(t<<8)),e=t),this.r=e>>>24,this.g=(16711680&e)>>>16,this.b=(65280&e)>>>8,this.a=255&e,this},n.toHEX=function(t){void 0===t&&(t="#rrggbb");var e=this._data,n="0",r=[(e[0]<16?n:"")+e[0].toString(16),(e[1]<16?n:"")+e[1].toString(16),(e[2]<16?n:"")+e[2].toString(16)];return"#rgb"===t?(r[0]=r[0][0],r[1]=r[1][0],r[2]=r[2][0]):"#rrggbbaa"===t&&r.push((e[3]<16?n:"")+e[3].toString(16)),r.join("")},n.toRGBValue=function(){return this._data[2]<<16|this._data[1]<<8|this._data[0]},n.fromHSV=function(t,e,n){var r=0,i=0,a=0;if(0===e)r=i=a=n;else if(0===n)r=i=a=0;else{1===t&&(t=0),t*=6;var m=Math.floor(t),o=t-m,u=n*(1-e),s=n*(1-e*o),c=n*(1-e*(1-o));switch(m){default:h(!1);case 0:r=n,i=c,a=u;break;case 1:r=s,i=n,a=u;break;case 2:r=u,i=n,a=c;break;case 3:r=u,i=s,a=n;break;case 4:r=c,i=u,a=n;break;case 5:r=n,i=u,a=s}}var l=this._data;return l[0]=255*r,l[1]=255*i,l[2]=255*a,this},n.toHSV=function(){var t=this._data[0]*we,e=this._data[1]*we,n=this._data[2]*we,r={h:0,s:0,v:0},i=Math.max(t,e,n),a=Math.min(t,e,n),m=0;return r.v=i,r.s=i?(i-a)/i:0,r.s?(m=i-a,r.h=t===i?(e-n)/m:e===i?2+(n-t)/m:4+(t-e)/m,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},n.set=function(t,e,n,r){var i=this._data;if("object"==typeof t){var a,m,o,u,s=t;s._data?i.set(s._data):(i[0]=null!==(a=s.r)&&void 0!==a?a:0,i[1]=null!==(m=s.g)&&void 0!==m?m:0,i[2]=null!==(o=s.b)&&void 0!==o?o:0,i[3]=null!==(u=s.a)&&void 0!==u?u:255)}else i[0]=null!=t?t:0,i[1]=null!=e?e:0,i[2]=null!=n?n:0,i[3]=null!=r?r:255;return this},n.multiply=function(t){var e=this._data;return e[0]*=t.r/255,e[1]*=t.g/255,e[2]*=t.b/255,e[3]*=t.a/255,this},n.getModifiableProperties=function(){return["r","g","b","a"]},l(e,[{key:"r",get:function(){return this._data[0]},set:function(t){this._data[0]=t}},{key:"g",get:function(){return this._data[1]},set:function(t){this._data[1]=t}},{key:"b",get:function(){return this._data[2]},set:function(t){this._data[2]=t}},{key:"a",get:function(){return this._data[3]},set:function(t){this._data[3]=t}},{key:"x",get:function(){return this._data[0]*we},set:function(t){this._data[0]=255*t}},{key:"y",get:function(){return this._data[1]*we},set:function(t){this._data[1]=255*t}},{key:"z",get:function(){return this._data[2]*we},set:function(t){this._data[2]=255*t}},{key:"w",get:function(){return this._data[3]*we},set:function(t){this._data[3]=255*t}}]),e}(s));function Se(t,e,n,r){return new Ae(t,e,n,r)}function Ie(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}function be(t){var e=t.clone();return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}Ae.WHITE=Ne(255,255,255,255),Ae.GRAY=Ne(127,127,127,255),Ae.BLACK=Ne(0,0,0,255),Ae.TRANSPARENT=Ne(0,0,0,0),Ae.RED=Ne(255,0,0,255),Ae.GREEN=Ne(0,255,0,255),Ae.BLUE=Ne(0,0,255,255),Ae.CYAN=Ne(0,255,255,255),Ae.MAGENTA=Ne(255,0,255,255),Ae.YELLOW=Ne(255,255,0,255),c.fastDefine("cc.Color",Ae,{r:0,g:0,b:0,a:255}),e.Color=Ae,e.color=Se;var Oe=Math.abs,Me=Math.max,Pe=t("L",function(t){function e(e,n,r,i,a,m,o,u,s){var c;void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===m&&(m=0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=1),c=t.call(this)||this;var h=f(c);return"object"==typeof e?(h.m00=e.m00,h.m01=e.m01,h.m02=e.m02,h.m03=e.m03,h.m04=e.m04,h.m05=e.m05,h.m06=e.m06,h.m07=e.m07,h.m08=e.m08):(h.m00=e,h.m01=n,h.m02=r,h.m03=i,h.m04=a,h.m05=m,h.m06=o,h.m07=u,h.m08=s),c}u(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.set=function(t,e,n,r,i,a,m,o,u,s){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=m,t.m06=o,t.m07=u,t.m08=s,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m05;t.m01=e.m03,t.m02=e.m06,t.m03=n,t.m05=e.m07,t.m06=r,t.m07=i}else t.m00=e.m00,t.m01=e.m03,t.m02=e.m06,t.m03=e.m01,t.m04=e.m04,t.m05=e.m07,t.m06=e.m02,t.m07=e.m05,t.m08=e.m08;return t},e.invert=function(t,n){var r=n.m00,i=n.m01,a=n.m02,m=n.m03,o=n.m04,u=n.m05,s=n.m06,c=n.m07,h=n.m08,l=h*o-u*c,f=-h*m+u*s,y=c*m-o*s,d=r*l+i*f+a*y;return 0===d?(e.set(t,0,0,0,0,0,0,0,0,0),t):(d=1/d,t.m00=l*d,t.m01=(-h*i+a*c)*d,t.m02=(u*i-a*o)*d,t.m03=f*d,t.m04=(h*r-a*s)*d,t.m05=(-u*r+a*m)*d,t.m06=y*d,t.m07=(-c*r+i*s)*d,t.m08=(o*r-i*m)*d,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,m=t.m05,o=t.m06,u=t.m07,s=t.m08;return e*(s*a-m*u)+n*(-s*i+m*o)+r*(u*i-a*o)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,m=e.m03,o=e.m04,u=e.m05,s=e.m06,c=e.m07,h=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m03,v=n.m04,g=n.m05,p=n.m06,x=n.m07,_=n.m08;return t.m00=l*r+f*m+y*s,t.m01=l*i+f*o+y*c,t.m02=l*a+f*u+y*h,t.m03=d*r+v*m+g*s,t.m04=d*i+v*o+g*c,t.m05=d*a+v*u+g*h,t.m06=p*r+x*m+_*s,t.m07=p*i+x*o+_*c,t.m08=p*a+x*u+_*h,t},e.multiplyMat4=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,m=e.m03,o=e.m04,u=e.m05,s=e.m06,c=e.m07,h=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m04,v=n.m05,g=n.m06,p=n.m08,x=n.m09,_=n.m10;return t.m00=l*r+f*m+y*s,t.m01=l*i+f*o+y*c,t.m02=l*a+f*u+y*h,t.m03=d*r+v*m+g*s,t.m04=d*i+v*o+g*c,t.m05=d*a+v*u+g*h,t.m06=p*r+x*m+_*s,t.m07=p*i+x*o+_*c,t.m08=p*a+x*u+_*h,t},e.transform=function(t,e,n){this.translate(t,e,n)},e.translate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,m=e.m03,o=e.m04,u=e.m05,s=e.m06,c=e.m07,h=e.m08,l=n.x,f=n.y;return t.m00=r,t.m01=i,t.m02=a,t.m03=m,t.m04=o,t.m05=u,t.m06=l*r+f*m+s,t.m07=l*i+f*o+c,t.m08=l*a+f*u+h,t},e.scale=function(t,e,n){var r=n.x,i=n.y;return t.m00=r*e.m00,t.m01=r*e.m01,t.m02=r*e.m02,t.m03=i*e.m03,t.m04=i*e.m04,t.m05=i*e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.rotate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,m=e.m03,o=e.m04,u=e.m05,s=e.m06,c=e.m07,h=e.m08,l=Math.sin(n),f=Math.cos(n);return t.m00=f*r+l*m,t.m01=f*i+l*o,t.m02=f*a+l*u,t.m03=f*m-l*r,t.m04=f*o-l*i,t.m05=f*u-l*a,t.m06=s,t.m07=c,t.m08=h,t},e.fromMat4=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m04,t.m04=e.m05,t.m05=e.m06,t.m06=e.m08,t.m07=e.m09,t.m08=e.m10,t},e.fromViewUp=function(t,n,r){return ge.lengthSqr(n)<lt*lt?(e.identity(t),t):(r=r||ge.UNIT_Y,ge.normalize(Ue,ge.cross(Ue,r,n)),ge.lengthSqr(Ue)<lt*lt?(e.identity(t),t):(ge.cross(Fe,n,Ue),e.set(t,Ue.x,Ue.y,Ue.z,Fe.x,Fe.y,Fe.z,n.x,n.y,n.z),t))},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=e.x,t.m07=e.y,t.m08=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=e.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=-n,t.m04=r,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,m=n+n,o=r+r,u=i+i,s=n*m,c=r*m,h=r*o,l=i*m,f=i*o,y=i*u,d=a*m,v=a*o,g=a*u;return t.m00=1-h-y,t.m03=c-g,t.m06=l+v,t.m01=c+g,t.m04=1-s-y,t.m07=f-d,t.m02=l-v,t.m05=f+d,t.m08=1-s-h,t},e.inverseTransposeMat4=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,m=e.m04,o=e.m05,u=e.m06,s=e.m07,c=e.m08,h=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,g=e.m15,p=n*o-r*m,x=n*u-i*m,_=n*s-a*m,w=r*u-i*o,z=r*s-a*o,E=i*s-a*u,N=c*d-h*y,T=c*v-l*y,A=c*g-f*y,S=h*v-l*d,I=h*g-f*d,b=l*g-f*v,O=p*b-x*I+_*S+w*A-z*T+E*N;return O?(O=1/O,t.m00=(o*b-u*I+s*S)*O,t.m01=(u*A-m*b-s*T)*O,t.m02=(m*I-o*A+s*N)*O,t.m03=(i*I-r*b-a*S)*O,t.m04=(n*b-i*A+a*T)*O,t.m05=(r*A-n*I-a*N)*O,t.m06=(d*E-v*z+g*w)*O,t.m07=(v*_-y*E-g*x)*O,t.m08=(y*z-d*_+g*p)*O,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=n.m00*r+e.m00,t.m01=n.m01*r+e.m01,t.m02=n.m02*r+e.m02,t.m03=n.m03*r+e.m03,t.m04=n.m04*r+e.m04,t.m05=n.m05*r+e.m05,t.m06=n.m06*r+e.m06,t.m07=n.m07*r+e.m07,t.m08=n.m08*r+e.m08,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08},e.equals=function(t,e,n){return void 0===n&&(n=lt),Oe(t.m00-e.m00)<=n*Me(1,Oe(t.m00),Oe(e.m00))&&Oe(t.m01-e.m01)<=n*Me(1,Oe(t.m01),Oe(e.m01))&&Oe(t.m02-e.m02)<=n*Me(1,Oe(t.m02),Oe(e.m02))&&Oe(t.m03-e.m03)<=n*Me(1,Oe(t.m03),Oe(e.m03))&&Oe(t.m04-e.m04)<=n*Me(1,Oe(t.m04),Oe(e.m04))&&Oe(t.m05-e.m05)<=n*Me(1,Oe(t.m05),Oe(e.m05))&&Oe(t.m06-e.m06)<=n*Me(1,Oe(t.m06),Oe(e.m06))&&Oe(t.m07-e.m07)<=n*Me(1,Oe(t.m07),Oe(e.m07))&&Oe(t.m08-e.m08)<=n*Me(1,Oe(t.m08),Oe(e.m08))},e.toEuler=function(t,e){var n=t.m00,r=t.m01;t.m02;var i=t.m03,a=t.m04;t.m05;var m=t.m06,o=t.m07,u=t.m08;return o<.999?o>-.999?(e.x=Math.asin(-o),e.y=Math.atan2(m,u),e.z=Math.atan2(r,a),!0):(e.x=ct,e.y=Math.atan2(i,n),e.z=0,!1):(e.x=-ct,e.y=Math.atan2(-i,n),e.z=0,!1)};var n=e.prototype;return n.clone=function(){return new e(this)},n.set=function(t,e,n,r,i,a,m,o,u){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=0),void 0===m&&(m=0),void 0===o&&(o=0),void 0===u&&(u=1);var s=this;return"object"==typeof t?(s.m00=t.m00,s.m01=t.m01,s.m02=t.m02,s.m03=t.m03,s.m04=t.m04,s.m05=t.m05,s.m06=t.m06,s.m07=t.m07,s.m08=t.m08):(s.m00=t,s.m01=e,s.m02=n,s.m03=r,s.m04=i,s.m05=a,s.m06=m,s.m07=o,s.m08=u),s},n.equals=function(t,n){return void 0===n&&(n=lt),e.equals(this,t,n)},n.strictEquals=function(t){return e.strictEquals(this,t)},n.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+", "+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+", "+t.m08+"\n]"},n.identity=function(){return e.identity(this)},n.transpose=function(){var t=this,e=t.m01,n=t.m02,r=t.m05;return t.m01=t.m03,t.m02=t.m06,t.m03=e,t.m05=t.m07,t.m06=n,t.m07=r,t},n.invert=function(){return e.invert(this,this)},n.determinant=function(){return e.determinant(this)},n.add=function(t){var e=this;return e.m00+=t.m00,e.m01+=t.m01,e.m02+=t.m02,e.m03+=t.m03,e.m04+=t.m04,e.m05+=t.m05,e.m06+=t.m06,e.m07+=t.m07,e.m08+=t.m08,e},n.subtract=function(t){var e=this;return e.m00-=t.m00,e.m01-=t.m01,e.m02-=t.m02,e.m03-=t.m03,e.m04-=t.m04,e.m05-=t.m05,e.m06-=t.m06,e.m07-=t.m07,e.m08-=t.m08,e},n.multiply=function(t){return e.multiply(this,this,t)},n.multiplyScalar=function(t){var e=this;return e.m00*=t,e.m01*=t,e.m02*=t,e.m03*=t,e.m04*=t,e.m05*=t,e.m06*=t,e.m07*=t,e.m08*=t,e},n.scale=function(t){var e=t.x,n=t.y,r=this;return r.m00*=e,r.m01*=e,r.m02*=e,r.m03*=n,r.m04*=n,r.m05*=n,r},n.rotate=function(t){var e=this,n=e.m00,r=e.m01,i=e.m02,a=e.m03,m=e.m04,o=e.m05,u=e.m06,s=e.m07,c=e.m08,h=Math.sin(t),l=Math.cos(t);return e.m00=l*n+h*a,e.m01=l*r+h*m,e.m02=l*i+h*o,e.m03=l*a-h*n,e.m04=l*m-h*r,e.m05=l*o-h*i,e.m06=u,e.m07=s,e.m08=c,e},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,m=n+n,o=r+r,u=e*a,s=n*a,c=n*m,h=r*a,l=r*m,f=r*o,y=i*a,d=i*m,v=i*o,g=this;return g.m00=1-c-f,g.m03=s-v,g.m06=h+d,g.m01=s+v,g.m04=1-u-f,g.m07=l-y,g.m02=h-d,g.m05=l+y,g.m08=1-u-c,g},e}(s));Te=Pe,Pe.IDENTITY=Object.freeze(new Te);var Ce,Ue=new ge,Fe=new ge;c.fastDefine("cc.Mat3",Pe,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),e.Mat3=Pe;var Re=Math.abs,Le=Math.max,Be=Math.min,He=Math.PI,ke=Math.acos,qe=Math.sin,De=Math.cos,Ve=Math.sqrt,Ge=Math.atan2,We=Math.asin,Ke=Math.sign,Qe=t("Q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=null!=i?i:1),a}u(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.identity=function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t},e.rotationTo=function(t,n,r){var i=ge.dot(n,r);return i<-.999999?(ge.cross(Ze,ge.UNIT_X,n),Ze.length()<1e-6&&ge.cross(Ze,ge.UNIT_Y,n),ge.normalize(Ze,Ze),e.fromAxisAngle(t,Ze,He),t):i>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(ge.cross(Ze,n,r),t.x=Ze.x,t.y=Ze.y,t.z=Ze.z,t.w=1+i,e.normalize(t,t))},e.getAxisAngle=function(t,e){var n=2*ke(e.w),r=qe(n/2);return 0!==r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):(t.x=1,t.y=0,t.z=0),n},e.multiply=function(t,e,n){var r=e.x*n.w+e.w*n.x+e.y*n.z-e.z*n.y,i=e.y*n.w+e.w*n.y+e.z*n.x-e.x*n.z,a=e.z*n.w+e.w*n.z+e.x*n.y-e.y*n.x,m=e.w*n.w-e.x*n.x-e.y*n.y-e.z*n.z;return t.x=r,t.y=i,t.z=a,t.w=m,t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.rotateX=function(t,e,n){var r=qe(n*=.5),i=De(n),a=e.x,m=e.y,o=e.z,u=e.w;return t.x=a*i+u*r,t.y=m*i+o*r,t.z=o*i-m*r,t.w=u*i-a*r,t},e.rotateY=function(t,e,n){var r=qe(n*=.5),i=De(n),a=e.x,m=e.y,o=e.z,u=e.w;return t.x=a*i-o*r,t.y=m*i+u*r,t.z=o*i+a*r,t.w=u*i-m*r,t},e.rotateZ=function(t,e,n){var r=qe(n*=.5),i=De(n),a=e.x,m=e.y,o=e.z,u=e.w;return t.x=a*i+m*r,t.y=m*i-a*r,t.z=o*i+u*r,t.w=u*i-o*r,t},e.rotateAround=function(t,n,r,i){return e.invert(Ye,n),ge.transformQuat(Ze,r,Ye),e.fromAxisAngle(Ye,Ze,i),e.multiply(t,n,Ye),t},e.rotateAroundLocal=function(t,n,r,i){return e.fromAxisAngle(Ye,r,i),e.multiply(t,n,Ye),t},e.calculateW=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=Ve(Re(1-e.x*e.x-e.y*e.y-e.z*e.z)),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.slerp=function(t,e,n,r){var i=0,a=0,m=n.x,o=n.y,u=n.z,s=n.w,c=e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w;if(c<0&&(c=-c,m=-m,o=-o,u=-u,s=-s),1-c>1e-6){var h=ke(c),l=qe(h);i=qe((1-r)*h)/l,a=qe(r*h)/l}else i=1-r,a=r;return t.x=i*e.x+a*m,t.y=i*e.y+a*o,t.z=i*e.z+a*u,t.w=i*e.w+a*s,t},e.sqlerp=function(t,n,r,i,a,m){return e.slerp(Ye,n,a,m),e.slerp(Xe,r,i,m),e.slerp(t,Ye,Xe,2*m*(1-m)),t},e.invert=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,r=n?1/n:0;return t.x=-e.x*r,t.y=-e.y*r,t.z=-e.z*r,t.w=e.w*r,t},e.conjugate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},e.len=function(t){return Ve(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},e.lengthSqr=function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},e.normalize=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w;return n>0?(n=1/Ve(n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.fromAxes=function(t,n,r,i){return Pe.set(Je,n.x,n.y,n.z,r.x,r.y,r.z,i.x,i.y,i.z),e.normalize(t,e.fromMat3(t,Je))},e.fromViewUp=function(t,n,r){return Pe.fromViewUp(Je,n,r),e.normalize(t,e.fromMat3(t,Je))},e.fromAxisAngle=function(t,e,n){var r=qe(n*=.5);return t.x=r*e.x,t.y=r*e.y,t.z=r*e.z,t.w=De(n),t},e.fromMat3=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,m=e.m04,o=e.m05,u=e.m06,s=e.m07,c=e.m08,h=n-m-c,l=m-n-c,f=c-n-m,y=0,d=n+m+c;h>d&&(d=h,y=1),l>d&&(d=l,y=2),f>d&&(d=f,y=3);var v=.5*Ve(d+1),g=.25/v;switch(y){case 0:t.w=v,t.x=(o-s)*g,t.y=(u-i)*g,t.z=(r-a)*g;break;case 1:t.w=(o-s)*g,t.x=v,t.y=(r+a)*g,t.z=(u+i)*g;break;case 2:t.w=(u-i)*g,t.x=(r+a)*g,t.y=v,t.z=(o+s)*g;break;case 3:t.w=(r-a)*g,t.x=(u+i)*g,t.y=(o+s)*g,t.z=v;break;default:t.w=1,t.x=0,t.y=0,t.z=0}return t},e.fromEuler=function(t,e,n,r){n*=$e,r*=$e;var i=qe(e*=$e),a=De(e),m=qe(n),o=De(n),u=qe(r),s=De(r);return t.x=i*o*s+a*m*u,t.y=a*m*s+i*o*u,t.z=a*o*u-i*m*s,t.w=a*o*s-i*m*u,t},e.fromAngleZ=function(t,e){return e*=$e,t.x=t.y=0,t.z=qe(e),t.w=De(e),t},e.toAxisX=function(t,e){var n=2*e.y,r=2*e.z;return t.x=1-n*e.y-r*e.z,t.y=n*e.x+r*e.w,t.z=r*e.x-n*e.w,t},e.toAxisY=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=r*e.x-i*e.w,t.y=1-n*e.x-i*e.z,t.z=i*e.y+n*e.w,t},e.toAxisZ=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=i*e.x+r*e.w,t.y=i*e.y-n*e.w,t.z=1-n*e.x-r*e.y,t},e.toEuler=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=e.w,o=0,u=0,s=0,c=r*i+a*m;if(c>.499999)o=0,u=xt(2*Ge(r,m)),s=90;else if(c<-.499999)o=0,u=-xt(2*Ge(r,m)),s=-90;else{var h=i*i,l=a*a;o=xt(Ge(2*r*m-2*i*a,1-r*r*2-2*l)),u=xt(Ge(2*i*m-2*r*a,1-2*h-2*l)),s=xt(We(2*c)),n&&(o=-180*Ke(o+1e-6)+o,u=-180*Ke(u+1e-6)+u,s=180*Ke(s+1e-6)-s)}return t.x=o,t.y=u,t.z=s,t},e.toEulerInYXZOrder=function(t,e){Pe.fromQuat(Je,e),Pe.toEuler(Je,t),t.x=xt(t.x),t.y=xt(t.y),t.z=xt(t.z)},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=lt),Re(t.x-e.x)<=n*Le(1,Re(t.x),Re(e.x))&&Re(t.y-e.y)<=n*Le(1,Re(t.y),Re(e.y))&&Re(t.z-e.z)<=n*Le(1,Re(t.z),Re(e.z))&&Re(t.w-e.w)<=n*Le(1,Re(t.w),Re(e.w))},e.angle=function(t,n){var r=Be(Re(e.dot(t,n)),1);return 2*ke(r)},e.rotateTowards=function(t,n,r,i){var a=e.angle(n,r);if(0===a)return t.x=r.x,t.y=r.y,t.z=r.z,t.w=r.w,t;var m=Be(i/xt(a),1);return e.slerp(t,n,r,m)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=null!=r?r:1),this},n.equals=function(t,n){return void 0===n&&(n=lt),e.equals(this,t,n)},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.getEulerAngles=function(t){return e.toEuler(t,this)},n.lerp=function(t,e){var n=this;return n.x+=e*(t.x-n.x),n.y+=e*(t.y-n.y),n.z+=e*(t.z-n.z),n.w+=e*(t.w-n.w),n},n.slerp=function(t,n){return e.slerp(this,this,t,n)},n.length=function(){var t=this,e=t.x,n=t.y,r=t.z,i=t.w;return Ve(e*e+n*n+r*r+i*i)},n.lengthSqr=function(){var t=this,e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},n.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},e}(s));Ce=Qe,Qe.IDENTITY=Object.freeze(new Ce);var je,Ye=new Qe,Xe=new Qe,Ze=new ge,Je=new Pe,$e=.5*He/180;function tn(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),new Qe(t,e,n,r)}c.fastDefine("cc.Quat",Qe,{x:0,y:0,z:0,w:1}),e.Quat=Qe,e.quat=tn;var en=Object.freeze,nn=t("m",en([en([1,0,0,1]),en([0,1,-1,0]),en([-1,0,0,-1]),en([0,-1,1,0])])),rn=Math.abs,an=Math.max,mn=Math.sqrt,on=Math.sin,un=Math.cos,sn=Math.tan,cn=t("M",function(t){function e(e,n,r,i,a,m,o,u,s,c,h,l,y,d,v,g){var p;void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===m&&(m=1),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=0),void 0===c&&(c=0),void 0===h&&(h=1),void 0===l&&(l=0),void 0===y&&(y=0),void 0===d&&(d=0),void 0===v&&(v=0),void 0===g&&(g=1),p=t.call(this)||this;var x=f(p);return"object"==typeof e?(x.m00=e.m00,p.m01=e.m01,p.m02=e.m02,p.m03=e.m03,x.m04=e.m04,p.m05=e.m05,p.m06=e.m06,p.m07=e.m07,x.m08=e.m08,p.m09=e.m09,p.m10=e.m10,p.m11=e.m11,x.m12=e.m12,p.m13=e.m13,p.m14=e.m14,p.m15=e.m15):(x.m00=e,p.m01=n,p.m02=r,p.m03=i,x.m04=a,p.m05=m,p.m06=o,p.m07=u,x.m08=s,p.m09=c,p.m10=h,p.m11=l,x.m12=y,p.m13=d,p.m14=v,p.m15=g),p}u(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.set=function(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y,d,v){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=m,t.m06=o,t.m07=u,t.m08=s,t.m09=c,t.m10=h,t.m11=l,t.m12=f,t.m13=y,t.m14=d,t.m15=v,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.zero=function(t){return t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m03,a=e.m06,m=e.m07,o=e.m11;t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=n,t.m06=e.m09,t.m07=e.m13,t.m08=r,t.m09=a,t.m11=e.m14,t.m12=i,t.m13=m,t.m14=o}else t.m00=e.m00,t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=e.m01,t.m05=e.m05,t.m06=e.m09,t.m07=e.m13,t.m08=e.m02,t.m09=e.m06,t.m10=e.m10,t.m11=e.m14,t.m12=e.m03,t.m13=e.m07,t.m14=e.m11,t.m15=e.m15;return t},e.invert=function(t,n){var r=n.m00,i=n.m01,a=n.m02,m=n.m03,o=n.m04,u=n.m05,s=n.m06,c=n.m07,h=n.m08,l=n.m09,f=n.m10,y=n.m11,d=n.m12,v=n.m13,g=n.m14,p=n.m15,x=r*u-i*o,_=r*s-a*o,w=r*c-m*o,z=i*s-a*u,E=i*c-m*u,N=a*c-m*s,T=h*v-l*d,A=h*g-f*d,S=h*p-y*d,I=l*g-f*v,b=l*p-y*v,O=f*p-y*g,M=x*O-_*b+w*I+z*S-E*A+N*T;return 0===M?e.zero(t):(M=1/M,t.m00=(u*O-s*b+c*I)*M,t.m01=(a*b-i*O-m*I)*M,t.m02=(v*N-g*E+p*z)*M,t.m03=(f*E-l*N-y*z)*M,t.m04=(s*S-o*O-c*A)*M,t.m05=(r*O-a*S+m*A)*M,t.m06=(g*w-d*N-p*_)*M,t.m07=(h*N-f*w+y*_)*M,t.m08=(o*b-u*S+c*T)*M,t.m09=(i*S-r*b-m*T)*M,t.m10=(d*E-v*w+p*x)*M,t.m11=(l*w-h*E-y*x)*M,t.m12=(u*A-o*I-s*T)*M,t.m13=(r*I-i*A+a*T)*M,t.m14=(v*_-d*z-g*x)*M,t.m15=(h*z-l*_+f*x)*M,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,m=t.m05,o=t.m06,u=t.m07,s=t.m08,c=t.m09,h=t.m10,l=t.m11,f=t.m12,y=t.m13,d=t.m14,v=t.m15;return(e*m-n*a)*(h*v-l*d)-(e*o-r*a)*(c*v-l*y)+(e*u-i*a)*(c*d-h*y)+(n*o-r*m)*(s*v-l*f)-(n*u-i*m)*(s*d-h*f)+(r*u-i*o)*(s*y-c*f)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,m=e.m03,o=e.m04,u=e.m05,s=e.m06,c=e.m07,h=e.m08,l=e.m09,f=e.m10,y=e.m11,d=e.m12,v=e.m13,g=e.m14,p=e.m15,x=n.m00,_=n.m01,w=n.m02,z=n.m03;return t.m00=x*r+_*o+w*h+z*d,t.m01=x*i+_*u+w*l+z*v,t.m02=x*a+_*s+w*f+z*g,t.m03=x*m+_*c+w*y+z*p,x=n.m04,_=n.m05,w=n.m06,z=n.m07,t.m04=x*r+_*o+w*h+z*d,t.m05=x*i+_*u+w*l+z*v,t.m06=x*a+_*s+w*f+z*g,t.m07=x*m+_*c+w*y+z*p,x=n.m08,_=n.m09,w=n.m10,z=n.m11,t.m08=x*r+_*o+w*h+z*d,t.m09=x*i+_*u+w*l+z*v,t.m10=x*a+_*s+w*f+z*g,t.m11=x*m+_*c+w*y+z*p,x=n.m12,_=n.m13,w=n.m14,z=n.m15,t.m12=x*r+_*o+w*h+z*d,t.m13=x*i+_*u+w*l+z*v,t.m14=x*a+_*s+w*f+z*g,t.m15=x*m+_*c+w*y+z*p,t},e.transform=function(t,e,n){var r=n.x,i=n.y,a=n.z;if(e===t)t.m12=e.m00*r+e.m04*i+e.m08*a+e.m12,t.m13=e.m01*r+e.m05*i+e.m09*a+e.m13,t.m14=e.m02*r+e.m06*i+e.m10*a+e.m14,t.m15=e.m03*r+e.m07*i+e.m11*a+e.m15;else{var m=e.m00,o=e.m01,u=e.m02,s=e.m03,c=e.m04,h=e.m05,l=e.m06,f=e.m07,y=e.m08,d=e.m09,v=e.m10,g=e.m11;t.m00=m,t.m01=o,t.m02=u,t.m03=s,t.m04=c,t.m05=h,t.m06=l,t.m07=f,t.m08=y,t.m09=d,t.m10=v,t.m11=g,t.m12=m*r+c*i+y*a+e.m12,t.m13=o*r+h*i+d*a+e.m13,t.m14=u*r+l*i+v*a+e.m14,t.m15=s*r+f*i+g*a+e.m15}return t},e.translate=function(t,e,n){return e===t?(t.m12+=n.x,t.m13+=n.y,t.m14+=n.z):(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12+n.x,t.m13=e.m13+n.y,t.m14=e.m14+n.z,t.m15=e.m15),t},e.scale=function(t,e,n){var r=n.x,i=n.y,a=n.z;return t.m00=e.m00*r,t.m01=e.m01*r,t.m02=e.m02*r,t.m03=e.m03*r,t.m04=e.m04*i,t.m05=e.m05*i,t.m06=e.m06*i,t.m07=e.m07*i,t.m08=e.m08*a,t.m09=e.m09*a,t.m10=e.m10*a,t.m11=e.m11*a,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.rotate=function(t,e,n,r){var i=r.x,a=r.y,m=r.z,o=mn(i*i+a*a+m*m);if(rn(o)<lt)return null;i*=o=1/o,a*=o,m*=o;var u=on(n),s=un(n),c=1-s,h=e.m00,l=e.m01,f=e.m02,y=e.m03,d=e.m04,v=e.m05,g=e.m06,p=e.m07,x=e.m08,_=e.m09,w=e.m10,z=e.m11,E=i*i*c+s,N=a*i*c+m*u,T=m*i*c-a*u,A=i*a*c-m*u,S=a*a*c+s,I=m*a*c+i*u,b=i*m*c+a*u,O=a*m*c-i*u,M=m*m*c+s;return t.m00=h*E+d*N+x*T,t.m01=l*E+v*N+_*T,t.m02=f*E+g*N+w*T,t.m03=y*E+p*N+z*T,t.m04=h*A+d*S+x*I,t.m05=l*A+v*S+_*I,t.m06=f*A+g*S+w*I,t.m07=y*A+p*S+z*I,t.m08=h*b+d*O+x*M,t.m09=l*b+v*O+_*M,t.m10=f*b+g*O+w*M,t.m11=y*b+p*O+z*M,e!==t&&(t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t},e.rotateX=function(t,e,n){var r=on(n),i=un(n),a=e.m04,m=e.m05,o=e.m06,u=e.m07,s=e.m08,c=e.m09,h=e.m10,l=e.m11;return e!==t&&(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m04=a*i+s*r,t.m05=m*i+c*r,t.m06=o*i+h*r,t.m07=u*i+l*r,t.m08=s*i-a*r,t.m09=c*i-m*r,t.m10=h*i-o*r,t.m11=l*i-u*r,t},e.rotateY=function(t,e,n){var r=on(n),i=un(n),a=e.m00,m=e.m01,o=e.m02,u=e.m03,s=e.m08,c=e.m09,h=e.m10,l=e.m11;return e!==t&&(t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i-s*r,t.m01=m*i-c*r,t.m02=o*i-h*r,t.m03=u*i-l*r,t.m08=a*r+s*i,t.m09=m*r+c*i,t.m10=o*r+h*i,t.m11=u*r+l*i,t},e.rotateZ=function(t,e,n){var r=on(n),i=un(n),a=e.m00,m=e.m01,o=e.m02,u=e.m03,s=e.m04,c=e.m05,h=e.m06,l=e.m07;return e!==t&&(t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i+s*r,t.m01=m*i+c*r,t.m02=o*i+h*r,t.m03=u*i+l*r,t.m04=s*i-a*r,t.m05=c*i-m*r,t.m06=h*i-o*r,t.m07=l*i-u*r,t},e.fromTranslation=function(t,n){return e.identity(t),t.m12=n.x,t.m13=n.y,t.m14=n.z,t},e.fromScaling=function(t,n){return e.identity(t),t.m00=n.x,t.m05=n.y,t.m10=n.z,t},e.fromRotation=function(t,e,n){var r=n.x,i=n.y,a=n.z,m=mn(r*r+i*i+a*a);if(rn(m)<lt)return null;r*=m=1/m,i*=m,a*=m;var o=on(e),u=un(e),s=1-u;return t.m00=r*r*s+u,t.m01=i*r*s+a*o,t.m02=a*r*s-i*o,t.m03=0,t.m04=r*i*s-a*o,t.m05=i*i*s+u,t.m06=a*i*s+r*o,t.m07=0,t.m08=r*a*s+i*o,t.m09=i*a*s-r*o,t.m10=a*a*s+u,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromXRotation=function(t,n){var r=on(n),i=un(n);return e.identity(t),t.m05=i,t.m06=r,t.m09=-r,t.m10=i,t},e.fromYRotation=function(t,n){var r=on(n),i=un(n);return e.identity(t),t.m00=i,t.m02=-r,t.m08=r,t.m10=i,t},e.fromZRotation=function(t,n){var r=on(n),i=un(n);return e.identity(t),t.m00=i,t.m01=r,t.m04=-r,t.m05=i,t},e.fromRT=function(t,e,n){var r=e.x,i=e.y,a=e.z,m=e.w,o=r+r,u=i+i,s=a+a,c=r*o,h=r*u,l=r*s,f=i*u,y=i*s,d=a*s,v=m*o,g=m*u,p=m*s;return t.m00=1-(f+d),t.m01=h+p,t.m02=l-g,t.m03=0,t.m04=h-p,t.m05=1-(c+d),t.m06=y+v,t.m07=0,t.m08=l+g,t.m09=y-v,t.m10=1-(c+f),t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.getTranslation=function(t,e){return t.x=e.m12,t.y=e.m13,t.z=e.m14,t},e.getScaling=function(t,e){var n=ln.m00=e.m00,r=ln.m01=e.m01,i=ln.m02=e.m02,a=ln.m03=e.m04,m=ln.m04=e.m05,o=ln.m05=e.m06,u=ln.m06=e.m08,s=ln.m07=e.m09,c=ln.m08=e.m10;return t.x=mn(n*n+r*r+i*i),t.y=mn(a*a+m*m+o*o),t.z=mn(u*u+s*s+c*c),Pe.determinant(ln)<0&&(t.x*=-1),t},e.getRotation=function(t,e){var n=e.m00+e.m05+e.m10,r=0;return n>0?(r=2*mn(n+1),t.w=.25*r,t.x=(e.m06-e.m09)/r,t.y=(e.m08-e.m02)/r,t.z=(e.m01-e.m04)/r):e.m00>e.m05&&e.m00>e.m10?(r=2*mn(1+e.m00-e.m05-e.m10),t.w=(e.m06-e.m09)/r,t.x=.25*r,t.y=(e.m01+e.m04)/r,t.z=(e.m08+e.m02)/r):e.m05>e.m10?(r=2*mn(1+e.m05-e.m00-e.m10),t.w=(e.m08-e.m02)/r,t.x=(e.m01+e.m04)/r,t.y=.25*r,t.z=(e.m06+e.m09)/r):(r=2*mn(1+e.m10-e.m00-e.m05),t.w=(e.m01-e.m04)/r,t.x=(e.m08+e.m02)/r,t.y=(e.m06+e.m09)/r,t.z=.25*r),t},e.toRTS=function(t,n,r,i){e.toSRT(t,n,r,i)},e.toSRT=function(t,e,n,r){n&&ge.set(n,t.m12,t.m13,t.m14);var i=ge.set(hn,t.m00,t.m01,t.m02).length(),a=ge.set(hn,t.m04,t.m05,t.m06).length(),m=ge.set(hn,t.m08,t.m09,t.m10).length();if(r&&(r.x=i,r.y=a,r.z=m),0!==i&&0!==a&&0!==m){ln.m00=t.m00/i,ln.m01=t.m01/i,ln.m02=t.m02/i,ln.m03=t.m04/a,ln.m04=t.m05/a,ln.m05=t.m06/a,ln.m06=t.m08/m,ln.m07=t.m09/m,ln.m08=t.m10/m;var o=Pe.determinant(ln);r&&o<0&&(r.x*=-1),e&&(o<0&&(ln.m00*=-1,ln.m01*=-1,ln.m02*=-1),Qe.fromMat3(e,ln))}else e&&Qe.identity(e)},e.toEuler=function(t,e){return Pe.set(ln,t.m00,t.m01,t.m02,t.m04,t.m05,t.m06,t.m08,t.m09,t.m10),Pe.toEuler(ln,e)},e.fromRTS=function(t,n,r,i){return e.fromSRT(t,n,r,i)},e.fromSRT=function(t,e,n,r){var i=e.x,a=e.y,m=e.z,o=e.w,u=i+i,s=a+a,c=m+m,h=i*u,l=i*s,f=i*c,y=a*s,d=a*c,v=m*c,g=o*u,p=o*s,x=o*c,_=r.x,w=r.y,z=r.z;return t.m00=(1-(y+v))*_,t.m01=(l+x)*_,t.m02=(f-p)*_,t.m03=0,t.m04=(l-x)*w,t.m05=(1-(h+v))*w,t.m06=(d+g)*w,t.m07=0,t.m08=(f+p)*z,t.m09=(d-g)*z,t.m10=(1-(h+y))*z,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromRTSOrigin=function(t,n,r,i,a){return e.fromSRTOrigin(t,n,r,i,a)},e.fromSRTOrigin=function(t,e,n,r,i){var a=e.x,m=e.y,o=e.z,u=e.w,s=a+a,c=m+m,h=o+o,l=a*s,f=a*c,y=a*h,d=m*c,v=m*h,g=o*h,p=u*s,x=u*c,_=u*h,w=r.x,z=r.y,E=r.z,N=i.x,T=i.y,A=i.z;return t.m00=(1-(d+g))*w,t.m01=(f+_)*w,t.m02=(y-x)*w,t.m03=0,t.m04=(f-_)*z,t.m05=(1-(l+g))*z,t.m06=(v+p)*z,t.m07=0,t.m08=(y+x)*E,t.m09=(v-p)*E,t.m10=(1-(l+d))*E,t.m11=0,t.m12=n.x+N-(t.m00*N+t.m04*T+t.m08*A),t.m13=n.y+T-(t.m01*N+t.m05*T+t.m09*A),t.m14=n.z+A-(t.m02*N+t.m06*T+t.m10*A),t.m15=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,m=n+n,o=r+r,u=i+i,s=n*m,c=r*m,h=r*o,l=i*m,f=i*o,y=i*u,d=a*m,v=a*o,g=a*u;return t.m00=1-h-y,t.m01=c+g,t.m02=l-v,t.m03=0,t.m04=c-g,t.m05=1-s-y,t.m06=f+d,t.m07=0,t.m08=l+v,t.m09=f-d,t.m10=1-s-h,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.frustum=function(t,e,n,r,i,a,m){var o=1/(n-e),u=1/(i-r),s=1/(a-m);return t.m00=2*a*o,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*a*u,t.m06=0,t.m07=0,t.m08=(n+e)*o,t.m09=(i+r)*u,t.m10=(m+a)*s,t.m11=-1,t.m12=0,t.m13=0,t.m14=m*a*2*s,t.m15=0,t},e.perspective=function(t,e,n,r,i,a,m,o,u){void 0===a&&(a=!0),void 0===m&&(m=-1),void 0===o&&(o=1),void 0===u&&(u=0);var s=1/sn(e/2),c=1/(r-i),h=a?s/n:s,l=(a?s:s*n)*o,f=nn[u];return t.m00=h*f[0],t.m01=h*f[1],t.m02=0,t.m03=0,t.m04=l*f[2],t.m05=l*f[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(i-m*r)*c,t.m11=-1,t.m12=0,t.m13=0,t.m14=i*r*c*(1-m),t.m15=0,t},e.ortho=function(t,e,n,r,i,a,m,o,u,s){void 0===o&&(o=-1),void 0===u&&(u=1),void 0===s&&(s=0);var c=1/(e-n),h=1/(r-i)*u,l=1/(a-m),f=-2*c,y=-2*h,d=(e+n)*c,v=(i+r)*h,g=nn[s];return t.m00=f*g[0],t.m01=f*g[1],t.m02=0,t.m03=0,t.m04=y*g[2],t.m05=y*g[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=l*(1-o),t.m11=0,t.m12=d*g[0]+v*g[2],t.m13=d*g[1]+v*g[3],t.m14=(a-o*m)*l,t.m15=1,t},e.lookAt=function(t,e,n,r){var i=e.x,a=e.y,m=e.z,o=r.x,u=r.y,s=r.z,c=i-n.x,h=a-n.y,l=m-n.z,f=1/mn(c*c+h*h+l*l),y=u*(l*=f)-s*(h*=f),d=s*(c*=f)-o*l,v=o*h-u*c,g=h*(v*=f=1/mn(y*y+d*d+v*v))-l*(d*=f),p=l*(y*=f)-c*v,x=c*d-h*y;return t.m00=y,t.m01=g,t.m02=c,t.m03=0,t.m04=d,t.m05=p,t.m06=h,t.m07=0,t.m08=v,t.m09=x,t.m10=l,t.m11=0,t.m12=-(y*i+d*a+v*m),t.m13=-(g*i+p*a+x*m),t.m14=-(c*i+h*a+l*m),t.m15=1,t},e.inverseTranspose=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,m=e.m04,o=e.m05,u=e.m06,s=e.m07,c=e.m08,h=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,g=e.m15,p=n*o-r*m,x=n*u-i*m,_=n*s-a*m,w=r*u-i*o,z=r*s-a*o,E=i*s-a*u,N=c*d-h*y,T=c*v-l*y,A=c*g-f*y,S=h*v-l*d,I=h*g-f*d,b=l*g-f*v,O=p*b-x*I+_*S+w*A-z*T+E*N;return O?(O=1/O,t.m00=(o*b-u*I+s*S)*O,t.m01=(u*A-m*b-s*T)*O,t.m02=(m*I-o*A+s*N)*O,t.m03=0,t.m04=(i*I-r*b-a*S)*O,t.m05=(n*b-i*A+a*T)*O,t.m06=(r*A-n*I-a*N)*O,t.m07=0,t.m08=(d*E-v*z+g*w)*O,t.m09=(v*_-y*E-g*x)*O,t.m10=(y*z-d*_+g*p)*O,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t[n+9]=e.m09,t[n+10]=e.m10,t[n+11]=e.m11,t[n+12]=e.m12,t[n+13]=e.m13,t[n+14]=e.m14,t[n+15]=e.m15,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t.m09=e[n+9],t.m10=e[n+10],t.m11=e[n+11],t.m12=e[n+12],t.m13=e[n+13],t.m14=e[n+14],t.m15=e[n+15],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t.m09=e.m09+n.m09,t.m10=e.m10+n.m10,t.m11=e.m11+n.m11,t.m12=e.m12+n.m12,t.m13=e.m13+n.m13,t.m14=e.m14+n.m14,t.m15=e.m15+n.m15,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t.m09=e.m09-n.m09,t.m10=e.m10-n.m10,t.m11=e.m11-n.m11,t.m12=e.m12-n.m12,t.m13=e.m13-n.m13,t.m14=e.m14-n.m14,t.m15=e.m15-n.m15,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t.m09=e.m09*n,t.m10=e.m10*n,t.m11=e.m11*n,t.m12=e.m12*n,t.m13=e.m13*n,t.m14=e.m14*n,t.m15=e.m15*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=e.m00+n.m00*r,t.m01=e.m01+n.m01*r,t.m02=e.m02+n.m02*r,t.m03=e.m03+n.m03*r,t.m04=e.m04+n.m04*r,t.m05=e.m05+n.m05*r,t.m06=e.m06+n.m06*r,t.m07=e.m07+n.m07*r,t.m08=e.m08+n.m08*r,t.m09=e.m09+n.m09*r,t.m10=e.m10+n.m10*r,t.m11=e.m11+n.m11*r,t.m12=e.m12+n.m12*r,t.m13=e.m13+n.m13*r,t.m14=e.m14+n.m14*r,t.m15=e.m15+n.m15*r,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08&&t.m09===e.m09&&t.m10===e.m10&&t.m11===e.m11&&t.m12===e.m12&&t.m13===e.m13&&t.m14===e.m14&&t.m15===e.m15},e.equals=function(t,e,n){return void 0===n&&(n=lt),rn(t.m00-e.m00)<=n*an(1,rn(t.m00),rn(e.m00))&&rn(t.m01-e.m01)<=n*an(1,rn(t.m01),rn(e.m01))&&rn(t.m02-e.m02)<=n*an(1,rn(t.m02),rn(e.m02))&&rn(t.m03-e.m03)<=n*an(1,rn(t.m03),rn(e.m03))&&rn(t.m04-e.m04)<=n*an(1,rn(t.m04),rn(e.m04))&&rn(t.m05-e.m05)<=n*an(1,rn(t.m05),rn(e.m05))&&rn(t.m06-e.m06)<=n*an(1,rn(t.m06),rn(e.m06))&&rn(t.m07-e.m07)<=n*an(1,rn(t.m07),rn(e.m07))&&rn(t.m08-e.m08)<=n*an(1,rn(t.m08),rn(e.m08))&&rn(t.m09-e.m09)<=n*an(1,rn(t.m09),rn(e.m09))&&rn(t.m10-e.m10)<=n*an(1,rn(t.m10),rn(e.m10))&&rn(t.m11-e.m11)<=n*an(1,rn(t.m11),rn(e.m11))&&rn(t.m12-e.m12)<=n*an(1,rn(t.m12),rn(e.m12))&&rn(t.m13-e.m13)<=n*an(1,rn(t.m13),rn(e.m13))&&rn(t.m14-e.m14)<=n*an(1,rn(t.m14),rn(e.m14))&&rn(t.m15-e.m15)<=n*an(1,rn(t.m15),rn(e.m15))};var n=e.prototype;return n.clone=function(){return new e(this.m00,this.m01,this.m02,this.m03,this.m04,this.m05,this.m06,this.m07,this.m08,this.m09,this.m10,this.m11,this.m12,this.m13,this.m14,this.m15)},n.set=function(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y,d){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===m&&(m=0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=0),void 0===c&&(c=1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===d&&(d=1);var v=this;return"object"==typeof t?(v.m01=t.m01,v.m02=t.m02,v.m03=t.m03,v.m04=t.m04,v.m05=t.m05,v.m06=t.m06,v.m07=t.m07,v.m08=t.m08,v.m09=t.m09,v.m10=t.m10,v.m11=t.m11,v.m12=t.m12,v.m13=t.m13,v.m14=t.m14,v.m15=t.m15,v.m00=t.m00):(v.m01=e,v.m02=n,v.m03=r,v.m04=i,v.m05=a,v.m06=m,v.m07=o,v.m08=u,v.m09=s,v.m10=c,v.m11=h,v.m12=l,v.m13=f,v.m14=y,v.m15=d,v.m00=t),v},n.equals=function(t,e){void 0===e&&(e=lt);var n=1/0,r=this,i=r.m00,a=r.m01,m=r.m02,o=r.m03,u=r.m04,s=r.m05,c=r.m06,h=r.m07,l=r.m08,f=r.m09,y=r.m10,d=r.m11,v=r.m12,g=r.m13,p=r.m14,x=r.m15;return!(rn(i)===n||rn(a)===n||rn(m)===n||rn(o)===n||rn(u)===n||rn(s)===n||rn(c)===n||rn(h)===n||rn(l)===n||rn(f)===n||rn(y)===n||rn(d)===n||rn(v)===n||rn(g)===n||rn(p)===n||rn(x)===n)&&rn(i-t.m00)<=e*an(1,rn(i),rn(t.m00))&&rn(a-t.m01)<=e*an(1,rn(a),rn(t.m01))&&rn(m-t.m02)<=e*an(1,rn(m),rn(t.m02))&&rn(o-t.m03)<=e*an(1,rn(o),rn(t.m03))&&rn(u-t.m04)<=e*an(1,rn(u),rn(t.m04))&&rn(s-t.m05)<=e*an(1,rn(s),rn(t.m05))&&rn(c-t.m06)<=e*an(1,rn(c),rn(t.m06))&&rn(h-t.m07)<=e*an(1,rn(h),rn(t.m07))&&rn(l-t.m08)<=e*an(1,rn(l),rn(t.m08))&&rn(f-t.m09)<=e*an(1,rn(f),rn(t.m09))&&rn(y-t.m10)<=e*an(1,rn(y),rn(t.m10))&&rn(d-t.m11)<=e*an(1,rn(d),rn(t.m11))&&rn(v-t.m12)<=e*an(1,rn(v),rn(t.m12))&&rn(g-t.m13)<=e*an(1,rn(g),rn(t.m13))&&rn(p-t.m14)<=e*an(1,rn(p),rn(t.m14))&&rn(x-t.m15)<=e*an(1,rn(x),rn(t.m15))},n.strictEquals=function(t){var e=this;return e.m00===t.m00&&e.m01===t.m01&&e.m02===t.m02&&e.m03===t.m03&&e.m04===t.m04&&e.m05===t.m05&&e.m06===t.m06&&e.m07===t.m07&&e.m08===t.m08&&e.m09===t.m09&&e.m10===t.m10&&e.m11===t.m11&&e.m12===t.m12&&e.m13===t.m13&&e.m14===t.m14&&e.m15===t.m15},n.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+", "+t.m03+",\n"+t.m04+", "+t.m05+", "+t.m06+", "+t.m07+",\n"+t.m08+", "+t.m09+", "+t.m10+", "+t.m11+",\n"+t.m12+", "+t.m13+", "+t.m14+", "+t.m15+"\n]"},n.identity=function(){return e.identity(this)},n.zero=function(){return e.zero(this)},n.transpose=function(){var t=this,e=t.m01,n=t.m02,r=t.m03,i=t.m06,a=t.m07,m=t.m11;return t.m01=t.m04,t.m02=t.m08,t.m03=t.m12,t.m04=e,t.m06=t.m09,t.m07=t.m13,t.m08=n,t.m09=i,t.m11=t.m14,t.m12=r,t.m13=a,t.m14=m,t},n.invert=function(){var t=this,e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,m=t.m05,o=t.m06,u=t.m07,s=t.m08,c=t.m09,h=t.m10,l=t.m11,f=t.m12,y=t.m13,d=t.m14,v=t.m15,g=e*m-n*a,p=e*o-r*a,x=e*u-i*a,_=n*o-r*m,w=n*u-i*m,z=r*u-i*o,E=s*y-c*f,N=s*d-h*f,T=s*v-l*f,A=c*d-h*y,S=c*v-l*y,I=h*v-l*d,b=g*I-p*S+x*A+_*T-w*N+z*E;return 0===b?(t.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),t):(b=1/b,t.m00=(m*I-o*S+u*A)*b,t.m01=(r*S-n*I-i*A)*b,t.m02=(y*z-d*w+v*_)*b,t.m03=(h*w-c*z-l*_)*b,t.m04=(o*T-a*I-u*N)*b,t.m05=(e*I-r*T+i*N)*b,t.m06=(d*x-f*z-v*p)*b,t.m07=(s*z-h*x+l*p)*b,t.m08=(a*S-m*T+u*E)*b,t.m09=(n*T-e*S-i*E)*b,t.m10=(f*w-y*x+v*g)*b,t.m11=(c*x-s*w-l*g)*b,t.m12=(m*N-a*A-o*E)*b,t.m13=(e*A-n*N+r*E)*b,t.m14=(y*p-f*_-d*g)*b,t.m15=(s*_-c*p+h*g)*b,t)},n.determinant=function(){var t=this,e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,m=t.m05,o=t.m06,u=t.m07,s=t.m08,c=t.m09,h=t.m10,l=t.m11,f=t.m12,y=t.m13,d=t.m14,v=t.m15;return(e*m-n*a)*(h*v-l*d)-(e*o-r*a)*(c*v-l*y)+(e*u-i*a)*(c*d-h*y)+(n*o-r*m)*(s*v-l*f)-(n*u-i*m)*(s*d-h*f)+(r*u-i*o)*(s*y-c*f)},n.add=function(t){var e=this;return e.m00+=t.m00,e.m01+=t.m01,e.m02+=t.m02,e.m03+=t.m03,e.m04+=t.m04,e.m05+=t.m05,e.m06+=t.m06,e.m07+=t.m07,e.m08+=t.m08,e.m09+=t.m09,e.m10+=t.m10,e.m11+=t.m11,e.m12+=t.m12,e.m13+=t.m13,e.m14+=t.m14,e.m15+=t.m15,e},n.subtract=function(t){var e=this;return e.m00-=t.m00,e.m01-=t.m01,e.m02-=t.m02,e.m03-=t.m03,e.m04-=t.m04,e.m05-=t.m05,e.m06-=t.m06,e.m07-=t.m07,e.m08-=t.m08,e.m09-=t.m09,e.m10-=t.m10,e.m11-=t.m11,e.m12-=t.m12,e.m13-=t.m13,e.m14-=t.m14,e.m15-=t.m15,e},n.multiply=function(t){return e.multiply(this,this,t)},n.multiplyScalar=function(t){var e=this;return e.m00*=t,e.m01*=t,e.m02*=t,e.m03*=t,e.m04*=t,e.m05*=t,e.m06*=t,e.m07*=t,e.m08*=t,e.m09*=t,e.m10*=t,e.m11*=t,e.m12*=t,e.m13*=t,e.m14*=t,e.m15*=t,e},n.translate=function(t){return this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this},n.transform=function(t){var e=t.x,n=t.y,r=t.z,i=this,a=i.m00,m=i.m01,o=i.m02,u=i.m03,s=i.m04,c=i.m05,h=i.m06,l=i.m07,f=i.m08,y=i.m09,d=i.m10,v=i.m11;return i.m12=a*e+s*n+f*r+i.m12,i.m13=m*e+c*n+y*r+i.m13,i.m14=o*e+h*n+d*r+i.m14,i.m15=u*e+l*n+v*r+i.m15,i},n.scale=function(t){var e=t.x,n=t.y,r=t.z,i=this;return i.m00*=e,i.m01*=e,i.m02*=e,i.m03*=e,i.m04*=n,i.m05*=n,i.m06*=n,i.m07*=n,i.m08*=r,i.m09*=r,i.m10*=r,i.m11*=r,i},n.rotate=function(t,e){var n=e.x,r=e.y,i=e.z,a=mn(n*n+r*r+i*i);if(rn(a)<lt)return null;n*=a=1/a,r*=a,i*=a;var m=on(t),o=un(t),u=1-o,s=this,c=s.m00,h=s.m01,l=s.m02,f=s.m03,y=s.m04,d=s.m05,v=s.m06,g=s.m07,p=s.m08,x=s.m09,_=s.m10,w=s.m11,z=n*n*u+o,E=r*n*u+i*m,N=i*n*u-r*m,T=n*r*u-i*m,A=r*r*u+o,S=i*r*u+n*m,I=n*i*u+r*m,b=r*i*u-n*m,O=i*i*u+o;return s.m00=c*z+y*E+p*N,s.m01=h*z+d*E+x*N,s.m02=l*z+v*E+_*N,s.m03=f*z+g*E+w*N,s.m04=c*T+y*A+p*S,s.m05=h*T+d*A+x*S,s.m06=l*T+v*A+_*S,s.m07=f*T+g*A+w*S,s.m08=c*I+y*b+p*O,s.m09=h*I+d*b+x*O,s.m10=l*I+v*b+_*O,s.m11=f*I+g*b+w*O,s},n.getTranslation=function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t},n.getScale=function(t){var e=this,n=ln.m00=e.m00,r=ln.m01=e.m01,i=ln.m02=e.m02,a=ln.m03=e.m04,m=ln.m04=e.m05,o=ln.m05=e.m06,u=ln.m06=e.m08,s=ln.m07=e.m09,c=ln.m08=e.m10;return t.x=mn(n*n+r*r+i*i),t.y=mn(a*a+m*m+o*o),t.z=mn(u*u+s*s+c*c),Pe.determinant(ln)<0&&(t.x*=-1),t},n.getRotation=function(t){var e=this,n=ge.set(hn,e.m00,e.m01,e.m02).length(),r=ge.set(hn,e.m04,e.m05,e.m06).length(),i=ge.set(hn,e.m08,e.m09,e.m10).length();return ln.m00=e.m00/n,ln.m01=e.m01/n,ln.m02=e.m02/n,ln.m03=e.m04/r,ln.m04=e.m05/r,ln.m05=e.m06/r,ln.m06=e.m08/i,ln.m07=e.m09/i,ln.m08=e.m10/i,Pe.determinant(ln)<0&&(ln.m00*=-1,ln.m01*=-1,ln.m02*=-1),Qe.fromMat3(t,ln)},n.fromRTS=function(t,n,r){return e.fromSRT(this,t,n,r)},n.fromSRT=function(t,n,r){return e.fromSRT(this,t,n,r)},n.fromQuat=function(t){return e.fromQuat(this,t)},e}(s));je=cn,cn.IDENTITY=Object.freeze(new je);var hn=new ge,ln=new Pe;function fn(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y,d){return new cn(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y,d)}c.fastDefine("cc.Mat4",cn,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),e.Mat4=cn,e.mat4=fn;var yn=Math.abs,dn=Math.max,vn=Math.min,gn=Math.PI,pn=Math.acos,xn=Math.sin,_n=Math.cos,wn=Math.sqrt,zn=Math.atan2,En=Math.ceil,Nn=Math.floor,Tn=Math.round;function An(t,e){return Object.freeze(new bn(t,e))}var Sn,In,bn=t("V",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.x=e.x,r.y=e.y):(r.x=e||0,r.y=n||0),r}u(e,t),e.clone=function(t){return new e(t.x,t.y)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t},e.set=function(t,e,n){return t.x=e,t.y=n,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t},e.ceil=function(t,e){return t.x=En(e.x),t.y=En(e.y),t},e.floor=function(t,e){return t.x=Nn(e.x),t.y=Nn(e.y),t},e.min=function(t,e,n){return t.x=vn(e.x,n.x),t.y=vn(e.y,n.y),t},e.max=function(t,e,n){return t.x=dn(e.x,n.x),t.y=dn(e.y,n.y),t},e.round=function(t,e){return t.x=Tn(e.x),t.y=Tn(e.y),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return wn(n*n+r*r)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.len=function(t){var e=t.x,n=t.y;return wn(e*e+n*n)},e.lengthSqr=function(t){var e=t.x,n=t.y;return e*e+n*n},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y;return yn(n)<lt?t.x=0:t.x=1/n,yn(r)<lt?t.y=0:t.y=1/r,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=n*n+r*r;return i>0?(i=1/wn(i),t.x=n*i,t.y=r*i):(t.x=0,t.y=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.cross=function(t,e,n){return t instanceof ge?(t.x=t.y=0,t.z=e.x*n.y-e.y*n.x,t):t.x*e.y-t.y*e.x},e.lerp=function(t,e,n,r){var i=e.x,a=e.y;return t.x=i+r*(n.x-i),t.y=a+r*(n.y-a),t},e.random=function(t,e){e=e||1;var n=2*_t()*gn;return t.x=_n(n)*e,t.y=xn(n)*e,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m03*i+n.m06,t.y=n.m01*r+n.m04*i+n.m07,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m04*i+n.m12,t.y=n.m01*r+n.m05*i+n.m13,t},e.str=function(t){return"Vec2("+t.x+", "+t.y+")"},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y},e.equals=function(t,e,n){return void 0===n&&(n=lt),yn(t.x-e.x)<=n*dn(1,yn(t.x),yn(e.x))&&yn(t.y-e.y)<=n*dn(1,yn(t.y),yn(e.y))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y,r=e.x*e.x+e.y*e.y;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y)/wn(n*r);return i=dt(i,-1,1),pn(i)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y)},n.set=function(t,e){return"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=e||0),this},n.equals=function(t,n){return void 0===n&&(n=lt),e.equals(this,t,n)},n.equals2f=function(t,e,n){return void 0===n&&(n=lt),yn(this.x-t)<=n*dn(1,yn(this.x),yn(t))&&yn(this.y-e)<=n*dn(1,yn(this.y),yn(e))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y},n.strictEquals2f=function(t,e){return this.x===t&&this.y===e},n.toString=function(){return"("+this.x+", "+this.y+")"},n.lerp=function(t,e){var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},n.clampf=function(t,e){return this.x=dt(this.x,t.x,e.x),this.y=dt(this.y,t.y,e.y),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.add2f=function(t,e){return this.x+=t,this.y+=e,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.subtract2f=function(t,e){return this.x-=t,this.y-=e,this},n.multiplyScalar=function(t){return"object"==typeof t&&m(16359),this.x*=t,this.y*=t,this},n.multiply=function(t){return"object"!=typeof t&&m(16360),this.x*=t.x,this.y*=t.y,this},n.multiply2f=function(t,e){return this.x*=t,this.y*=e,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this},n.divide2f=function(t,e){return this.x/=t,this.y/=e,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.length=function(){return wn(this.x*this.x+this.y*this.y)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y},n.normalize=function(){var t=this,e=t.x,n=t.y,r=e*e+n*n;return r>0&&(r=1/wn(r),t.x*=r,t.y*=r),t},n.angle=function(t){var e=this.lengthSqr(),n=t.lengthSqr();if(0===e||0===n)return 0;var r=this.dot(t)/wn(e*n);return r=dt(r,-1,1),pn(r)},n.signAngle=function(t){var e=this.cross(t),n=this.dot(t);return zn(e,n)},n.rotate=function(t){var e=this.x,n=this.y,r=xn(t),i=_n(t);return this.x=i*e-r*n,this.y=r*e+i*n,this},n.project=function(t){var e=this.dot(t)/t.dot(t);return this.x=t.x*e,this.y=t.y*e,this},n.transformMat4=function(t){var e=this.x,n=this.y;return this.x=t.m00*e+t.m04*n+t.m12,this.y=t.m01*e+t.m05*n+t.m13,this},n.toVec3=function(){return new ge(this.x,this.y,0)},e}(s));function On(t,e){return new bn(t,e)}bn.ZERO=An(0,0),bn.ONE=An(1,1),bn.NEG_ONE=An(-1,-1),bn.UNIT_X=An(1,0),bn.UNIT_Y=An(0,1),c.fastDefine("cc.Vec2",bn,{x:0,y:0}),e.Vec2=bn,e.v2=On,G(bn,"Vec2",[{name:"sub",newName:"subtract",target:bn,targetName:"Vec2"},{name:"mul",newName:"multiply",target:bn,targetName:"Vec2"},{name:"div",newName:"divide",target:bn,targetName:"Vec2"},{name:"dist",newName:"distance",target:bn,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:bn,targetName:"Vec2"},{name:"mag",newName:"len",target:bn,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:bn,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:bn,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:bn,targetName:"Vec2"}]),G(bn.prototype,"Vec2",[{name:"mag",newName:"length",target:bn.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:bn.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:bn.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:bn.prototype,targetName:"Vec2"}]),G(ge,"Vec3",[{name:"sub",newName:"subtract",target:ge,targetName:"Vec3"},{name:"mul",newName:"multiply",target:ge,targetName:"Vec3"},{name:"div",newName:"divide",target:ge,targetName:"Vec3"},{name:"dist",newName:"distance",target:ge,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:ge,targetName:"Vec3"},{name:"mag",newName:"len",target:ge,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:ge,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:ge,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:ge,targetName:"Vec3"}]),G(ge.prototype,"Vec3",[{name:"mag",newName:"length",target:ge.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:ge.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:ge.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:ge.prototype,targetName:"Vec3"}]),G($t,"Vec4",[{name:"sub",newName:"subtract",target:$t,targetName:"Vec4"},{name:"mul",newName:"multiply",target:$t,targetName:"Vec4"},{name:"div",newName:"divide",target:$t,targetName:"Vec4"},{name:"dist",newName:"distance",target:$t,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:$t,targetName:"Vec4"},{name:"mag",newName:"len",target:$t,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:$t,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:$t,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:$t,targetName:"Vec4"}]),G($t.prototype,"Vec4",[{name:"mag",newName:"length",target:$t.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:$t.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:$t.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:$t.prototype,targetName:"Vec4"}]),G(Qe,"Quat",[{name:"mag",newName:"len",target:Qe,targetName:"Quat"},{name:"mul",newName:"multiply",target:Qe,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:Qe,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:Qe,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Qe,targetName:"Quat"}]),G(Qe.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:Qe.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Qe.prototype,targetName:"Quat"}]),G(Ae,"Color",[{name:"sub",newName:"subtract",target:Ae,targetName:"Color"},{name:"mul",newName:"multiply",target:Ae,targetName:"Color"},{name:"div",newName:"divide",target:Ae,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:Ae,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[1].toString(16);return e.Color.fromHEX(n[0],i)}}]),G(Pe,"Mat3",[{name:"sub",newName:"subtract",target:Pe,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Pe,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Pe,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:Pe,targetName:"Mat3"}]),G(Pe.prototype,"Mat3",[{name:"sub",newName:"subtract",target:Pe.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:Pe.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:Pe.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:Pe.prototype,targetName:"Mat3"}]),G(cn,"Mat4",[{name:"sub",newName:"subtract",target:cn,targetName:"Mat4"},{name:"mul",newName:"multiply",target:cn,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:cn,targetName:"Mat4"}]),G(cn.prototype,"Mat4",[{name:"sub",newName:"subtract",target:cn.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:cn.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:cn.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:cn.prototype,targetName:"Mat4"}]),function(t){t[t.VEC2=0]="VEC2",t[t.VEC3=1]="VEC3",t[t.VEC4=2]="VEC4",t[t.QUATERNION=3]="QUATERNION",t[t.MAT3=4]="MAT3",t[t.MAT4=5]="MAT4",t[t.SIZE=6]="SIZE",t[t.RECT=7]="RECT",t[t.COLOR=8]="COLOR"}(Sn||(Sn={}));var Mn=t("A",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.width=e.width,r.height=e.height):(r.width=e||0,r.height=n||0),r}u(e,t),e.lerp=function(t,e,n,r){return t.width=e.width+(n.width-e.width)*r,t.height=e.height+(n.height-e.height)*r,t},e.equals=function(t,e){return t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.width,this.height)},n.set=function(t,e){return"object"==typeof t?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=e||0),this},n.equals=function(t){return this.width===t.width&&this.height===t.height},n.lerp=function(t,e){return this.width+=(t.width-this.width)*e,this.height+=(t.height-this.height)*e,this},n.toString=function(){return"("+this.width+", "+this.height+")"},l(e,[{key:"x",get:function(){return this.width},set:function(t){this.width=t}},{key:"y",get:function(){return this.height},set:function(t){this.height=t}}]),e}(s));function Pn(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new Mn(t,e)}In=Mn,Mn.ZERO=Object.freeze(new In(0,0)),Mn.ONE=Object.freeze(new In(1,1)),c.fastDefine("cc.Size",Mn,{width:0,height:0}),e.size=Pn,e.Size=Mn;var Cn=Math.max,Un=Math.min,Fn=t("l",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.width=e.width,a.height=e.height):(a.x=e||0,a.y=n||0,a.width=r||0,a.height=i||0),a}u(e,t),e.fromMinMax=function(t,e,n){var r=Un(e.x,n.x),i=Un(e.y,n.y),a=Cn(e.x,n.x),m=Cn(e.y,n.y);return t.x=r,t.y=i,t.width=a-r,t.height=m-i,t},e.lerp=function(t,e,n,r){var i=e.x,a=e.y,m=e.width,o=e.height;return t.x=i+(n.x-i)*r,t.y=a+(n.y-a)*r,t.width=m+(n.width-m)*r,t.height=o+(n.height-o)*r,t},e.intersection=function(t,e,n){var r=e.x,i=e.y,a=e.x+e.width,m=e.y+e.height,o=n.x,u=n.y,s=n.x+n.width,c=n.y+n.height;return t.x=Cn(r,o),t.y=Cn(i,u),t.width=Un(a,s)-t.x,t.height=Un(m,c)-t.y,t},e.union=function(t,e,n){var r=e.x,i=e.y,a=e.width,m=e.height,o=n.x,u=n.y,s=n.width,c=n.height;return t.x=Un(r,o),t.y=Un(i,u),t.width=Cn(r+a,o+s)-t.x,t.height=Cn(i+m,u+c)-t.y,t},e.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.set=function(t,e,n,r){var i=this;return"object"==typeof t?(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height):(i.x=t||0,i.y=e||0,i.width=n||0,i.height=r||0),i},n.equals=function(t){var e=this;return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},n.lerp=function(t,e){var n=this,r=n.x,i=n.y,a=n.width,m=n.height;return n.x=r+(t.x-r)*e,n.y=i+(t.y-i)*e,n.width=a+(t.width-a)*e,n.height=m+(t.height-m)*e,n},n.toString=function(){var t=this;return"("+t.x+", "+t.y+", "+t.width+", "+t.height+")"},n.intersects=function(t){var e=this,n=e.x+e.width,r=e.y+e.height,i=t.x+t.width,a=t.y+t.height;return!(n<t.x||i<e.x||r<t.y||a<e.y)},n.contains=function(t){var e=this;return e.x<=t.x&&e.x+e.width>=t.x&&e.y<=t.y&&e.y+e.height>=t.y},n.containsRect=function(t){var e=this;return e.x<=t.x&&e.x+e.width>=t.x+t.width&&e.y<=t.y&&e.y+e.height>=t.y+t.height},n.transformMat4=function(t){var e=this,n=e.x,r=e.y,i=n+e.width,a=r+e.height,m=t.m00*n+t.m04*r+t.m12,o=t.m01*n+t.m05*r+t.m13,u=t.m00*i+t.m04*r+t.m12,s=t.m01*i+t.m05*r+t.m13,c=t.m00*n+t.m04*a+t.m12,h=t.m01*n+t.m05*a+t.m13,l=t.m00*i+t.m04*a+t.m12,f=t.m01*i+t.m05*a+t.m13,y=Un(m,u,c,l),d=Cn(m,u,c,l),v=Un(o,s,h,f),g=Cn(o,s,h,f);return e.x=y,e.y=v,e.width=d-y,e.height=g-v,e},n.transformMat4ToPoints=function(t,e,n,r,i){var a=this,m=a.x,o=a.y,u=m+a.width,s=o+a.height;e.x=t.m00*m+t.m04*o+t.m12,e.y=t.m01*m+t.m05*o+t.m13,i.x=t.m00*u+t.m04*o+t.m12,i.y=t.m01*u+t.m05*o+t.m13,n.x=t.m00*m+t.m04*s+t.m12,n.y=t.m01*m+t.m05*s+t.m13,r.x=t.m00*u+t.m04*s+t.m12,r.y=t.m01*u+t.m05*s+t.m13},l(e,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new bn(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new bn(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new Mn(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",get:function(){return this.width},set:function(t){this.width=t}},{key:"w",get:function(){return this.height},set:function(t){this.height=t}}]),e}(s));function Rn(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),new Fn(t,e,n,r)}c.fastDefine("cc.Rect",Fn,{x:0,y:0,width:0,height:0}),e.Rect=Fn,e.rect=Rn;var Ln=t("am",Float64Array),Bn=t("an",function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.createFloatArray=function(t){return new Ln(t)},l(e,[{key:"array",get:function(){return this._array}}]),e}(s)),Hn=Object.freeze({__proto__:null,Color:Ae,EPSILON:lt,HALF_PI:ct,MATH_FLOAT_ARRAY:Ln,Mat3:Pe,Mat4:cn,MathBase:Bn,Quat:Qe,Rect:Fn,Size:Mn,TWO_PI:ht,Vec2:bn,Vec3:ge,Vec4:$t,absMax:Pt,absMaxComponent:Mt,approx:yt,bits:y,clamp:dt,clamp01:vt,color:Se,enumerableProps:Ct,equals:ft,floatToHalf:Bt,halfToFloat:Ht,inverseLerp:Ot,lerp:gt,mat4:fn,nextPow2:St,pingPong:bt,preTransforms:nn,pseudoRandom:Nt,pseudoRandomRange:Tt,pseudoRandomRangeInt:At,quat:tn,random:_t,randomRange:zt,randomRangeInt:Et,rect:Rn,repeat:It,setRandGenerator:wt,size:Pn,toDegree:xt,toRadian:pt,v2:On,v3:pe,v4:te});t("a0",Hn);var kn=new ge,qn=new ge,Dn=new ge,Vn=new ge,Gn=new ge,Wn=new ge,Kn=new Array(3),Qn=new Array(3);function jn(t,e){return ge.dot(e.n,t)-e.d}function Yn(t,e,n){return ge.copy(t,e),ge.subtract(Gn,n.center,n.halfExtents),ge.add(Wn,n.center,n.halfExtents),t.x=t.x<Gn.x?Gn.x:t.x,t.y=t.y<Gn.y?Gn.y:t.y,t.z=t.z<Gn.z?Gn.z:t.z,t.x=t.x>Wn.x?Wn.x:t.x,t.y=t.y>Wn.y?Wn.y:t.y,t.z=t.z>Wn.z?Wn.z:t.z,t}function Xn(t,e,n){ge.set(kn,n.orientation.m00,n.orientation.m01,n.orientation.m02),ge.set(qn,n.orientation.m03,n.orientation.m04,n.orientation.m05),ge.set(Dn,n.orientation.m06,n.orientation.m07,n.orientation.m08),Kn[0]=kn,Kn[1]=qn,Kn[2]=Dn,Qn[0]=n.halfExtents.x,Qn[1]=n.halfExtents.y,Qn[2]=n.halfExtents.z,ge.subtract(Vn,e,n.center),ge.set(t,n.center.x,n.center.y,n.center.z);for(var r=0;r<3;r++){var i=ge.dot(Vn,Kn[r]);i>Qn[r]&&(i=Qn[r]),i<-Qn[r]&&(i=-Qn[r]),t.x+=i*Kn[r].x,t.y+=i*Kn[r].y,t.z+=i*Kn[r].z}return t}var Zn,Jn=Object.freeze({__proto__:null,point_plane:jn,pt_point_aabb:Yn,pt_point_line:function(t,e,n,r){ge.subtract(kn,n,r);var i=kn.clone(),a=ge.lengthSqr(i);if(0===a)ge.copy(t,n);else{ge.subtract(kn,e,n);var m=ge.dot(kn,i)/a;m<0?ge.copy(t,n):m>1?ge.copy(t,r):ge.scaleAndAdd(t,n,i,m)}},pt_point_obb:Xn,pt_point_plane:function(t,e,n){var r=jn(e,n);return ge.subtract(t,e,ge.multiplyScalar(t,n.n,r))}});!function(t){t[t.SHAPE_RAY=1]="SHAPE_RAY",t[t.SHAPE_LINE=2]="SHAPE_LINE",t[t.SHAPE_SPHERE=4]="SHAPE_SPHERE",t[t.SHAPE_AABB=8]="SHAPE_AABB",t[t.SHAPE_OBB=16]="SHAPE_OBB",t[t.SHAPE_PLANE=32]="SHAPE_PLANE",t[t.SHAPE_TRIANGLE=64]="SHAPE_TRIANGLE",t[t.SHAPE_FRUSTUM=128]="SHAPE_FRUSTUM",t[t.SHAPE_FRUSTUM_ACCURATE=256]="SHAPE_FRUSTUM_ACCURATE",t[t.SHAPE_CAPSULE=512]="SHAPE_CAPSULE",t[t.SHAPE_SPLINE=1024]="SHAPE_SPLINE"}(Zn||(Zn={}));var $n=Zn,tr=function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=Zn.SHAPE_LINE,this.s=new ge(t,e,n),this.e=new ge(r,i,a)}return t.create=function(e,n,r,i,a,m){return new t(e,n,r,i,a,m)},t.clone=function(e){return new t(e.s.x,e.s.y,e.s.z,e.e.x,e.e.y,e.e.z)},t.copy=function(t,e){return ge.copy(t.s,e.s),ge.copy(t.e,e.e),t},t.fromPoints=function(t,e,n){return ge.copy(t.s,e),ge.copy(t.e,n),t},t.set=function(t,e,n,r,i,a,m){return t.s.x=e,t.s.y=n,t.s.z=r,t.e.x=i,t.e.y=a,t.e.z=m,t},t.len=function(t){return ge.distance(t.s,t.e)},t.prototype.length=function(){return ge.distance(this.s,this.e)},l(t,[{key:"type",get:function(){return this._type}}]),t}(),er=t("R",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this._type=Zn.SHAPE_RAY,this.o=new ge(t,e,n),this.d=new ge(r,i,a)}return t.create=function(e,n,r,i,a,m){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===m&&(m=1),new t(e,n,r,i,a,m)},t.clone=function(e){return new t(e.o.x,e.o.y,e.o.z,e.d.x,e.d.y,e.d.z)},t.copy=function(t,e){return ge.copy(t.o,e.o),ge.copy(t.d,e.d),t},t.fromPoints=function(t,e,n){return ge.copy(t.o,e),ge.normalize(t.d,ge.subtract(t.d,n,e)),t},t.set=function(t,e,n,r,i,a,m){return t.o.x=e,t.o.y=n,t.o.z=r,t.d.x=i,t.d.y=a,t.d.z=m,t},t.prototype.computeHit=function(t,e){ge.normalize(t,this.d),ge.scaleAndAdd(t,this.o,t,e)},l(t,[{key:"type",get:function(){return this._type}}]),t}()),nr=new ge,rr=new ge,ir=new ge,ar=new ge;function mr(t){return Math.max(Math.max(t.x,t.y),t.z)}var or,ur,sr,cr,hr,lr=t("_",function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this._type=Zn.SHAPE_SPHERE,this._center=new ge(t,e,n),this._radius=r}t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.radius)},t.copy=function(t,e){return ge.copy(t.center,e.center),t.radius=e.radius,t},t.fromPoints=function(t,e,n){return ge.multiplyScalar(t.center,ge.add(nr,e,n),.5),t.radius=.5*ge.subtract(nr,n,e).length(),t},t.set=function(t,e,n,r,i){return t.center.x=e,t.center.y=n,t.center.z=r,t.radius=i,t};var e=t.prototype;return e.destroy=function(){},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.getBoundary=function(t,e){ge.set(t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),ge.set(e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},e.transform=function(t,e,n,r,i){ge.transformMat4(i.center,this.center,t),i.radius=this.radius*mr(r)},e.translateAndRotate=function(t,e,n){ge.transformMat4(n.center,this.center,t)},e.setScale=function(t,e){e.radius=this.radius*mr(t)},e.mergePoint=function(t){this.radius<0&&(this.center.set(t),this.radius=0),ge.subtract(rr,t,this.center);var e=rr.length();if(e>this.radius){var n=.5*(e-this.radius);this.radius+=n,ge.multiplyScalar(rr,rr,n/e),ge.add(this.center,this.center,rr)}},e.mergePoints=function(t){var e=t.length;if(!(e<1)){this.radius=-1;for(var n=0;n<e;n++)this.mergePoint(t[n])}},e.mergeAABB=function(t){t.getBoundary(ir,ar),this.mergePoint(ir),this.mergePoint(ar)},l(t,[{key:"center",get:function(){return this._center},set:function(t){this._center=t}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t}},{key:"type",get:function(){return this._type}}]),t}()),fr=ge.squaredDistance,yr=ge.subtract,dr=ge.dot,vr=ge.set,gr=ge.cross,pr=ge.multiplyScalar,xr=ge.copy,_r=ge.add,wr=ge.scaleAndAdd,zr=Math.max,Er=Math.min,Nr=Math.abs,Tr=function(t,e){var n=dr(t.d,e.n);if(Nr(n)<Number.EPSILON)return 0;var r=-jn(t.o,e)/n;return r<0?0:r},Ar=(or=pe(),ur=pe(),sr=pe(),cr=pe(),hr=pe(),function(t,e,n){yr(or,e.b,e.a),yr(ur,e.c,e.a),gr(sr,t.d,ur);var r=dr(or,sr);if(r<Number.EPSILON&&(!n||r>-Number.EPSILON))return 0;var i=1/r;yr(cr,t.o,e.a);var a=dr(cr,sr)*i;if(a<0||a>1)return 0;gr(hr,cr,or);var m=dr(t.d,hr)*i;if(m<0||a+m>1)return 0;var o=dr(ur,hr)*i;return o<0?0:o}),Sr=function(){var t=pe();return function(e,n){var r=n.radius,i=n.center,a=e.o,m=e.d,o=r*r;yr(t,i,a);var u=t.lengthSqr(),s=dr(t,m),c=o-(u-s*s);if(c<0)return 0;var h=Math.sqrt(c),l=u<o?s+h:s-h;return l<0?0:l}}(),Ir=function(){var t=pe(),e=pe();return function(n,r){return yr(t,r.center,r.halfExtents),_r(e,r.center,r.halfExtents),br(n,t,e)}}();function br(t,e,n){var r=t.o,i=t.d,a=1/i.x,m=1/i.y,o=1/i.z,u=(e.x-r.x)*a,s=(n.x-r.x)*a,c=(e.y-r.y)*m,h=(n.y-r.y)*m,l=(e.z-r.z)*o,f=(n.z-r.z)*o,y=zr(zr(Er(u,s),Er(c,h)),Er(l,f)),d=Er(Er(zr(u,s),zr(c,h)),zr(l,f));return d<0||y>d?0:y>0?y:d}var Or=function(){var t=pe(),e=pe(),n=pe(),r=pe(),i=pe(),a=pe(),m=pe(),o=new Array(3),u=new Array(3),s=new Array(3),c=new Array(6);return function(h,l){var f=l.halfExtents,y=l.orientation;o[0]=f.x,o[1]=f.y,o[2]=f.z,t=l.center,e=h.o,n=h.d,vr(r,y.m00,y.m01,y.m02),vr(i,y.m03,y.m04,y.m05),vr(a,y.m06,y.m07,y.m08),yr(m,t,e),u[0]=dr(r,n),u[1]=dr(i,n),u[2]=dr(a,n),s[0]=dr(r,m),s[1]=dr(i,m),s[2]=dr(a,m);for(var d=0;d<3;++d){if(0===u[d]){if(-s[d]-o[d]>0||-s[d]+o[d]<0)return 0;u[d]=1e-7}c[2*d+0]=(s[d]+o[d])/u[d],c[2*d+1]=(s[d]-o[d])/u[d]}var v=zr(zr(Er(c[0],c[1]),Er(c[2],c[3])),Er(c[4],c[5])),g=Er(Er(zr(c[0],c[1]),zr(c[2],c[3])),zr(c[4],c[5]));return g<0||v>g?0:v>0?v:g}}(),Mr=function(){var t=pe(),e=pe(),n=pe(),r=pe(),i=pe(),a=pe(),m=pe(),o=new lr;return function(u,s){var c=s.ellipseCenter0,h=s.ellipseCenter1,l=yr(e,h,c);if(l.length()<lt)return o.radius=s.radius,o.center.set(s.ellipseCenter0),di.raySphere(u,o);var f=u.o,y=yr(n,f,c),d=ge.normalize(t,u.d),v=gr(r,d,l),g=v.lengthSqr();if(0===g){o.radius=s.radius;var p=yr(i,h,f);return y.lengthSqr()<p.lengthSqr()?o.center.set(c):o.center.set(h),di.raySphere(u,o)}var x=gr(i,y,l),_=l.lengthSqr(),w=2*dr(v,x),z=s.radius*s.radius,E=w*w-4*g*(x.lengthSqr()-z*_);if(E<0)return 0;var N=(-w-Math.sqrt(E))/(2*g);if(N<0){o.radius=s.radius;var T=yr(a,h,f);return y.lengthSqr()<T.lengthSqr()?o.center.set(s.ellipseCenter0):o.center.set(s.ellipseCenter1),di.raySphere(u,o)}var A=wr(a,u.o,d,N),S=yr(m,A,c),I=dr(S,l)/_;return I>=0&&I<=1?N:I<0?(o.radius=s.radius,o.center.set(s.ellipseCenter0),di.raySphere(u,o)):I>1?(o.radius=s.radius,o.center.set(s.ellipseCenter1),di.raySphere(u,o)):0}}(),Pr=function(){var t=pe();return function(e,n){yr(t,e.e,e.s);var r=-jn(e.s,n)/dr(t,n.n);return r<0||r>1?0:r}}(),Cr=function(){var t=pe(),e=pe(),n=pe(),r=pe(),i=pe(),a=pe();return function(m,o,u){yr(t,o.b,o.a),yr(e,o.c,o.a),yr(n,m.s,m.e),gr(i,t,e);var s=dr(n,i);if(s<=0)return 0;yr(r,m.s,o.a);var c=dr(r,i);if(c<0||c>s)return 0;gr(a,n,r);var h=dr(e,a);if(h<0||h>s)return 0;var l=-dr(t,a);if(l<0||h+l>s)return 0;if(u){var f=1/s,y=1-(h*=f)-(l*=f);vr(u,o.a.x*y+o.b.x*h+o.c.x*l,o.a.y*y+o.b.y*h+o.c.y*l,o.a.z*y+o.b.z*h+o.c.z*l)}return 1}}(),Ur=new er;function Fr(t,e){Ur.o.set(t.s),yr(Ur.d,t.e,t.s),Ur.d.normalize();var n=Ir(Ur,e);return n<=t.length()?n:0}function Rr(t,e){Ur.o.set(t.s),yr(Ur.d,t.e,t.s),Ur.d.normalize();var n=Or(Ur,e);return n<=t.length()?n:0}function Lr(t,e){Ur.o.set(t.s),yr(Ur.d,t.e,t.s),Ur.d.normalize();var n=Sr(Ur,e);return n<=t.length()?n:0}var Br,Hr,kr,qr,Dr=(Br=pe(),Hr=pe(),kr=pe(),qr=pe(),function(t,e){return yr(Br,t.center,t.halfExtents),_r(Hr,t.center,t.halfExtents),yr(kr,e.center,e.halfExtents),_r(qr,e.center,e.halfExtents),Br.x<=qr.x&&Hr.x>=kr.x&&Br.y<=qr.y&&Hr.y>=kr.y&&Br.z<=qr.z&&Hr.z>=kr.z});function Vr(t,e,n){vr(n[0],t.x,e.y,e.z),vr(n[1],t.x,e.y,t.z),vr(n[2],t.x,t.y,e.z),vr(n[3],t.x,t.y,t.z),vr(n[4],e.x,e.y,e.z),vr(n[5],e.x,e.y,t.z),vr(n[6],e.x,t.y,e.z),vr(n[7],e.x,t.y,t.z)}function Gr(t,e,n,r,i,a){vr(a[0],t.x+n.x*e.x+r.x*e.y+i.x*e.z,t.y+n.y*e.x+r.y*e.y+i.y*e.z,t.z+n.z*e.x+r.z*e.y+i.z*e.z),vr(a[1],t.x-n.x*e.x+r.x*e.y+i.x*e.z,t.y-n.y*e.x+r.y*e.y+i.y*e.z,t.z-n.z*e.x+r.z*e.y+i.z*e.z),vr(a[2],t.x+n.x*e.x-r.x*e.y+i.x*e.z,t.y+n.y*e.x-r.y*e.y+i.y*e.z,t.z+n.z*e.x-r.z*e.y+i.z*e.z),vr(a[3],t.x+n.x*e.x+r.x*e.y-i.x*e.z,t.y+n.y*e.x+r.y*e.y-i.y*e.z,t.z+n.z*e.x+r.z*e.y-i.z*e.z),vr(a[4],t.x-n.x*e.x-r.x*e.y-i.x*e.z,t.y-n.y*e.x-r.y*e.y-i.y*e.z,t.z-n.z*e.x-r.z*e.y-i.z*e.z),vr(a[5],t.x+n.x*e.x-r.x*e.y-i.x*e.z,t.y+n.y*e.x-r.y*e.y-i.y*e.z,t.z+n.z*e.x-r.z*e.y-i.z*e.z),vr(a[6],t.x-n.x*e.x+r.x*e.y-i.x*e.z,t.y-n.y*e.x+r.y*e.y-i.y*e.z,t.z-n.z*e.x+r.z*e.y-i.z*e.z),vr(a[7],t.x-n.x*e.x-r.x*e.y+i.x*e.z,t.y-n.y*e.x-r.y*e.y+i.y*e.z,t.z-n.z*e.x-r.z*e.y+i.z*e.z)}function Wr(t,e){for(var n=dr(e,t[0]),r=n,i=1;i<8;++i){var a=dr(e,t[i]);n=a<n?a:n,r=a>r?a:r}return[n,r]}var Kr,Qr,jr,Yr,Xr,Zr=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=pe();for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=pe(),r[i]=pe();var a=pe(),m=pe();return function(e,i){var o=i.orientation;vr(t[0],1,0,0),vr(t[1],0,1,0),vr(t[2],0,0,1),vr(t[3],o.m00,o.m01,o.m02),vr(t[4],o.m03,o.m04,o.m05),vr(t[5],o.m06,o.m07,o.m08);for(var u=0;u<3;++u)gr(t[6+3*u],t[u],t[3]),gr(t[7+3*u],t[u],t[4]),gr(t[7+3*u],t[u],t[5]);yr(a,e.center,e.halfExtents),_r(m,e.center,e.halfExtents),Vr(a,m,n),Gr(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var s=0;s<15;++s){var c=Wr(n,t[s]),h=Wr(r,t[s]);if(h[0]>c[1]||c[0]>h[1])return 0}return 1}}(),Jr=function(t,e){var n=t.halfExtents,r=e.n,i=n.x*Nr(r.x)+n.y*Nr(r.y)+n.z*Nr(r.z),a=dr(r,t.center);return a+i<e.d?-1:a-i>e.d?0:1},$r=function(t,e){for(var n=e.planes,r=0;r<n.length;r++)if(-1===Jr(t,n[r]))return 0;return 1},ti=function(){for(var t=new Array(8),e=0,n=0,r=0;r<t.length;r++)t[r]=pe();return function(r,i){for(var a=i.vertices,m=r.halfExtents,o=0,u=!1,s=0;s<i.planes.length;s++){if(-1===(o=Jr(r,i.planes[s])))return 0;1===o&&(u=!0)}if(!u)return 1;for(var c=0;c<a.length;c++)yr(t[c],a[c],r.center);e=0,n=0;for(var h=0;h<a.length;h++)t[h].x>m.x?e++:t[h].x<-m.x&&n++;if(e===a.length||n===a.length)return 0;e=0,n=0;for(var l=0;l<a.length;l++)t[l].y>m.y?e++:t[l].y<-m.y&&n++;if(e===a.length||n===a.length)return 0;e=0,n=0;for(var f=0;f<a.length;f++)t[f].z>m.z?e++:t[f].z<-m.z&&n++;return e===a.length||n===a.length?0:1}}(),ei=(Kr=pe(),Qr=new Pe,function(t,e){return yr(Kr,e,t.center),ge.transformMat3(Kr,Kr,Pe.transpose(Qr,t.orientation)),n=Kr,r=t.halfExtents,Nr(n.x)<r.x&&Nr(n.y)<r.y&&Nr(n.z)<r.z;var n,r}),ni=(jr=function(t,e,n,r){return Nr(t.x*e+t.y*n+t.z*r)},function(t,e){var n=t.orientation,r=t.halfExtents,i=e.n,a=e.d,m=r.x*jr(i,n.m00,n.m01,n.m02)+r.y*jr(i,n.m03,n.m04,n.m05)+r.z*jr(i,n.m06,n.m07,n.m08),o=dr(i,t.center);return o+m<a?-1:o-m>a?0:1}),ri=function(t,e){for(var n=e.planes,r=0;r<n.length;r++)if(-1===ni(t,n[r]))return 0;return 1},ii=function(){for(var t=new Array(8),e=0,n=0,r=0,i=0;i<t.length;i++)t[i]=pe();var a=function(t,e,n,r){return t.x*e+t.y*n+t.z*r};return function(i,m){for(var o=i.orientation,u=i.halfExtents,s=m.vertices,c=m.planes,h=0,l=!1,f=0;f<c.length;f++){if(-1===(h=ni(i,c[f])))return 0;1===h&&(l=!0)}if(!l)return 1;for(var y=0;y<s.length;y++)yr(t[y],s[y],i.center);n=0,r=0;for(var d=0;d<s.length;d++)(e=a(t[d],o.m00,o.m01,o.m02))>u.x?n++:e<-u.x&&r++;if(n===s.length||r===s.length)return 0;n=0,r=0;for(var v=0;v<s.length;v++)(e=a(t[v],o.m03,o.m04,o.m05))>u.y?n++:e<-u.y&&r++;if(n===s.length||r===s.length)return 0;n=0,r=0;for(var g=0;g<s.length;g++)(e=a(t[g],o.m06,o.m07,o.m08))>u.z?n++:e<-u.z&&r++;return n===s.length||r===s.length?0:1}}(),ai=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=pe();for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=pe(),r[i]=pe();return function(e,i){var a=e.orientation,m=i.orientation;vr(t[0],a.m00,a.m01,a.m02),vr(t[1],a.m03,a.m04,a.m05),vr(t[2],a.m06,a.m07,a.m08),vr(t[3],m.m00,m.m01,m.m02),vr(t[4],m.m03,m.m04,m.m05),vr(t[5],m.m06,m.m07,m.m08);for(var o=0;o<3;++o)gr(t[6+3*o],t[o],t[3]),gr(t[7+3*o],t[o],t[4]),gr(t[8+3*o],t[o],t[5]);Gr(e.center,e.halfExtents,t[0],t[1],t[2],n),Gr(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var u=0;u<15;++u){var s=Wr(n,t[u]),c=Wr(r,t[u]);if(c[0]>s[1]||s[0]>c[1])return 0}return 1}}(),mi=function(){for(var t=new lr,e=pe(),n=pe(),r=pe(),i=new Array(8),a=0;a<8;a++)i[a]=pe();for(var m=new Array(8),o=0;o<8;o++)m[o]=pe();return function(a,o){var u=o.ellipseCenter0,s=o.ellipseCenter1,c=o.radius;if(0===fr(u,s))return t.radius=o.radius,t.center.set(u),di.sphereOBB(t,a);var h=a.orientation;e.x=h.m00,e.y=h.m01,e.z=h.m02,n.x=h.m03,n.y=h.m04,n.z=h.m05,r.x=h.m06,r.y=h.m07,r.z=h.m08,Gr(a.center,a.halfExtents,e,n,r,i);var l=m,f=xr(l[0],e),y=xr(l[1],n),d=xr(l[2],r);yr(l[3],o.center,a.center).normalize();var v=yr(l[4],u,s);v.normalize(),gr(l[5],f,v),gr(l[6],y,v),gr(l[7],d,v);for(var g=0;g<8;++g){var p=Wr(i,l[g]),x=dr(l[g],u),_=dr(l[g],s),w=zr(x,_)+c;if(Er(x,_)-c>p[1]||p[0]>w)return 0}return 1}}(),oi=function(t,e){var n=dr(e.n,t.center),r=t.radius*e.n.length();return n+r<e.d?-1:n-r>e.d?0:1},ui=function(t,e){for(var n=e.planes,r=0;r<n.length;r++)if(-1===oi(t,n[r]))return 0;return 1},si=(Yr=pe(),Xr=[1,-1,1,-1,1,-1],function(t,e){for(var n=0;n<6;n++){var r=e.planes[n],i=t.radius,a=t.center,m=r.n,o=r.d,u=dr(m,a);if(u+i<o)return 0;if(!(u-i>o)){_r(Yr,a,pr(Yr,m,i));for(var s=0;s<6;s++)if(s!==n&&s!==n+Xr[n]){var c=e.planes[s];if(dr(c.n,Yr)<c.d)return 0}}}return 1}),ci=function(t,e){var n=t.radius+e.radius;return fr(t.center,e.center)<n*n},hi=function(){var t=pe();return function(e,n){var r=e.radius;return Yn(t,e.center,n),fr(e.center,t)<r*r}}(),li=function(){var t=pe();return function(e,n){var r=e.radius;return Xn(t,e.center,n),fr(e.center,t)<r*r}}(),fi=function(){var t=pe(),e=pe();return function(n,r){var i=r.ellipseCenter0,a=r.ellipseCenter1,m=n.center,o=n.radius+r.radius,u=o*o,s=fr(i,a);if(0===s)return fr(m,r.center)<u;yr(t,m,i),yr(e,a,i);var c=dr(t,e)/s;return c<0?fr(m,i)<u:c>1?fr(m,a)<u:(wr(t,i,e,c),fr(m,t)<u)}}(),yi=function(){var t=pe(),e=pe(),n=pe(),r=pe(),i=pe(),a=pe();return function(m,o){var u,s,c=m.ellipseCenter0,h=m.ellipseCenter1,l=o.ellipseCenter1,f=o.ellipseCenter0,y=yr(t,h,c),d=yr(e,l,f),v=yr(n,c,f),g=dr(y,y),p=dr(y,d),x=dr(d,d),_=dr(y,v),w=dr(d,v),z=g*x-p*p,E=z,N=z;z<lt?(u=0,E=1,s=w,N=x):(s=g*w-p*_,(u=p*w-x*_)<0?(u=0,s=w,N=x):u>E&&(u=E,s=w+p,N=x)),s<0?(s=0,-_<0?u=0:-_>g?u=E:(u=-_,E=g)):s>N&&(s=N,-_+p<0?u=0:-_+p>g?u=E:(u=-_+p,E=g));var T=Nr(u)<lt?0:u/E,A=Nr(s)<lt?0:s/N,S=r;S.set(v),S.add(pr(i,y,T)),S.subtract(pr(a,d,A));var I=m.radius+o.radius;return S.lengthSqr()<I*I}}(),di=t("o",{raySphere:Sr,rayAABB:Ir,rayOBB:Or,rayPlane:Tr,rayTriangle:Ar,rayCapsule:Mr,raySubMesh:null,rayMesh:null,rayModel:null,lineSphere:Lr,lineAABB:Fr,lineOBB:Rr,linePlane:Pr,lineTriangle:Cr,sphereWithSphere:ci,sphereAABB:hi,sphereOBB:li,spherePlane:oi,sphereFrustum:ui,sphereFrustumAccurate:si,sphereCapsule:fi,aabbWithAABB:Dr,aabbWithOBB:Zr,aabbPlane:Jr,aabbFrustum:$r,aabbFrustumAccurate:ti,obbWithOBB:ai,obbPlane:ni,obbFrustum:ri,obbFrustumAccurate:ii,obbPoint:ei,obbCapsule:mi,aabbFrustumCompletelyInside:function(t,e){for(var n=e.planes,r=0;r<n.length;r++)if(0!==Jr(t,n[r]))return 0;return 1},capsuleWithCapsule:yi,resolve:function(t,e,n){void 0===n&&(n=null);var r=t._type,i=e._type,a=this[r|i];return r<i?a(t,e,n):a(e,t,n)}});di[Zn.SHAPE_RAY|Zn.SHAPE_SPHERE]=Sr,di[Zn.SHAPE_RAY|Zn.SHAPE_AABB]=Ir,di[Zn.SHAPE_RAY|Zn.SHAPE_OBB]=Or,di[Zn.SHAPE_RAY|Zn.SHAPE_PLANE]=Tr,di[Zn.SHAPE_RAY|Zn.SHAPE_TRIANGLE]=Ar,di[Zn.SHAPE_RAY|Zn.SHAPE_CAPSULE]=Mr,di[Zn.SHAPE_LINE|Zn.SHAPE_SPHERE]=Lr,di[Zn.SHAPE_LINE|Zn.SHAPE_AABB]=Fr,di[Zn.SHAPE_LINE|Zn.SHAPE_OBB]=Rr,di[Zn.SHAPE_LINE|Zn.SHAPE_PLANE]=Pr,di[Zn.SHAPE_LINE|Zn.SHAPE_TRIANGLE]=Cr,di[Zn.SHAPE_SPHERE]=ci,di[Zn.SHAPE_SPHERE|Zn.SHAPE_AABB]=hi,di[Zn.SHAPE_SPHERE|Zn.SHAPE_OBB]=li,di[Zn.SHAPE_SPHERE|Zn.SHAPE_PLANE]=oi,di[Zn.SHAPE_SPHERE|Zn.SHAPE_FRUSTUM]=ui,di[Zn.SHAPE_SPHERE|Zn.SHAPE_FRUSTUM_ACCURATE]=si,di[Zn.SHAPE_SPHERE|Zn.SHAPE_CAPSULE]=fi,di[Zn.SHAPE_AABB]=Dr,di[Zn.SHAPE_AABB|Zn.SHAPE_OBB]=Zr,di[Zn.SHAPE_AABB|Zn.SHAPE_PLANE]=Jr,di[Zn.SHAPE_AABB|Zn.SHAPE_FRUSTUM]=$r,di[Zn.SHAPE_AABB|Zn.SHAPE_FRUSTUM_ACCURATE]=ti,di[Zn.SHAPE_OBB]=ai,di[Zn.SHAPE_OBB|Zn.SHAPE_PLANE]=ni,di[Zn.SHAPE_OBB|Zn.SHAPE_FRUSTUM]=ri,di[Zn.SHAPE_OBB|Zn.SHAPE_FRUSTUM_ACCURATE]=ii,di[Zn.SHAPE_OBB|Zn.SHAPE_CAPSULE]=mi,di[Zn.SHAPE_CAPSULE]=yi,G(tr.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),W(di,"intersect",[{name:"line_quad"}]);var vi=new ge(0,0,0),gi=new ge(0,0,0),pi=fn(),xi=te(),_i=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),this._type=Zn.SHAPE_PLANE,this.n=new ge(t,e,n),this.d=r}return t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.n.x,e.n.y,e.n.z,e.d)},t.copy=function(t,e){return ge.copy(t.n,e.n),t.d=e.d,t},t.fromPoints=function(t,e,n,r){return ge.subtract(vi,n,e),ge.subtract(gi,r,e),ge.normalize(t.n,ge.cross(t.n,vi,gi)),t.d=ge.dot(t.n,e),t},t.set=function(t,e,n,r,i){return t.n.x=e,t.n.y=n,t.n.z=r,t.d=i,t},t.fromNormalAndPoint=function(t,e,n){return ge.copy(t.n,e),t.d=ge.dot(e,n),t},t.normalize=function(t,e){var n=e.n.length();return ge.normalize(t.n,e.n),n>0&&(t.d=e.d/n),t},t.prototype.transform=function(t){cn.invert(pi,t),cn.transpose(pi,pi),$t.set(xi,this.n.x,this.n.y,this.n.z,-this.d),$t.transformMat4(xi,xi,pi),ge.set(this.n,xi.x,xi.y,xi.z),this.d=-xi.w},l(t,[{key:"type",get:function(){return this._type}},{key:"x",get:function(){return this.n.x},set:function(t){this.n.x=t}},{key:"y",get:function(){return this.n.y},set:function(t){this.n.y=t}},{key:"z",get:function(){return this.n.z},set:function(t){this.n.z=t}},{key:"w",get:function(){return this.d},set:function(t){this.d=t}}]),t}(),wi=t("T",function(){function t(t,e,n,r,i,a,m,o,u){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===m&&(m=0),void 0===o&&(o=1),void 0===u&&(u=0),this._type=Zn.SHAPE_TRIANGLE,this.a=new ge(t,e,n),this.b=new ge(r,i,a),this.c=new ge(m,o,u)}return t.create=function(e,n,r,i,a,m,o,u,s){return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===m&&(m=0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=1),new t(e,n,r,i,a,m,o,u,s)},t.clone=function(e){return new t(e.a.x,e.a.y,e.a.z,e.b.x,e.b.y,e.b.z,e.c.x,e.c.y,e.c.z)},t.copy=function(t,e){return ge.copy(t.a,e.a),ge.copy(t.b,e.b),ge.copy(t.c,e.c),t},t.fromPoints=function(t,e,n,r){return ge.copy(t.a,e),ge.copy(t.b,n),ge.copy(t.c,r),t},t.set=function(t,e,n,r,i,a,m,o,u,s){return t.a.x=e,t.a.y=n,t.a.z=r,t.b.x=i,t.b.y=a,t.b.z=m,t.c.x=o,t.c.y=u,t.c.z=s,t},l(t,[{key:"type",get:function(){return this._type}}]),t}());nt({replaceProperty:{since:"3.6.0",removed:!1},removeProperty:{since:"3.6.0",removed:!1},markAsWarning:{since:"3.6.0",removed:!1},setDefaultLogTimes:{since:"3.6.0",removed:!1}});var zi=new ge;function Ei(t,e,n,r){r||(r=new ge),t.convertToUINode(e,n,r);var i=n.position;return r.add(i),r}function Ni(t,n,r){return r||(r=new ge),t.worldToScreen(n,r),r.x/=e.view.getScaleX(),r.y/=e.view.getScaleY(),r}var Ti=t("at",{WorldNode3DToLocalNodeUI:Ei,WorldNode3DToWorldNodeUI:Ni});e.pipelineUtils=Ti,G(e.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.Camera.prototype",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[3]||zi;return r.convertToUINode(e[1],e[2],i),i.add(e[2].position),e[3]||i.clone()}}]);var Ai,Si={auto:d.AUTO,landscape:d.LANDSCAPE,portrait:d.PORTRAIT};!function(t){t[t.Unknown=0]="Unknown",t[t.SubFrame=1]="SubFrame",t[t.BrowserWindow=2]="BrowserWindow",t[t.Fullscreen=3]="Fullscreen"}(Ai||(Ai={}));var Ii=function(t){u(r,t);var n=r.prototype;function r(){var e,n,r,i,a,m;(e=t.call(this)||this).isFrameRotated=!1,e.handleResizeEvent=!0,e._gameFrame=void 0,e._gameContainer=void 0,e._gameCanvas=void 0,e._isProportionalToFrame=!1,e._cachedFrameStyle={width:"0px",height:"0px"},e._cachedContainerStyle={width:"0px",height:"0px"},e._cbToUpdateFrameBuffer=void 0,e._supportFullScreen=!1,e._touchEventName=void 0,e._onFullscreenChange=void 0,e._onFullscreenError=void 0,e._orientationChangeTimeoutId=-1,e._cachedFrameSize=new Mn(0,0),e._exactFitScreen=!1,e._isHeadlessMode=!1,e._fn={},e._fnGroup=[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement","fullscreenerror"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement","fullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement","msfullscreenerror"]],e._resolutionScale=1,e._orientation=d.AUTO,e._orientationDevice=d.AUTO,e._gameFrame=document.getElementById("GameDiv"),e._gameContainer=document.getElementById("Cocos3dGameContainer"),e._gameCanvas=document.getElementById("GameCanvas"),e._gameFrame||(e._gameFrame=document.createElement("div"),e._gameFrame.setAttribute("id","GameDiv"),null==(n=e._gameCanvas)||null==(r=n.parentNode)||r.insertBefore(e._gameFrame,e._gameCanvas),e._gameFrame.appendChild(e._gameCanvas)),e._gameContainer||(e._gameContainer=document.createElement("div"),e._gameContainer.setAttribute("id","Cocos3dGameContainer"),null==(i=e._gameCanvas)||null==(a=i.parentNode)||a.insertBefore(e._gameContainer,e._gameCanvas),e._gameContainer.appendChild(e._gameCanvas));for(var o=e._fnGroup,u=0;u<o.length;u++)if(m=o[u],void 0!==document[m[1]]){for(var s=0;s<m.length;s++)e._fn[o[0][s]]=m[s];break}return e._supportFullScreen=void 0!==e._fn.requestFullscreen,e._touchEventName="ontouchstart"in window?"touchend":"mousedown",e._registerEvent(),e}return n._updateFrame=function(){this._updateFrameState(),this._resizeFrame()},n.init=function(t,e){this._cbToUpdateFrameBuffer=e,this.orientation=Si[t.configOrientation],this._exactFitScreen=t.exactFitScreen,this._isHeadlessMode=t.isHeadlessMode,this._resizeFrame()},n.requestFullScreen=function(){var t=this;return new Promise((function(e,n){t.isFullScreen?e():(t._cachedFrameSize=t.windowSize,t._doRequestFullScreen().then((function(){e()})).catch((function(){var r=t._getFullscreenTarget();r?r.addEventListener(t._touchEventName,(function(){t._doRequestFullScreen().then((function(){e()})).catch(n)}),{once:!0,capture:!0}):n(new Error("Cannot access fullscreen target"))})))}))},n.exitFullScreen=function(){var t=this;return new Promise((function(e,n){var r=document[t._fn.exitFullscreen]();window.Promise&&r instanceof Promise?r.then((function(){t.windowSize=t._cachedFrameSize,e()})).catch(n):(t.windowSize=t._cachedFrameSize,e())}))},n._registerEvent=function(){var t=this;document.addEventListener(this._fn.fullscreenerror,(function(){null==t._onFullscreenError||t._onFullscreenError()})),window.addEventListener("resize",(function(){t._updateFrame()}));var e,n=function(e){e!==t._orientationDevice&&(t._orientationDevice=e,t._updateFrame(),t.emit("orientation-change",e))},r=function(){var e=d.PORTRAIT;switch(window.orientation){case 0:e=d.PORTRAIT;break;case 90:e=d.LANDSCAPE_RIGHT;break;case-90:e=d.LANDSCAPE_LEFT;break;case 180:e=d.PORTRAIT_UPSIDE_DOWN;break;default:e=t._orientationDevice}return e},i=function(){-1!==t._orientationChangeTimeoutId&&clearTimeout(t._orientationChangeTimeoutId),t._orientationChangeTimeoutId=setTimeout((function(){e()}),200)};if("function"==typeof window.matchMedia){!function e(){var n=window.devicePixelRatio,r=window.matchMedia("(resolution: "+n+"dppx)");r.addEventListener?r.addEventListener("change",(function(){t.emit("window-resize",t.windowSize.width,t.windowSize.height),e()}),{once:!0}):r.addListener&&r.addListener((function(){t.emit("window-resize",t.windowSize.width,t.windowSize.height)}))}();var a=window.matchMedia("(orientation: portrait)"),m=window.matchMedia("(orientation: landscape)"),o=screen.orientation;e=function(){var e=t._orientationDevice;a.matches?(e=d.PORTRAIT,o&&(e="portrait-primary"===screen.orientation.type?d.PORTRAIT:d.PORTRAIT_UPSIDE_DOWN)):m.matches&&(e=d.LANDSCAPE,o&&(e="landscape-primary"===screen.orientation.type?d.LANDSCAPE_LEFT:d.LANDSCAPE_RIGHT)),n(e)},a.addEventListener?(a.addEventListener("change",i),m.addEventListener("change",i)):a.addListener&&(a.addListener(i),m.addListener(i))}else e=function(){var t=r();n(t)},window.addEventListener("orientationchange",i);document.addEventListener(this._fn.fullscreenchange,(function(){null==t._onFullscreenChange||t._onFullscreenChange(),t.emit("fullscreen-change",t.windowSize.width,t.windowSize.height)}))},n._convertToSizeInCssPixels=function(t){var e=t.clone(),n=this.devicePixelRatio;return e.width/=n,e.height/=n,e},n._resizeFrame=function(t){if(this._gameFrame){if(this._gameFrame.style.display="flex",this._gameFrame.style["justify-content"]="center",this._gameFrame.style["align-items"]="center",this._windowType===Ai.SubFrame){if(!t)return void this._updateContainer();this._gameFrame.style.width=t.width+"px",this._gameFrame.style.height=t.height+"px"}else{var e=window.innerWidth,n=window.innerHeight,r=document.body.scrollHeight-n;v.os===g.ANDROID&&n<r&&(n+=r),this.isFrameRotated?(this._gameFrame.style["-webkit-transform"]="rotate(90deg)",this._gameFrame.style.transform="rotate(90deg)",this._gameFrame.style["-webkit-transform-origin"]="0px 0px 0px",this._gameFrame.style.transformOrigin="0px 0px 0px",this._gameFrame.style.margin="0 0 0 "+e+"px",this._gameFrame.style.width=n+"px",this._gameFrame.style.height=e+"px"):(this._gameFrame.style["-webkit-transform"]="rotate(0deg)",this._gameFrame.style.transform="rotate(0deg)",this._gameFrame.style.margin="0px auto",this._gameFrame.style.width=e+"px",this._gameFrame.style.height=n+"px")}this._updateContainer()}},n._getFullscreenTarget=function(){var t=this._windowType;return t===Ai.Fullscreen?document[this._fn.fullscreenElement]:t===Ai.SubFrame?this._gameFrame:document.body},n._doRequestFullScreen=function(){var t=this;return new Promise((function(e,n){if(t._supportFullScreen){var r=t._getFullscreenTarget();if(r){t._onFullscreenChange=void 0,t._onFullscreenError=void 0;var i=r[t._fn.requestFullscreen]();window.Promise&&i instanceof Promise?i.then(e).catch(n):(t._onFullscreenChange=e,t._onFullscreenError=n)}else n(new Error("Cannot access fullscreen target"))}else n(new Error("fullscreen is not supported"))}))},n._updateFrameState=function(){var t=this.orientation,e=window.innerWidth>window.innerHeight;this.isFrameRotated=v.isMobile&&(e&&t===d.PORTRAIT||!e&&t===d.LANDSCAPE)},n._updateContainer=function(){if(this._gameContainer){if(this.isProportionalToFrame){if(!this._gameFrame)return void m(9201);var t,n,r=e.view.getDesignResolutionSize(),i=this._gameFrame,a=i.clientWidth,o=i.clientHeight,u=r.width,s=r.height,c=a/u,h=o/s,l=this._gameContainer.style;c<h?(t=a,n=s*c):(t=u*h,n=o),l.width=t+"px",l.height=n+"px"}else{var f=this._gameContainer.style;f.width="100%",f.height="100%"}!this._gameFrame||this._cachedFrameStyle.width===this._gameFrame.style.width&&this._cachedFrameStyle.height===this._gameFrame.style.height&&this._cachedContainerStyle.width===this._gameContainer.style.width&&this._cachedContainerStyle.height===this._gameContainer.style.height||(this.emit("window-resize",this.windowSize.width,this.windowSize.height),this._cachedFrameStyle.width=this._gameFrame.style.width,this._cachedFrameStyle.height=this._gameFrame.style.height,this._cachedContainerStyle.width=this._gameContainer.style.width,this._cachedContainerStyle.height=this._gameContainer.style.height)}else m(9201)},l(r,[{key:"supportFullScreen",get:function(){return this._supportFullScreen}},{key:"isFullScreen",get:function(){return!!this._supportFullScreen&&!!document[this._fn.fullscreenElement]}},{key:"devicePixelRatio",get:function(){var t;return Math.min(null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,2)}},{key:"windowSize",get:function(){var t=this._windowSizeInCssPixels,e=this.devicePixelRatio;return t.width*=e,t.height*=e,t},set:function(t){this._windowType===Ai.SubFrame?this._resizeFrame(this._convertToSizeInCssPixels(t)):m(9202)}},{key:"resolution",get:function(){var t=this.windowSize,e=this.resolutionScale;return new Mn(t.width*e,t.height*e)}},{key:"resolutionScale",get:function(){return this._resolutionScale},set:function(t){var e;t!==this._resolutionScale&&(this._resolutionScale=t,null==(e=this._cbToUpdateFrameBuffer)||e.call(this))}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation!==t&&(this._orientation=t,this._updateFrame())}},{key:"safeAreaEdge",get:function(){var t=this.devicePixelRatio;return{top:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-top")||"0")*t,bottom:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-bottom")||"0")*t,left:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-left")||"0")*t,right:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-right")||"0")*t}}},{key:"isProportionalToFrame",get:function(){return this._isProportionalToFrame},set:function(t){this._isProportionalToFrame!==t&&(this._isProportionalToFrame=t,this._updateContainer())}},{key:"_windowSizeInCssPixels",get:function(){if(this.isProportionalToFrame)return this._gameContainer?new Mn(this._gameContainer.clientWidth,this._gameContainer.clientHeight):(m(9201),new Mn(0,0));var t,e,n;switch(this._windowType){case Ai.SubFrame:return this._gameFrame?new Mn(this._gameFrame.clientWidth,this._gameFrame.clientHeight):(m(9201),new Mn(0,0));case Ai.Fullscreen:return t=this._getFullscreenTarget(),e=this.isFrameRotated?t.clientHeight:t.clientWidth,n=this.isFrameRotated?t.clientWidth:t.clientHeight,new Mn(e,n);case Ai.BrowserWindow:return e=this.isFrameRotated?window.innerHeight:window.innerWidth,n=this.isFrameRotated?window.innerWidth:window.innerHeight,new Mn(e,n);case Ai.Unknown:default:return new Mn(1,1)}}},{key:"_windowType",get:function(){return this._isHeadlessMode?Ai.Unknown:this.isFullScreen?Ai.Fullscreen:this._gameFrame?this._exactFitScreen?Ai.BrowserWindow:Ai.SubFrame:(m(9201),Ai.Unknown)}}]),r}(p),bi=t("J",new Ii),Oi=function(){function t(){}var i=t.prototype;return i.init=function(){var t,n,r=null===(t=x.querySettings(_.SCREEN,"exactFitScreen"))||void 0===t||t,i=null!==(n=x.querySettings(_.SCREEN,"orientation"))&&void 0!==n?n:"auto",a=3===x.querySettings(_.RENDERING,"renderMode");bi.init({exactFitScreen:r,configOrientation:i,isHeadlessMode:a},(function(){var t,n=e.director;null!=(t=n.root)&&t.pipeline?n.root.pipeline.shadingScale=bi.resolutionScale:m(1220)}))},i.fullScreen=function(){return bi.isFullScreen},i.requestFullScreen=function(t,e,n){return arguments.length>0&&m(1400,"screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)","screen.requestFullScreen(): Promise"),bi.requestFullScreen().then((function(){null==e||e.call(document)})).catch((function(t){r(t),null==n||n.call(document)}))},i.exitFullScreen=function(){return bi.exitFullScreen()},i.autoFullScreen=function(t,e){var r;null==(r=this.requestFullScreen(t,e))||r.catch((function(t){n(t)}))},i.disableAutoFullScreen=function(){},i.on=function(t,e,n){bi.on(t,e,n)},i.once=function(t,e,n){bi.once(t,e,n)},i.off=function(t,e,n){bi.off(t,e,n)},l(t,[{key:"devicePixelRatio",get:function(){return bi.devicePixelRatio}},{key:"windowSize",get:function(){return bi.windowSize},set:function(t){bi.windowSize=t}},{key:"resolution",get:function(){return bi.resolution}},{key:"supportsFullScreen",get:function(){return bi.supportFullScreen}}]),t}(),Mi=t("D",new Oi);e.screen=Mi;var Pi=t("n",{Feature:w,hasFeature:function(t){return v.hasFeature(t)},NetworkType:z,Language:E,OS:g,Platform:N,BrowserType:T,isNative:v.isNative,isBrowser:v.isBrowser,isMobile:v.isMobile,isLittleEndian:v.isLittleEndian,platform:v.platform,language:v.language,languageCode:v.nativeLanguage,os:v.os,osVersion:v.osVersion,osMainVersion:v.osMainVersion,browserType:v.browserType,browserVersion:v.browserVersion,isXR:v.isXR,windowPixelResolution:Mi.windowSize,capabilities:{canvas:!0,opengl:!0,webp:v.hasFeature(w.WEBP),imageBitmap:v.hasFeature(w.IMAGE_BITMAP),touches:v.hasFeature(w.INPUT_TOUCH),mouse:v.hasFeature(w.EVENT_MOUSE),keyboard:v.hasFeature(w.EVENT_KEYBOARD),accelerometer:v.hasFeature(w.EVENT_ACCELEROMETER)},localStorage:{},getNetworkType:function(){return v.networkType},getBatteryLevel:function(){return v.getBatteryLevel()},garbageCollect:function(){v.triggerGC()},isObjectValid:function(t){return null!=t},__isWebIOS14OrIPadOS14Env:!1,dump:function(){var t="";t+="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="supports webp: "+Pi.hasFeature(w.WEBP)+"\r\n",t+="supports bitmap: "+Pi.hasFeature(w.IMAGE_BITMAP)+"\r\n",t+="supports touches: "+Pi.hasFeature(w.INPUT_TOUCH)+"\r\n",t+="supports mouse: "+Pi.hasFeature(w.EVENT_MOUSE)+"\r\n",t+="supports keyboard: "+Pi.hasFeature(w.EVENT_KEYBOARD)+"\r\n",t+="supports accelerometer: "+Pi.hasFeature(w.EVENT_ACCELEROMETER)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",t+="Using "+(e.game.renderType===e.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n",A(t)},openURL:function(t){v.openURL(t)},init:function(){var t=this;return Promise.resolve().then((function(){return v.init()})).then((function(){try{var e=Pi.localStorage=window.localStorage;e.setItem("storage",""),e.removeItem("storage"),e=null}catch(e){var n=function(){m(5200)};t.localStorage={getItem:n,setItem:n,clear:n,removeItem:n,key:n,length:0}}t.__isWebIOS14OrIPadOS14Env=(Pi.os===g.IOS||Pi.os===g.OSX)&&v.isBrowser&&/(OS 14)|(Version\/14)/.test(window.navigator.userAgent)}))},now:function(){return v.now()},restartVM:function(){v.restartJSVM()},getSafeAreaRect:function(t){void 0===t&&(t=!0);var n=e.view,r=bi.safeAreaEdge;t&&(bi.orientation===S.ORIENTATION_PORTRAIT?r.top<r.bottom?r.top=r.bottom:r.bottom=r.top:r.left<r.right?r.left=r.right:r.right=r.left);var i=bi.windowSize,a=new bn(r.left,r.bottom),m=new bn(i.width-r.right,i.height-r.top);n._convertToUISpace(a),n._convertToUISpace(m);var o=a.x,u=a.y,s=m.x-a.x,c=m.y-a.y;return new Fn(o,u,s,c)}});e.sys=Pi,K(e,"cc",[{name:"winSize",suggest:"please use view.getVisibleSize() instead."}]),K(Pi,"sys",[{name:"capabilities",suggest:"please use sys.hasFeature() method instead."}]),G(Pi,"sys",["UNKNOWN","ENGLISH","CHINESE","FRENCH","ITALIAN","GERMAN","SPANISH","DUTCH","RUSSIAN","KOREAN","JAPANESE","HUNGARIAN","PORTUGUESE","ARABIC","NORWEGIAN","POLISH","TURKISH","UKRAINIAN","ROMANIAN","BULGARIAN"].map((function(t){return{name:"LANGUAGE_"+t,newName:t,target:Pi.Language,targetName:"sys.Language"}}))),G(Pi,"sys",["UNKNOWN","IOS","ANDROID","WINDOWS","LINUX","OSX"].map((function(t){return{name:"OS_"+t,newName:t,target:Pi.OS,targetName:"sys.OS"}}))),G(Pi,"sys",["UNKNOWN","WECHAT","ANDROID","IE","EDGE","QQ","MOBILE_QQ","UC","UCBS","BAIDU_APP","BAIDU","MAXTHON","OPERA","OUPENG","MIUI","FIREFOX","SAFARI","CHROME","LIEBAO","QZONE","SOUGOU","HUAWEI"].map((function(t){return{name:"BROWSER_TYPE_"+t,newName:t,target:Pi.BrowserType,targetName:"sys.BrowserType"}}))),G(Pi,"sys",[{name:"BROWSER_TYPE_360",newName:"BROWSER_360",target:Pi.BrowserType,targetName:"sys.BrowserType"}]),G(Pi,"sys",["UNKNOWN","EDITOR_PAGE","EDITOR_CORE","MOBILE_BROWSER","DESKTOP_BROWSER","WIN32","MACOS","IOS","ANDROID","OHOS","WECHAT_GAME","XIAOMI_QUICK_GAME","ALIPAY_MINI_GAME","BYTEDANCE_MINI_GAME","OPPO_MINI_GAME","VIVO_MINI_GAME","HUAWEI_QUICK_GAME"].map((function(t){return{name:t,target:Pi.Platform,targetName:"sys.Platform"}}))),G(Pi,"sys",[{name:"IPHONE",newName:"IOS",target:Pi.Platform,targetName:"sys.Platform"},{name:"IPAD",newName:"IOS",target:Pi.Platform,targetName:"sys.Platform"}]),W(Pi,"sys",["LINUX","BLACKBERRY","NACL","EMSCRIPTEN","TIZEN","WINRT","WP8","QQ_PLAY","FB_PLAYABLE_ADS"].map((function(t){return{name:t}}))),G(Pi,"sys",[{name:"windowPixelResolution",target:Mi,targetName:"screen",newName:"windowSize"}]),K(Mi,"screen",[{name:"autoFullScreen",suggest:"please use screen.requestFullScreen() instead."},{name:"disableAutoFullScreen"}]);var Ci=t("O",{topLeft:e.v2(0,0),topRight:e.v2(0,0),top:e.v2(0,0),bottomLeft:e.v2(0,0),bottomRight:e.v2(0,0),bottom:e.v2(0,0),center:e.v2(0,0),left:e.v2(0,0),right:e.v2(0,0),width:0,height:0,init:function(t){var e=this.width=t.width,n=this.height=t.height,r=t.x,i=t.y,a=i+n,m=r+e;this.topLeft.x=r,this.topLeft.y=a,this.topRight.x=m,this.topRight.y=a,this.top.x=r+e/2,this.top.y=a,this.bottomLeft.x=r,this.bottomLeft.y=i,this.bottomRight.x=m,this.bottomRight.y=i,this.bottom.x=r+e/2,this.bottom.y=i,this.center.x=r+e/2,this.center.y=i+n/2,this.left.x=r,this.left.y=i+n/2,this.right.x=m,this.right.y=i+n/2}});e.visibleRect=Ci;var Ui=new ge,Fi=new ge,Ri=new ge,Li=new ge,Bi=new Pe,Hi=Math.abs,ki=function(t,e,n){Bi.m00=Hi(n.m00),Bi.m01=Hi(n.m01),Bi.m02=Hi(n.m02),Bi.m03=Hi(n.m04),Bi.m04=Hi(n.m05),Bi.m05=Hi(n.m06),Bi.m06=Hi(n.m08),Bi.m07=Hi(n.m09),Bi.m08=Hi(n.m10),ge.transformMat3(t,e,Bi)},qi=t("G",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=Zn.SHAPE_AABB,this.center=new ge(t,e,n),this.halfExtents=new ge(r,i,a)}t.create=function(e,n,r,i,a,m){return new t(e,n,r,i,a,m)},t.clone=function(e){return n("The static method AABB.clone has been deprecated. Please use the corresponding instance method instead."),new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z)},t.copy=function(t,e){return n("The static method AABB.copy has been deprecated. Please use the corresponding instance method instead."),ge.copy(t.center,e.center),ge.copy(t.halfExtents,e.halfExtents),t},t.fromPoints=function(t,e,n){return ge.add(Ui,n,e),ge.subtract(Fi,n,e),ge.multiplyScalar(t.center,Ui,.5),ge.multiplyScalar(t.halfExtents,Fi,.5),t},t.set=function(t,e,n,r,i,a,m){return t.center.set(e,n,r),t.halfExtents.set(i,a,m),t},t.merge=function(e,n,r){return ge.subtract(Ui,n.center,n.halfExtents),ge.subtract(Fi,r.center,r.halfExtents),ge.add(Ri,n.center,n.halfExtents),ge.add(Li,r.center,r.halfExtents),ge.max(Li,Ri,Li),ge.min(Ri,Ui,Fi),t.fromPoints(e,Ri,Li)},t.toBoundingSphere=function(t,e){return t.center.set(e.center),t.radius=e.halfExtents.length(),t},t.transform=function(t,e,n){return ge.transformMat4(t.center,e.center,n),ki(t.halfExtents,e.halfExtents,n),t};var e=t.prototype;return e.getBoundary=function(t,e){ge.subtract(t,this.center,this.halfExtents),ge.add(e,this.center,this.halfExtents)},e.transform=function(t,e,n,r,i){ge.transformMat4(i.center,this.center,t),ki(i.halfExtents,this.halfExtents,t)},e.clone=function(){var e=this.center,n=this.halfExtents;return new t(e.x,e.y,e.z,n.x,n.y,n.z)},e.copy=function(t){return ge.copy(this.center,t.center),ge.copy(this.halfExtents,t.halfExtents),this},e.mergePoint=function(t){this.getBoundary(Ui,Fi),t.x<Ui.x&&(Ui.x=t.x),t.y<Ui.y&&(Ui.y=t.y),t.z<Ui.z&&(Ui.z=t.z),t.x>Fi.x&&(Fi.x=t.x),t.y>Fi.y&&(Fi.y=t.y),t.z>Fi.z&&(Fi.z=t.z),ge.add(Ri,Ui,Fi),this.center.set(ge.multiplyScalar(Ri,Ri,.5)),this.halfExtents.set(Fi.x-Ri.x,Fi.y-Ri.y,Fi.z-Ri.z)},e.mergePoints=function(t){if(!(t.length<1))for(var e=0;e<t.length;e++)this.mergePoint(t[e])},e.mergeFrustum=function(t){this.mergePoints(t.vertices)},l(t,[{key:"type",get:function(){return this._type}}]),t}()),Di=t("$",function(){function t(t,e,n){void 0===t&&(t=.5),void 0===e&&(e=.5),void 0===n&&(n=1),this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=Zn.SHAPE_CAPSULE,this.radius=t,this.halfHeight=e,this.axis=n,this.center=new ge,this.rotation=new Qe,this.ellipseCenter0=new ge(0,e,0),this.ellipseCenter1=new ge(0,-e,0),this.updateCache()}var e=t.prototype;return e.transform=function(t,e,n,r,i){var a=r,m=Mt(a);i.radius=this.radius*Math.abs(m);var o=(this.halfHeight+this.radius)*Math.abs(a.y)-i.radius;o<0&&(o=0),i.halfHeight=o,ge.transformMat4(i.center,this.center,t),Qe.multiply(i.rotation,this.rotation,n),i.updateCache()},e.updateCache=function(){this.updateLocalCenter(),ge.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),ge.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)},e.updateLocalCenter=function(){var t=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(t,0,0),this.ellipseCenter1.set(-t,0,0);break;case 1:this.ellipseCenter0.set(0,t,0),this.ellipseCenter1.set(0,-t,0);break;case 2:this.ellipseCenter0.set(0,0,t),this.ellipseCenter1.set(0,0,-t)}},l(t,[{key:"type",get:function(){return this._type}}]),t}()),Vi=new Array(8);Vi[0]=pe(1,1,1),Vi[1]=pe(-1,1,1),Vi[2]=pe(-1,-1,1),Vi[3]=pe(1,-1,1),Vi[4]=pe(1,1,-1),Vi[5]=pe(-1,1,-1),Vi[6]=pe(-1,-1,-1),Vi[7]=pe(1,-1,-1);var Gi,Wi=pe(),Ki=pe(),Qi=pe(),ji=_i.fromPoints,Yi=ge.set,Xi=ge.transformMat4,Zi=t("b1",function(){e.createOrthographic=function(t,e,n,r,i,a){var m=e/2,o=n/2;Yi(Qi,m,o,-r),Xi(t.vertices[0],Qi,a),Yi(Qi,-m,o,-r),Xi(t.vertices[1],Qi,a),Yi(Qi,-m,-o,-r),Xi(t.vertices[2],Qi,a),Yi(Qi,m,-o,-r),Xi(t.vertices[3],Qi,a),Yi(Qi,m,o,-i),Xi(t.vertices[4],Qi,a),Yi(Qi,-m,o,-i),Xi(t.vertices[5],Qi,a),Yi(Qi,-m,-o,-i),Xi(t.vertices[6],Qi,a),Yi(Qi,m,-o,-i),Xi(t.vertices[7],Qi,a),t.updatePlanes()},e.createOrtho=function(t,n,r,i,a,m){return e.createOrthographic(t,n,r,i,a,m)},e.createPerspective=function(t,e,n,r,i,a){var m=Math.tan(.5*n),o=m*e;Wi.set(r*o,r*m,r),Ki.set(i*o,i*m,i);var u=t.vertices;Qi.set(Wi.x,Wi.y,-Wi.z),Xi(u[0],Qi,a),Qi.set(-Wi.x,Wi.y,-Wi.z),Xi(u[1],Qi,a),Qi.set(-Wi.x,-Wi.y,-Wi.z),Xi(u[2],Qi,a),Qi.set(Wi.x,-Wi.y,-Wi.z),Xi(u[3],Qi,a),Qi.set(Ki.x,Ki.y,-Ki.z),Xi(u[4],Qi,a),Qi.set(-Ki.x,Ki.y,-Ki.z),Xi(u[5],Qi,a),Qi.set(-Ki.x,-Ki.y,-Ki.z),Xi(u[6],Qi,a),Qi.set(Ki.x,-Ki.y,-Ki.z),Xi(u[7],Qi,a),t.updatePlanes()},e.createFromAABB=function(t,e){var n=new ge,r=new ge;ge.subtract(n,e.center,e.halfExtents),ge.add(r,e.center,e.halfExtents);var i=t.vertices;return i[0].set(r.x,r.y,-n.z),i[1].set(n.x,r.y,-n.z),i[2].set(n.x,n.y,-n.z),i[3].set(r.x,n.y,-n.z),i[4].set(r.x,r.y,-r.z),i[5].set(n.x,r.y,-r.z),i[6].set(n.x,n.y,-r.z),i[7].set(r.x,n.y,-r.z),t.updatePlanes(),t};var t=e.prototype;function e(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=Zn.SHAPE_FRUSTUM,this.planes=new Array(6);for(var t=0;t<6;++t)this.planes[t]=_i.create(0,0,0,0);this.vertices=new Array(8);for(var e=0;e<8;++e)this.vertices[e]=new ge}return t.split=function(t,n,r,i,a){return e.createPerspective(this,r,i,t,n,a)},e.create=function(){return new e},e.clone=function(t){return e.copy(new e,t)},e.copy=function(t,e){t._type=e.type;for(var n=0;n<6;++n)_i.copy(t.planes[n],e.planes[n]);for(var r=0;r<8;++r)ge.copy(t.vertices[r],e.vertices[r]);return t},t.update=function(t,e){var n=this.planes;Yi(n[0].n,t.m03+t.m00,t.m07+t.m04,t.m11+t.m08),n[0].d=-(t.m15+t.m12),Yi(n[1].n,t.m03-t.m00,t.m07-t.m04,t.m11-t.m08),n[1].d=-(t.m15-t.m12),Yi(n[2].n,t.m03+t.m01,t.m07+t.m05,t.m11+t.m09),n[2].d=-(t.m15+t.m13),Yi(n[3].n,t.m03-t.m01,t.m07-t.m05,t.m11-t.m09),n[3].d=-(t.m15-t.m13),Yi(n[4].n,t.m03+t.m02,t.m07+t.m06,t.m11+t.m10),n[4].d=-(t.m15+t.m14),Yi(n[5].n,t.m03-t.m02,t.m07-t.m06,t.m11-t.m10),n[5].d=-(t.m15-t.m14);for(var r=0;r<6;r++){var i=n[r],a=1/i.n.length();ge.multiplyScalar(i.n,i.n,a),i.d*=a}for(var m=0;m<8;m++)Xi(this.vertices[m],Vi[m],e)},t.transform=function(t){for(var e=0;e<8;e++)Xi(this.vertices[e],this.vertices[e],t);this.updatePlanes()},t.zero=function(){for(var t=0;t<8;t++)this.vertices[t].set(0,0,0);for(var e=0;e<6;e++)_i.set(this.planes[e],0,0,0,0)},t.updatePlanes=function(){var t=this.planes,e=this.vertices;ji(t[0],e[1],e[6],e[5]),ji(t[1],e[3],e[4],e[7]),ji(t[2],e[6],e[3],e[7]),ji(t[3],e[0],e[5],e[4]),ji(t[4],e[2],e[0],e[3]),ji(t[5],e[7],e[5],e[6])},l(e,[{key:"accurate",set:function(t){this._type=t?Zn.SHAPE_FRUSTUM_ACCURATE:Zn.SHAPE_FRUSTUM}},{key:"type",get:function(){return this._type}}]),e}()),Ji=new ge,$i=new ge,ta=new Pe,ea=Math.abs,na=function(t,e,n){ta.m00=ea(n.m00),ta.m01=ea(n.m01),ta.m02=ea(n.m02),ta.m03=ea(n.m03),ta.m04=ea(n.m04),ta.m05=ea(n.m05),ta.m06=ea(n.m06),ta.m07=ea(n.m07),ta.m08=ea(n.m08),ge.transformMat3(t,e,ta)},ra=t("Z",function(){function t(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),void 0===m&&(m=1),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=0),void 0===c&&(c=1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=Zn.SHAPE_OBB,this.center=new ge(t,e,n),this.halfExtents=new ge(r,i,a),this.orientation=new Pe(m,o,u,s,c,h,l,f,y)}t.create=function(e,n,r,i,a,m,o,u,s,c,h,l,f,y,d){return new t(e,n,r,i,a,m,o,u,s,c,h,l,f,y,d)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z,e.orientation.m00,e.orientation.m01,e.orientation.m02,e.orientation.m03,e.orientation.m04,e.orientation.m05,e.orientation.m06,e.orientation.m07,e.orientation.m08)},t.copy=function(t,e){return ge.copy(t.center,e.center),ge.copy(t.halfExtents,e.halfExtents),Pe.copy(t.orientation,e.orientation),t},t.fromPoints=function(t,e,n){return ge.multiplyScalar(t.center,ge.add(Ji,e,n),.5),ge.multiplyScalar(t.halfExtents,ge.subtract($i,n,e),.5),Pe.identity(t.orientation),t},t.set=function(t,e,n,r,i,a,m,o,u,s,c,h,l,f,y,d){return ge.set(t.center,e,n,r),ge.set(t.halfExtents,i,a,m),Pe.set(t.orientation,o,u,s,c,h,l,f,y,d),t};var e=t.prototype;return e.getBoundary=function(t,e){na(Ji,this.halfExtents,this.orientation),ge.subtract(t,this.center,Ji),ge.add(e,this.center,Ji)},e.transform=function(t,e,n,r,i){ge.transformMat4(i.center,this.center,t),Pe.fromQuat(i.orientation,n),ge.multiply(i.halfExtents,this.halfExtents,r)},e.translateAndRotate=function(t,e,n){ge.transformMat4(n.center,this.center,t),Pe.fromQuat(n.orientation,e)},e.setScale=function(t,e){ge.multiply(e.halfExtents,this.halfExtents,t)},l(t,[{key:"type",get:function(){return this._type}}]),t}());function ia(t,e,n){void 0===n&&(n=1e-6);for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var m=t[a];if(m>e+n)i=a-1;else{if(!(m<e-n))return a;r=a+1}}return~r}Gi=Symbol.iterator;var aa,ma,oa,ua=function(){function t(){this._times=[],this._values=[]}var e=t.prototype;return e[Gi]=function(){var t=this,e=0;return{next:function(){if(e>=t._times.length)return{done:!0,value:void 0};var n=[t._times[e],t._values[e]];return++e,{done:!1,value:n}}}},e.keyframes=function(){return this},e.times=function(){return this._times},e.values=function(){return this._values},e.getKeyframeTime=function(t){return this._times[t]},e.getKeyframeValue=function(t){return this._values[t]},e.addKeyFrame=function(t,e){return this._insertNewKeyframe(t,e)},e.removeKeyframe=function(t){this._times.splice(t,1),this._values.splice(t,1)},e.indexOfKeyframe=function(t){return ia(this._times,t)},e.updateTime=function(t,e){var n=this._values[t];this.removeKeyframe(t),this._insertNewKeyframe(e,n)},e.assignSorted=function(t,e){if(void 0!==e)h(Array.isArray(t)),this.setKeyframes(t.slice(),e.slice());else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return t[1]})))}},e.clear=function(){this._times.length=0,this._values.length=0},e.searchKeyframe=function(t){return ia(this._times,t)},e.setKeyframes=function(t,e){h(t.length===e.length),h(sa(t)),this._times=t,this._values=e},e._insertNewKeyframe=function(t,e){var n=this._times,r=this._values,i=n.length,a=ia(n,t);if(a>=0)return a;var m=~a;return 0===m?(n.unshift(t),r.unshift(e)):m===i?(n.push(t),r.push(e)):(h(i>1),n.splice(m-1,0,t),r.splice(m-1,0,e)),m},l(t,[{key:"keyFramesCount",get:function(){return this._times.length}},{key:"rangeMin",get:function(){return this._times[0]}},{key:"rangeMax",get:function(){return this._times[this._values.length-1]}}]),t}();function sa(t){return t.every((function(t,e,n){return 0===e||t>n[e-1]||yt(t,n[e-1],1e-6)}))}function ca(t,e,n,r,i){var a=n/r,m=e/r,o=a*a,u=1/3*(-1/3*o+m),s=.5*(2/27*a*o-1/3*a*m+t/r),c=u*u*u,h=s*s+c,l=0;if(la(h)){if(la(s))return i[0]=0,1;var f=Math.cbrt(-s);return i[0]=2*f,i[1]=-f,2}if(h<0){var y=1/3*Math.acos(-s/Math.sqrt(-c)),d=2*Math.sqrt(-u);i[0]=d*Math.cos(y),i[1]=-d*Math.cos(y+Math.PI/3),i[2]=-d*Math.cos(y-Math.PI/3),l=3}else{var v=Math.sqrt(h),g=Math.cbrt(v-s),p=-Math.cbrt(v+s);i[0]=g+p,l=1}for(var x=1/3*a,_=0;_<l;++_)i[_]-=x;return l}c.fastDefine("cc.KeyframeCurve",ua,{_times:[],_values:[]}),t("aB",aa),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.CUBIC=2]="CUBIC"}(aa||t("aB",aa={})),t("aC",ma),function(t){t[t.LINEAR=0]="LINEAR",t[t.CLAMP=1]="CLAMP",t[t.LOOP=2]="LOOP",t[t.PING_PONG=3]="PING_PONG"}(ma||t("aC",ma={})),t("aD",oa),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTH=3]="BOTH"}(oa||t("aD",oa={}));var ha=1e-9;function la(t){return t>-ha&&t<ha}function fa(t,e,n,r){return n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),r)}var ya=function(){},da=function(){return ya},va=ga((function(){}));function ga(t){return function(e){return"function"==typeof e?t(e):function(n){return t(n,e)}}}function pa(t,e,n){var r=wa(t);if(r){var i=za(r,"proto");za(i,"editor")[e]=n}}function xa(t){return function(e){return function(n){pa(n,t,e)}}}var _a="__ccclassCache__";function wa(t){return za(t,_a)}function za(t,e){return t[e]||(t[e]={})}var Ea=t("c",ga((function(t,e){var n=I(t);n===Object&&(n=null);var r={name:e,extends:n,ctor:t},i=t[_a];if(i){var a=i.proto;a&&b(r,a),t[_a]=void 0}return c(r)}))),Na=t("K",xa("requireComponent")),Ta=t("j",xa("executionOrder")),Aa=t("d",va);function Sa(t,e,n){var r=null;function i(t,e,n){Ca(Oa(t),Ma(t,e),t.constructor,e,r,n)}return void 0===t?Sa({type:void 0}):void 0===e?(r=t,i):void i(t,e,n)}function Ia(t){var e;try{e=t()}catch(e){return t}return"object"!=typeof e||null===e?e:t}function ba(t){var e;try{e=new t}catch(t){return{}}return e}function Oa(t){return wa(t.constructor)}function Ma(t,e){var n,r,i=za(wa(t.constructor),"proto"),a=za(i,"properties");return null!==(r=a[n=e])&&void 0!==r?r:a[n]={}}function Pa(t,e,n){var r,i,a=wa(t.constructor),m=za(a,"proto"),o=za(m,"properties"),u=null!==(i=o[r=e])&&void 0!==i?i:o[r]={};return u.__internalFlags|=O.STANDALONE,n&&"function"!=typeof n&&(n.get||n.set)?(n.get&&(u.get=n.get),n.set&&(u.set=n.set)):Ua(a,u,t.constructor,e,n),u}function Ca(t,e,n,r,i,a){var m,o=a&&"function"!=typeof a&&(a.get||a.set);i&&(m=M(i,o));var u=b(e,m||i||{});o?(a.get&&(u.get=a.get),a.set&&(u.set=a.set)):Ua(t,u,n,r,a)}function Ua(t,e,n,r,i){if(void 0!==i)"function"==typeof i?e.default=Ia(i):null===i||i.initializer&&(e.default=Ia(i.initializer));else{var a=t.default||(t.default=ba(n));a.hasOwnProperty(r)&&(e.default=a[r])}}var Fa=Symbol("cc:SerializationMetadata"),Ra=t("s",(function(t,e,n){Ba(Pa(t,e,n))}));function La(t){return function(e,n,r){var i=Pa(e,n,r);i.formerlySerializedAs=t,Ba(i)}}function Ba(t){t.__internalFlags|=O.IMPLICIT_SERIALIZABLE}t("b6",(function(t,e,n){var r=Pa(t,e,n);r.editorOnly=!0,Ba(r)}));var Ha=t("b5",ya),ka=va,qa=da,Da=va,Va=da,Ga=da,Wa=da,Ka=t("aO",ya),Qa=t("aQ",da),ja=t("aR",da),Ya=t("aP",da),Xa=t("aT",da),Za=t("aU",da),Ja=t("aV",ya),$a=t("aS",da),tm=t("aW",ya),em=am(P),nm=t("b9",am(C)),rm=am(U),im=t("b2",am(F));function am(t){return Sa({type:t})}var mm=t("I",(function(t,e,n){Pa(t,e,n).override=!0})),om=t("az",(function(){}));h("__editorExtras__"===X,"editorExtrasTag needs to be updated.");var um,sm,cm,hm,lm,fm,ym,dm,vm,gm,pm=Object.freeze({__proto__:null,boolean:rm,ccclass:Ea,disallowAnimation:tm,disallowMultiple:Aa,displayName:ja,displayOrder:$a,editable:Ka,executeInEditMode:ka,executionOrder:Ta,float:nm,formerlySerializedAs:La,help:Wa,icon:Ga,inspector:Va,integer:em,menu:qa,override:mm,playOnFocus:Da,property:Sa,range:Xa,rangeStep:Za,requireComponent:Na,serializable:Ra,slide:Ja,string:im,tooltip:Ya,type:am,uniquelyReferenced:Ha,visible:Qa});function xm(t,e){return(e<<3)+t}function _m(t){return zm[t]}function wm(t){switch(t){case vm.Uint8:return Uint8Array;case vm.Uint16:return Uint16Array;case vm.Uint32:return Uint32Array;case vm.Int8:return Int8Array;case vm.Int16:return Int16Array;case vm.Int32:return Int32Array;case vm.Float32:return Float32Array;case vm.Float64:return Float64Array}}t("au",pm),function(t){t[t.Uint8=0]="Uint8",t[t.Uint16=1]="Uint16",t[t.Uint32=2]="Uint32",t[t.Int8=3]="Int8",t[t.Int16=4]="Int16",t[t.Int32=5]="Int32",t[t.Float32=6]="Float32",t[t.Float64=7]="Float64"}(vm||(vm={})),function(t){t[t.Scalar=0]="Scalar",t[t.Vec2=1]="Vec2",t[t.Vec3=2]="Vec3",t[t.Vec4=3]="Vec4",t[t.Quat=4]="Quat",t[t.Mat4=5]="Mat4"}(gm||(gm={})),t("av",Ea("cc.CompactValueTypeArray")(((ym=function(){function t(){this._byteOffset=cm&&cm(),this._unitCount=hm&&hm(),this._unitElement=lm&&lm(),this._length=fm&&fm()}return t.lengthFor=function(t,e,n){return _m(e).requiredUnits*t.length*wm(n).BYTES_PER_ELEMENT},t.compress=function(e,n,r,i,a,m){for(var o=_m(n),u=wm(r),s=o.requiredUnits*e.length,c=new u(i,a,s),h=0;h<e.length;++h)o.compress(c,h,e[h]);var l=new t;return l._unitElement=xm(r,n),l._byteOffset=m,l._unitCount=s,l._length=e.length,l},t.prototype.decompress=function(t){for(var e,n={storageUnit:7&(e=this._unitElement),elementType:e>>3},r=n.storageUnit,i=_m(n.elementType),a=new(wm(r))(t,this._byteOffset,this._unitCount),m=new Array(this._length),o=0;o<this._length;++o)m[o]=i.decompress(a,o);return m},t}()).StorageUnit=vm,ym.ElementType=gm,cm=fa((sm=ym).prototype,"_byteOffset",[Ra],(function(){return 0})),hm=fa(sm.prototype,"_unitCount",[Ra],(function(){return 0})),lm=fa(sm.prototype,"_unitElement",[Ra],(function(){return xm(vm.Uint8,gm.Scalar)})),fm=fa(sm.prototype,"_length",[Ra],(function(){return 0})),um=sm))||um);var zm=((dm={})[gm.Scalar]={requiredUnits:1,compress:function(t,e,n){t[e]=n},decompress:function(t,e){return t[e]}},dm[gm.Vec2]={requiredUnits:2,compress:function(t,e,n){t[2*e]=n.x,t[2*e+1]=n.y},decompress:function(t,e){return new ge(t[2*e],t[2*e+1])}},dm[gm.Vec3]={requiredUnits:3,compress:function(t,e,n){t[3*e]=n.x,t[3*e+1]=n.y,t[3*e+2]=n.z},decompress:function(t,e){return new ge(t[3*e],t[3*e+1],t[3*e+2])}},dm[gm.Vec4]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new $t(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},dm[gm.Quat]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new Qe(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},dm[gm.Mat4]={requiredUnits:16,compress:function(t,e,n){cn.toArray(t,n,16*e)},decompress:function(t,e){return cn.fromArray(new cn,t,16*e)}},dm),Em=t("ax",Symbol("[[Serialize]]")),Nm=t("aw",Symbol("[[Deserialize]]"));function Tm(){return 0}function Am(t){return t}function Sm(t){return t*t}function Im(t){return t*(2-t)}function bm(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function Om(t){return t*t*t}function Mm(t){return--t*t*t+1}function Pm(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}function Cm(t){return t*t*t*t}function Um(t){return 1- --t*t*t*t}function Fm(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function Rm(t){return t*t*t*t*t}function Lm(t){return--t*t*t*t*t+1}function Bm(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Hm(t){return 1===t?1:1-Math.cos(t*Math.PI/2)}function km(t){return Math.sin(t*Math.PI/2)}function qm(t){return.5*(1-Math.cos(Math.PI*t))}function Dm(t){return 0===t?0:Math.pow(1024,t-1)}function Vm(t){return 1===t?1:1-Math.pow(2,-10*t)}function Gm(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function Wm(t){return 1-Math.sqrt(1-t*t)}function Km(t){return Math.sqrt(1- --t*t)}function Qm(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function jm(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}function Ym(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}function Xm(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)}function Zm(t){if(1===t)return 1;var e=1.70158;return t*t*((e+1)*t-e)}function Jm(t){if(0===t)return 0;var e=1.70158;return--t*t*((e+1)*t+e)+1}function $m(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function to(t){return 1-eo(1-t)}function eo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function no(t){return t<.5?.5*to(2*t):.5*eo(2*t-1)+.5}function ro(t){return t<=0?0:t>=1?1:t*t*(3-2*t)}function io(t){return t<=0?0:t>=1?1:t*t*t*(t*(6*t-15)+10)}e._decorator=pm;var ao=vo(Sm,Im),mo=vo(Om,Mm),oo=vo(Cm,Um),uo=vo(Rm,Lm),so=vo(Hm,km),co=vo(Dm,Vm),ho=vo(Wm,Km),lo=vo(jm,Ym),fo=vo(Zm,Jm),yo=vo(to,eo);function vo(t,e){return function(n){return n<.5?e(2*n)/2:t(2*n-1)/2+.5}}var go,po,xo=Object.freeze({__proto__:null,backIn:Zm,backInOut:$m,backOut:Jm,backOutIn:fo,bounceIn:to,bounceInOut:no,bounceOut:eo,bounceOutIn:yo,circIn:Wm,circInOut:Qm,circOut:Km,circOutIn:ho,constant:Tm,cubicIn:Om,cubicInOut:Pm,cubicOut:Mm,cubicOutIn:mo,elasticIn:jm,elasticInOut:Xm,elasticOut:Ym,elasticOutIn:lo,expoIn:Dm,expoInOut:Gm,expoOut:Vm,expoOutIn:co,fade:io,linear:Am,quadIn:Sm,quadInOut:bm,quadOut:Im,quadOutIn:ao,quartIn:Cm,quartInOut:Fm,quartOut:Um,quartOutIn:oo,quintIn:Rm,quintInOut:Bm,quintOut:Lm,quintOutIn:uo,sineIn:Hm,sineInOut:qm,sineOut:km,sineOutIn:so,smooth:ro});t("aL",xo),t("aX",po),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.QUAD_IN=2]="QUAD_IN",t[t.QUAD_OUT=3]="QUAD_OUT",t[t.QUAD_IN_OUT=4]="QUAD_IN_OUT",t[t.QUAD_OUT_IN=5]="QUAD_OUT_IN",t[t.CUBIC_IN=6]="CUBIC_IN",t[t.CUBIC_OUT=7]="CUBIC_OUT",t[t.CUBIC_IN_OUT=8]="CUBIC_IN_OUT",t[t.CUBIC_OUT_IN=9]="CUBIC_OUT_IN",t[t.QUART_IN=10]="QUART_IN",t[t.QUART_OUT=11]="QUART_OUT",t[t.QUART_IN_OUT=12]="QUART_IN_OUT",t[t.QUART_OUT_IN=13]="QUART_OUT_IN",t[t.QUINT_IN=14]="QUINT_IN",t[t.QUINT_OUT=15]="QUINT_OUT",t[t.QUINT_IN_OUT=16]="QUINT_IN_OUT",t[t.QUINT_OUT_IN=17]="QUINT_OUT_IN",t[t.SINE_IN=18]="SINE_IN",t[t.SINE_OUT=19]="SINE_OUT",t[t.SINE_IN_OUT=20]="SINE_IN_OUT",t[t.SINE_OUT_IN=21]="SINE_OUT_IN",t[t.EXPO_IN=22]="EXPO_IN",t[t.EXPO_OUT=23]="EXPO_OUT",t[t.EXPO_IN_OUT=24]="EXPO_IN_OUT",t[t.EXPO_OUT_IN=25]="EXPO_OUT_IN",t[t.CIRC_IN=26]="CIRC_IN",t[t.CIRC_OUT=27]="CIRC_OUT",t[t.CIRC_IN_OUT=28]="CIRC_IN_OUT",t[t.CIRC_OUT_IN=29]="CIRC_OUT_IN",t[t.ELASTIC_IN=30]="ELASTIC_IN",t[t.ELASTIC_OUT=31]="ELASTIC_OUT",t[t.ELASTIC_IN_OUT=32]="ELASTIC_IN_OUT",t[t.ELASTIC_OUT_IN=33]="ELASTIC_OUT_IN",t[t.BACK_IN=34]="BACK_IN",t[t.BACK_OUT=35]="BACK_OUT",t[t.BACK_IN_OUT=36]="BACK_IN_OUT",t[t.BACK_OUT_IN=37]="BACK_OUT_IN",t[t.BOUNCE_IN=38]="BOUNCE_IN",t[t.BOUNCE_OUT=39]="BOUNCE_OUT",t[t.BOUNCE_IN_OUT=40]="BOUNCE_IN_OUT",t[t.BOUNCE_OUT_IN=41]="BOUNCE_OUT_IN",t[t.SMOOTH=42]="SMOOTH",t[t.FADE=43]="FADE"}(po||t("aX",po={}));var _o,wo=((go={})[po.CONSTANT]=Tm,go[po.LINEAR]=Am,go[po.QUAD_IN]=Sm,go[po.QUAD_OUT]=Im,go[po.QUAD_IN_OUT]=bm,go[po.QUAD_OUT_IN]=ao,go[po.CUBIC_IN]=Om,go[po.CUBIC_OUT]=Mm,go[po.CUBIC_IN_OUT]=Pm,go[po.CUBIC_OUT_IN]=mo,go[po.QUART_IN]=Cm,go[po.QUART_OUT]=Um,go[po.QUART_IN_OUT]=Fm,go[po.QUART_OUT_IN]=oo,go[po.QUINT_IN]=Rm,go[po.QUINT_OUT]=Lm,go[po.QUINT_IN_OUT]=Bm,go[po.QUINT_OUT_IN]=uo,go[po.SINE_IN]=Hm,go[po.SINE_OUT]=km,go[po.SINE_IN_OUT]=qm,go[po.SINE_OUT_IN]=so,go[po.EXPO_IN]=Dm,go[po.EXPO_OUT]=Vm,go[po.EXPO_IN_OUT]=Gm,go[po.EXPO_OUT_IN]=co,go[po.CIRC_IN]=Wm,go[po.CIRC_OUT]=Km,go[po.CIRC_IN_OUT]=Qm,go[po.CIRC_OUT_IN]=ho,go[po.ELASTIC_IN]=jm,go[po.ELASTIC_OUT]=Ym,go[po.ELASTIC_IN_OUT]=Xm,go[po.ELASTIC_OUT_IN]=lo,go[po.BACK_IN]=Zm,go[po.BACK_OUT]=Jm,go[po.BACK_IN_OUT]=$m,go[po.BACK_OUT_IN]=fo,go[po.BOUNCE_IN]=to,go[po.BOUNCE_OUT]=eo,go[po.BOUNCE_IN_OUT]=no,go[po.BOUNCE_OUT_IN]=yo,go[po.SMOOTH]=ro,go[po.FADE]=io,go);function zo(t){return h(t in wo),wo[t]}h(8===0+R(255)),h(16===8+R(65280));var Eo,No,To,Ao=aa.LINEAR|oa.NONE<<8|po.LINEAR<<16,So=function(t){function e(){var e;return(e=t.call(this)||this).value=0,e.rightTangent=0,e.rightTangentWeight=0,e.leftTangent=0,e.leftTangentWeight=0,e._flags=Ao,e}return u(e,t),l(e,[{key:"interpolationMode",get:function(){return 255&this._flags},set:function(t){this._flags&=-256,this._flags|=0|t}},{key:"tangentWeightMode",get:function(){return(65280&this._flags)>>8},set:function(t){this._flags&=-65281,this._flags|=t<<8}},{key:"easingMethod",get:function(){return(16711680&this._flags)>>16},set:function(t){this._flags&=-16711681,this._flags|=t<<16}}]),e}(om);function Io(t){var e=new So;if("number"==typeof t)e.value=t;else{var n=t.interpolationMode,r=t.tangentWeightMode,i=t.value,a=t.rightTangent,m=t.rightTangentWeight,o=t.leftTangent,u=t.leftTangentWeight,s=t.easingMethod,c=t[X];e.value=null!=i?i:e.value,e.rightTangent=null!=a?a:e.rightTangent,e.rightTangentWeight=null!=m?m:e.rightTangentWeight,e.leftTangent=null!=o?o:e.leftTangent,e.leftTangentWeight=null!=u?u:e.leftTangentWeight,e.interpolationMode=null!=n?n:e.interpolationMode,e.tangentWeightMode=null!=r?r:e.tangentWeightMode,e.easingMethod=null!=s?s:e.easingMethod,c&&(e[X]=c)}return e}c.fastDefine("cc.RealKeyframeValue",So,((_o={interpolationMode:aa.LINEAR,tangentWeightMode:oa.NONE,value:0,rightTangent:0,rightTangentWeight:0,leftTangent:0,leftTangentWeight:0,easingMethod:po.LINEAR})[X]=void 0,_o)),c.Attr.setClassAttr(So,X,"editorOnly",!0),(Eo=So,null!==(To=(No=Eo)[Fa])&&void 0!==To?To:No[Fa]={}).uniquelyReferenced=!0;var bo=t("aA",function(t){function e(){var e;return(e=t.call(this)||this).preExtrapolation=ma.CLAMP,e.postExtrapolation=ma.CLAMP,e}u(e,t);var n=e.prototype;return n.evaluate=function(t){var e=this._times,n=this._values,r=e.length;if(0===r)return 0;var i=e[0],a=e[r-1];if(t<i){var m=this.preExtrapolation,o=n[0];if(m===ma.CLAMP||r<2)return o.value;switch(m){case ma.LINEAR:return nu(i,n[0].value,e[1],n[1].value,t);case ma.LOOP:t=tu(t,i,a);break;case ma.PING_PONG:t=eu(t,i,a);break;default:return o.value}}else if(t>a){var u=this.postExtrapolation,s=n[r-1];if(u===ma.CLAMP||r<2)return s.value;switch(u){case ma.LINEAR:return nu(a,s.value,e[r-2],n[r-2].value,t);case ma.LOOP:t=tu(t,i,a);break;case ma.PING_PONG:t=eu(t,i,a);break;default:return s.value}}var c=ia(e,t);if(c>=0)return n[c].value;var l=~c;h(0!==l&&l!==r&&r>1);var f=l-1,y=e[f],d=n[f],v=e[l],g=n[l];return h(v>t&&t>y),ru(y,d,v,g,(t-y)/(v-y))},n.addKeyFrame=function(e,n){return t.prototype.addKeyFrame.call(this,e,Io(n))},n.assignSorted=function(t,e){if(void 0!==e)h(Array.isArray(t)),this.setKeyframes(t.slice(),e.map((function(t){return Io(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return Io(t[1])})))}},n.isConstant=function(t){if(this._values.length<=1)return!0;var e=this._values[0].value;return this._values.every((function(n){return yt(n.value,e,t)}))},n[Em]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,a=n.length,m=new DataView(new ArrayBuffer(0+Co+Co+Uo+Fo*a+Zo*a)),o=0;m.setUint8(o,this.preExtrapolation),o+=Co,m.setUint8(o,this.postExtrapolation),o+=Co,m.setUint32(o,a,!0),o+=Uo,n.forEach((function(t,e){return m.setFloat32(o+Fo*e,t,!0)})),o+=Fo*a;for(var u,s=i(r);!(u=s()).done;){var c=u.value;o=Jo(m,c,o)}var h=new Uint8Array(m.buffer,0,o);t.writeProperty("bytes",h);var l=r.map((function(t){return t[X]}));l.some((function(t){return void 0!==t}))&&t.writeProperty("keyframeValueEditorExtras",l)}else t.writeThis()},n[Nm]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;this.preExtrapolation=r.getUint8(i),i+=Co,this.postExtrapolation=r.getUint8(i),i+=Co;var a=r.getUint32(i,!0);i+=Uo;var m=Array.from({length:a},(function(t,e){return r.getFloat32(i+Fo*e,!0)}));i+=Fo*a;for(var o=new Array(a),u=0;u<a;++u){var s=Io({});i=$o(r,s,i),o[u]=s}h(i===n.byteLength);var c=t.readProperty("keyframeValueEditorExtras");c&&(h(c.length===a),c.forEach((function(t,e){return o[e][X]=t}))),this._times=m,this._values=o}else t.readThis()},e}(ua));c.fastDefine("cc.RealCurve",bo,{_times:[],_values:[],preExtrapolation:ma.CLAMP,postExtrapolation:ma.CLAMP});var Oo,Mo=8,Po=255<<Mo;!function(t){t[t.VALUE=1]="VALUE",t[t.INTERPOLATION_MODE=2]="INTERPOLATION_MODE",t[t.TANGENT_WEIGHT_MODE=4]="TANGENT_WEIGHT_MODE",t[t.LEFT_TANGENT=8]="LEFT_TANGENT",t[t.LEFT_TANGENT_WEIGHT=16]="LEFT_TANGENT_WEIGHT",t[t.RIGHT_TANGENT=32]="RIGHT_TANGENT",t[t.RIGHT_TANGENT_WEIGHT=64]="RIGHT_TANGENT_WEIGHT"}(Oo||(Oo={}));var Co=1,Uo=4,Fo=4,Ro=4,Lo=4,Bo=1,Ho=1,ko=4,qo=4,Do=4,Vo=4,Go=Io({}),Wo=Go.interpolationMode,Ko=Go.tangentWeightMode,Qo=Go.leftTangent,jo=Go.leftTangentWeight,Yo=Go.rightTangent,Xo=Go.rightTangentWeight,Zo=Ro+Lo+Bo+Ho+ko+qo+Do+Vo+0;function Jo(t,e,n){var r=0,i=n,a=i;i+=Ro;var m=e.value,o=e.interpolationMode,u=e.tangentWeightMode,s=e.rightTangent,c=e.rightTangentWeight,h=e.leftTangent,l=e.leftTangentWeight,f=e.easingMethod;return t.setFloat32(i,m,!0),i+=Lo,o!==Wo&&(r|=Oo.INTERPOLATION_MODE,t.setUint8(i,o),i+=Bo),u!==Ko&&(r|=Oo.TANGENT_WEIGHT_MODE,t.setUint8(i,u),i+=Ho),h!==Qo&&(r|=Oo.LEFT_TANGENT,t.setFloat32(i,h,!0),i+=ko),l!==jo&&(r|=Oo.LEFT_TANGENT_WEIGHT,t.setFloat32(i,l,!0),i+=qo),s!==Yo&&(r|=Oo.RIGHT_TANGENT,t.setFloat32(i,s,!0),i+=Do),c!==Xo&&(r|=Oo.RIGHT_TANGENT_WEIGHT,t.setFloat32(i,c,!0),i+=Vo),r|=f<<Mo,t.setUint32(a,r,!0),i}function $o(t,e,n){var r=n,i=t.getUint32(r,!0);r+=Ro,e.value=t.getFloat32(r,!0),r+=Lo,i&Oo.INTERPOLATION_MODE&&(e.interpolationMode=t.getUint8(r),r+=Bo),i&Oo.TANGENT_WEIGHT_MODE&&(e.tangentWeightMode=t.getUint8(r),r+=Ho),i&Oo.LEFT_TANGENT&&(e.leftTangent=t.getFloat32(r,!0),r+=ko),i&Oo.LEFT_TANGENT_WEIGHT&&(e.leftTangentWeight=t.getFloat32(r,!0),r+=qo),i&Oo.RIGHT_TANGENT&&(e.rightTangent=t.getFloat32(r,!0),r+=Do),i&Oo.RIGHT_TANGENT_WEIGHT&&(e.rightTangentWeight=t.getFloat32(r,!0),r+=Vo);var a=(i&Po)>>Mo;return e.easingMethod=a,r}function tu(t,e,n){return e+It(t-e,n-e)}function eu(t,e,n){return e+bt(t-e,n-e)}function nu(t,e,n,r,i){return e+(r-e)/(n-t)*(i-t)}function ru(t,e,n,r,i){var a=n-t;switch(e.interpolationMode){default:case aa.CONSTANT:return e.value;case aa.LINEAR:var m=e.easingMethod===po.LINEAR?i:zo(e.easingMethod)(i);return gt(e.value,r.value,m);case aa.CUBIC:var o=1/3,u=e.rightTangent,s=e.rightTangentWeight,c=!!(e.tangentWeightMode&oa.RIGHT),h=r.leftTangent,l=r.leftTangentWeight,f=!!(r.tangentWeightMode&oa.LEFT);if(c||f){var y=0;if(c)y=s;else{var d=a,v=a*u;y=Math.sqrt(d*d+v*v)*o}var g=Math.atan(u),p=Math.cos(g)*y+t,x=Math.sin(g)*y+e.value,_=0;if(f)_=l;else{var w=a,z=a*h;_=Math.sqrt(w*w+z*z)*o}var E=Math.atan(h),N=(p-t)/a,T=(-Math.cos(E)*_+n-t)/a,A=x,S=-Math.sin(E)*_+r.value,I=[0,0,0],b=au(I,ca(0-i,3*N,3*T-6*N,3*(N-T)+1,I),i);return iu(e.value,A,S,r.value,b)}var O=e.value+o*u*a,M=r.value-o*h*a;return iu(e.value,O,M,r.value,i)}}function iu(t,e,n,r,i){var a=1-i;return a*a*a*t+3*a*a*i*e+3*a*i*i*n+i*i*i*r}function au(t,e,n){var r=n;if(1===e)r=t[0];else{r=-1/0;for(var i=0;i<e;++i){var a=t[i];a>=0&&a<=1&&a>r&&(r=a)}r===-1/0&&(r=0)}return r}function mu(t,e,n,r,i){var a=1-i;return a*(a*(t+(3*e-t)*i)+3*n*i*i)+r*i*i*i}e.bezier=mu;var ou,uu,su,cu,hu,lu,fu,yu,du,vu,gu=Math.cos,pu=Math.acos,xu=Math.max,_u=2*Math.PI,wu=Math.sqrt;function zu(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function Eu(t,e){var n,r,i,a,m=e-0,o=e-t[0],u=3*m,s=3*o,c=3*(e-t[2]),h=1/(-m+s-c+(e-1)),l=1/3,f=(u-6*o+c)*h,y=f*l,d=(-u+s)*h,v=(3*d-f*f)*l,g=v*l,p=(2*f*f*f-9*f*d+m*h*27)/27,x=p/2,_=x*x+g*g*g;if(_<0){var w=-v*l,z=wu(w*w*w),E=-p/(2*z),N=pu(E<-1?-1:E>1?1:E),T=2*zu(z);return r=T*gu(N*l)-y,i=T*gu((N+_u)*l)-y,a=T*gu((N+2*_u)*l)-y,r>=0&&r<=1?i>=0&&i<=1?a>=0&&a<=1?xu(r,i,a):xu(r,i):a>=0&&a<=1?xu(r,a):r:i>=0&&i<=1?a>=0&&a<=1?xu(i,a):i:a}if(0===_)return i=-(n=x<0?zu(-x):-zu(x))-y,(r=2*n-y)>=0&&r<=1?i>=0&&i<=1?xu(r,i):r:i;var A=wu(_);return(n=zu(-x+A))-zu(x+A)-y}function Nu(t,e){var n=Eu(t,e),r=t[1];return((1-n)*(r+(t[3]-r)*n)*3+n*n)*n}e.bezierByTime=Nu,t("aF",vu),function(t){t[t.SLERP=0]="SLERP",t[t.CONSTANT=1]="CONSTANT"}(vu||t("aF",vu={}));var Tu,Au=Ea("cc.QuatKeyframeValue")(ou=Ha((uu=function(t){var e=void 0===t?{}:t,n=e.value,r=e.interpolationMode,i=e.easingMethod;this.interpolationMode=su&&su(),this.value=cu&&cu(),this.easingMethod=hu&&hu(),this.value=n?Qe.clone(n):this.value,this.interpolationMode=null!=r?r:this.interpolationMode,this.easingMethod=null!=i?i:this.easingMethod},su=fa(uu.prototype,"interpolationMode",[Ra],(function(){return vu.SLERP})),cu=fa(uu.prototype,"value",[Ra],(function(){return Qe.clone(Qe.IDENTITY)})),hu=fa(uu.prototype,"easingMethod",[Ra],(function(){return po.LINEAR})),ou=uu))||ou)||ou;function Su(t){return new Au(t)}t("aE",Ea("cc.QuatCurve")((fu=function(t){function e(){var e;return(e=t.call(this)||this).preExtrapolation=yu&&yu(),e.postExtrapolation=du&&du(),e}u(e,t);var n=e.prototype;return n.evaluate=function(t,e){var n;null!==(n=e)&&void 0!==n||(e=new Qe);var r=this._times,i=this._values,a=this.postExtrapolation,m=this.preExtrapolation,o=r.length;if(0===o)return e;var u=r[0],s=r[o-1];if(t<u){var c=i[0];switch(m){case ma.LOOP:t=u+It(t-u,s-u);break;case ma.PING_PONG:t=u+bt(t-u,s-u);break;case ma.CLAMP:default:return Qe.copy(e,c.value)}}else if(t>s){var l=i[o-1];switch(a){case ma.LOOP:t=u+It(t-u,s-u);break;case ma.PING_PONG:t=u+bt(t-u,s-u);break;case ma.CLAMP:default:return Qe.copy(e,l.value)}}var f=ia(r,t);if(f>=0)return Qe.copy(e,i[f].value);var y=~f;h(0!==y&&y!==o&&o>1);var d=y-1,v=r[d],g=i[d],p=r[y],x=i[y];h(p>t&&t>v);var _=(t-v)/(p-v);switch(g.interpolationMode){default:case vu.CONSTANT:return Qe.copy(e,g.value);case vu.SLERP:var w=g.easingMethod,z=w===po.LINEAR?_:Array.isArray(w)?Nu(w,_):zo(w)(_);return Qe.slerp(e,g.value,x.value,z)}},n.addKeyFrame=function(e,n){var r=new Au(n);return t.prototype.addKeyFrame.call(this,e,r)},n.assignSorted=function(t,e){if(void 0!==e)h(Array.isArray(t)),this.setKeyframes(t.slice(),e.map((function(t){return Su(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return Su(t[1])})))}},n[Em]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=!0;r.forEach((function(t,e,n){var r=n[0];i&&t.interpolationMode!==r.interpolationMode&&(i=!1)}));var a=n.length,m=Uu*(i?1:a),o=r.reduce((function(t,e){var n=e.easingMethod;return t+(Array.isArray(n)?Fu+4*Lu:Fu)}),0),u=0,s=new DataView(new ArrayBuffer(u+=Ou+Mu+Pu*a+4*Cu*a+o+m+0)),c=0,h=0;i&&(h|=Tu.INTERPOLATION_MODE),s.setUint32(c,h,!0),c+=Ou,s.setUint32(c,a,!0),c+=Mu,n.forEach((function(t,e){return s.setFloat32(c+Pu*e,t,!0)})),c+=Pu*a,r.forEach((function(t,e){var n=t.value,r=n.x,i=n.y,a=n.z,m=n.w,o=c+4*Cu*e;s.setFloat32(o+0*Cu,r,!0),s.setFloat32(o+1*Cu,i,!0),s.setFloat32(o+2*Cu,a,!0),s.setFloat32(o+3*Cu,m,!0)})),c+=4*Cu*a,r.forEach((function(t){var e=t.easingMethod;Array.isArray(e)?(s.setUint8(c,Ru),++c,s.setFloat32(c+0*Lu,e[0],!0),s.setFloat32(c+1*Lu,e[1],!0),s.setFloat32(c+2*Lu,e[2],!0),s.setFloat32(c+3*Lu,e[3],!0),c+=4*Lu):(s.setUint8(c,e),++c)}));var l=c;c+=m;var f=l;r.forEach((function(t){var e=t.interpolationMode;s.setUint8(f,e),i||(f+=Uu)}));var y=new Uint8Array(s.buffer);t.writeProperty("bytes",y)}else t.writeThis()},n[Nm]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0,a=r.getUint32(i,!0);i+=Ou;var m=a&Tu.INTERPOLATION_MODE,o=r.getUint32(i,!0);i+=Mu;var u=Array.from({length:o},(function(t,e){return r.getFloat32(i+Pu*e,!0)})),s=i+=Pu*o;i+=4*Cu*o;var c=Array.from({length:o},(function(t,e){var n=s+4*Cu*e,a=r.getFloat32(n+0*Cu,!0),m=r.getFloat32(n+1*Cu,!0),o=r.getFloat32(n+2*Cu,!0),u=r.getFloat32(n+3*Cu,!0),c=r.getUint8(i);++i;var h=Su({value:{x:a,y:m,z:o,w:u}});return c!==Ru?h.easingMethod=c:(h.easingMethod=[r.getFloat32(i+0*Lu,!0),r.getFloat32(i+1*Lu,!0),r.getFloat32(i+2*Lu,!0),r.getFloat32(i+3*Lu,!0)],i+=4*Lu),h}));if(m){var h=r.getUint8(i);++i;for(var l=0;l<o;++l)c[l].interpolationMode=h}else{for(var f=0;f<o;++f){var y=r.getUint8(i+f);c[f].interpolationMode=y}i+=o}this._times=u,this._values=c}else t.readThis()},e}(ua),yu=fa(fu.prototype,"preExtrapolation",[Ra],(function(){return ma.CLAMP})),du=fa(fu.prototype,"postExtrapolation",[Ra],(function(){return ma.CLAMP})),lu=fu))||lu),function(t){t[t.INTERPOLATION_MODE=1]="INTERPOLATION_MODE"}(Tu||(Tu={}));var Iu,bu,Ou=1,Mu=4,Pu=4,Cu=4,Uu=1,Fu=1,Ru=255,Lu=4;t("aG",Ea("cc.ObjectCurve")(Iu=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.evaluate=function(t){var e=this.searchKeyframe(t);if(e>=0)return this._values[e];var n=dt(~e-1,0,this._values.length-1);return this._values[n]},e}(ua))||Iu),function(t){t[t.Blend=0]="Blend",t[t.Fixed=1]="Fixed"}(bu||(bu={})),L(bu);var Bu=t("aH",(function(){this.color=Ae.WHITE.clone(),this.time=0}));c.fastDefine("cc.ColorKey",Bu,{color:Ae.WHITE.clone(),time:0}),c.Attr.setClassAttr(Bu,"color","visible",!0),c.Attr.setClassAttr(Bu,"time","visible",!0);var Hu=t("aI",(function(){this.alpha=1,this.time=0}));c.fastDefine("cc.AlphaKey",Hu,{alpha:1,time:0}),c.Attr.setClassAttr(Hu,"alpha","visible",!0),c.Attr.setClassAttr(Hu,"time","visible",!0);var ku=t("aJ",function(){function t(){this.colorKeys=[],this.alphaKeys=[],this.mode=bu.Blend}var e=t.prototype;return e.setKeys=function(t,e){this.colorKeys=t,this.alphaKeys=e},e.sortKeys=function(){this.colorKeys.length>1&&this.colorKeys.sort((function(t,e){return t.time-e.time})),this.alphaKeys.length>1&&this.alphaKeys.sort((function(t,e){return t.time-e.time}))},e.evaluate=function(t){return this.evaluateFast(new Ae,t)},e.evaluateFast=function(t,e){return this.getRGB(t,e),t.a=this.getAlpha(e),t},e.randomColor=function(){return this.getRandomColor(new Ae)},e.getRandomColor=function(t){var e=this.colorKeys[Math.trunc(_t()*this.colorKeys.length)],n=this.alphaKeys[Math.trunc(_t()*this.alphaKeys.length)];return t.set(e.color),t.a=n.alpha,t},e.getRGB=function(t,e){var n=this.colorKeys,r=n.length;if(r>1){e=It(e,1+lt);for(var i=1;i<r;++i){var a=n[i-1].time,m=n[i].time;if(e>=a&&e<m){if(this.mode===bu.Fixed)return Ae.copy(t,n[i].color),t;var o=(e-a)/(m-a);return Ae.lerp(t,n[i-1].color,n[i].color,o),t}}var u=r-1;yt(e,n[u].time,lt)?Ae.copy(t,n[u].color):e<n[0].time?Ae.lerp(t,Ae.BLACK,n[0].color,e/n[0].time):e>n[u].time&&Ae.lerp(t,n[u].color,Ae.BLACK,(e-n[u].time)/(1-n[u].time))}else 1===r?Ae.copy(t,n[0].color):Ae.copy(t,Ae.WHITE);return t},e.getAlpha=function(t){var e=this.alphaKeys,n=e.length;if(n>1){t=It(t,1+lt);for(var r=1;r<n;++r){var i=e[r-1].time,a=e[r].time;if(t>=i&&t<a){if(this.mode===bu.Fixed)return e[r].alpha;var m=(t-i)/(a-i);return gt(e[r-1].alpha,e[r].alpha,m)}}var o=n-1;return yt(t,e[o].time,lt)?e[o].alpha:t<e[0].time?gt(0,e[0].alpha,t/e[0].time):t>e[o].time?gt(e[o].alpha,0,(t-e[o].time)/(1-e[o].time)):255}return 1===n?e[0].alpha:255},t}());ku.Mode=bu,c.fastDefine("cc.Gradient",ku,{colorKeys:[],alphaKeys:[],mode:bu.Blend}),c.Attr.setClassAttr(ku,"colorKeys","visible",!0),c.Attr.setClassAttr(ku,"alphaKeys","visible",!0),c.Attr.setClassAttr(ku,"mode","visible",!0);var qu=function(){this.time=0,this.value=0,this.inTangent=0,this.outTangent=0};c.fastDefine("cc.Keyframe",qu,{time:0,value:0,inTangent:0,outTangent:0});var Du=function(){function t(){this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}return t.prototype.evaluate=function(t){return Vu(t-this.time,this.coefficient)},t}();function Vu(t,e){return t*(t*(t*e[0]+e[1])+e[2])+e[3]}var Gu,Wu=t("b8",function(){function t(t){if(void 0===t&&(t=null),this._curve=void 0,this.cachedKey=void 0,t instanceof bo)this._curve=t;else{var e=new bo;this._curve=e,e.preExtrapolation=ma.LOOP,e.postExtrapolation=ma.CLAMP,t?e.assignSorted(t.map((function(t){return[t.time,{interpolationMode:aa.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]}))):e.assignSorted([[0,{interpolationMode:aa.CUBIC,value:1}],[1,{interpolationMode:aa.CUBIC,value:1}]])}this.cachedKey=new Du}var e=t.prototype;return e.addKey=function(t){t?this._curve.addKeyFrame(t.time,{interpolationMode:aa.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}):this._curve.clear()},e.evaluate_slow=function(t){return this._curve.evaluate(t)},e.evaluate=function(t){var e=this.cachedKey,n=this._curve,r=n.keyFramesCount-1,i=t,a=t<0?n.preExtrapolation:n.postExtrapolation,m=n.getKeyframeTime(0),o=n.getKeyframeTime(r);switch(a){case ma.LOOP:i=It(t-m,o-m)+m;break;case ma.PING_PONG:i=bt(t-m,o-m)+m;break;case ma.CLAMP:default:i=dt(t,m,o)}if(i>=e.time&&i<e.endTime)return e.evaluate(i);var u=this.findIndex(e,i),s=Math.min(u+1,r);return this.calcOptimizedKey(e,u,s),e.evaluate(i)},e.calcOptimizedKey=function(t,e,n){var r=this._curve.getKeyframeTime(e),i=this._curve.getKeyframeTime(n),a=this._curve.getKeyframeValue(e),m=a.value,o=a.leftTangent,u=this._curve.getKeyframeValue(n),s=u.value,c=u.rightTangent;t.index=e,t.time=r,t.endTime=i;var h=i-r,l=s-m,f=1/(h*h),y=o*h,d=c*h;t.coefficient[0]=(y+d-l-l)*f/h,t.coefficient[1]=(l+l+l-y-y-d)*f,t.coefficient[2]=o,t.coefficient[3]=m},e.findIndex=function(t,e){var n=this._curve,r=n.keyFramesCount,i=t.index;if(-1!==i)if(e>n.getKeyframeTime(i))for(var a=0;a<3;a++){var m=i+a;if(m+1<r&&n.getKeyframeTime(m+1)>e)return m}else for(var o=0;o<3;o++){var u=i-o;if(u>=0&&n.getKeyframeTime(u-1)<=e)return u-1}for(var s,c=0,h=r;h-c>1;)s=Math.floor((c+h)/2),n.getKeyframeTime(s)>=e?h=s:c=s;return c},l(t,[{key:"_internalCurve",get:function(){return this._curve}},{key:"keyFrames",get:function(){return Array.from(this._curve.keyframes()).map((function(t){var e=t[0],n=t[1],r=new qu;return r.time=e,r.value=n.value,r.inTangent=n.leftTangent,r.outTangent=n.rightTangent,r}))},set:function(t){this._curve.assignSorted(t.map((function(t){return[t.time,{interpolationMode:aa.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]})))}},{key:"preWrapMode",get:function(){return Qu(this._curve.preExtrapolation)},set:function(t){this._curve.preExtrapolation=Ku(t)}},{key:"postWrapMode",get:function(){return Qu(this._curve.postExtrapolation)},set:function(t){this._curve.postExtrapolation=Ku(t)}}]),t}());function Ku(t){switch(t){default:case Gu.Default:case Gu.Normal:case Gu.Clamp:return ma.CLAMP;case Gu.PingPong:return ma.PING_PONG;case Gu.Loop:return ma.LOOP}}function Qu(t){switch(t){default:case ma.LINEAR:case ma.CLAMP:return Gu.Clamp;case ma.PING_PONG:return Gu.PingPong;case ma.LOOP:return Gu.Loop}}function ju(){var t=new bo;return t.assignSorted([[0,{interpolationMode:aa.CUBIC,value:1}],[1,{interpolationMode:aa.CUBIC,value:1}]]),t}Wu.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],c.fastDefine("cc.AnimationCurve",Wu,{_curve:null}),t("b4",Gu),function(t){t[t.Default=0]="Default",t[t.Normal=1]="Normal",t[t.Loop=2]="Loop",t[t.ShouldWrap=4]="ShouldWrap",t[t.Clamp=8]="Clamp",t[t.PingPong=22]="PingPong",t[t.Reverse=36]="Reverse"}(Gu||t("b4",Gu={}));var Yu,Xu=ge.multiplyScalar,Zu=ge.add;t("a$",Yu),function(t){t[t.LINEAR=0]="LINEAR",t[t.BEZIER=1]="BEZIER",t[t.CATMULL_ROM=2]="CATMULL_ROM"}(Yu||t("a$",Yu={}));var Ju,$u=4294967295,ts=pe(),es=pe(),ns=pe(),rs=pe(),is=t("b0",function(){function t(t,e){void 0===t&&(t=Yu.CATMULL_ROM),void 0===e&&(e=[]),this._type=void 0,this._knots=[],this._type=Zn.SHAPE_SPLINE,this._mode=t;for(var n=0;n<e.length;n++)this._knots[n]=pe(e[n])}t.create=function(e,n){return void 0===n&&(n=[]),new t(e,n)},t.clone=function(e){return new t(e.mode,e.knots)},t.copy=function(t,e){t._mode=e.mode,t._knots.length=0;for(var n=e.knots,r=n.length,i=0;i<r;i++)t._knots[i]=pe(n[i]);return t};var e=t.prototype;return e.setModeAndKnots=function(t,e){this._mode=t,this._knots.length=0;for(var n=0;n<e.length;n++)this._knots[n]=pe(e[n])},e.clearKnots=function(){this._knots.length=0},e.getKnotCount=function(){return this._knots.length},e.addKnot=function(t){this._knots.push(pe(t))},e.insertKnot=function(t,e){var n=pe(e);t>=this._knots.length?this._knots.push(n):this._knots.splice(t,0,n)},e.removeKnot=function(t){B(this._knots,t),this._knots.splice(t,1)},e.setKnot=function(t,e){B(this._knots,t),this._knots[t].set(e)},e.getKnot=function(t){return B(this._knots,t),this._knots[t]},e.getPoint=function(e,n){void 0===n&&(n=$u),e=dt(e,0,1);var r=this.getSegments();if(0===r)return pe();if(n===$u){var i=1/r;n=Math.floor(e/i),e=e%i/i}var a=this._knots;if(n>=r)return pe(a[a.length-1]);switch(this._mode){case Yu.LINEAR:return t.calcLinear(a[n],a[n+1],e);case Yu.BEZIER:var m=4*n;return t.calcBezier(a[m],a[m+1],a[m+2],a[m+3],e);case Yu.CATMULL_ROM:var o=n>0?a[n-1]:a[n],u=n+2<a.length?a[n+2]:a[n+1];return t.calcCatmullRom(o,a[n],a[n+1],u,e);default:return pe()}},e.getPoints=function(t,e){if(void 0===e&&(e=$u),0===t)return[];if(1===t)return[this.getPoint(0,e)];for(var n=[],r=1/(t-1),i=0;i<t;i++){var a=i*r,m=this.getPoint(a,e);n.push(m)}return n},e.getSegments=function(){var t=this._knots.length;switch(this._mode){case Yu.LINEAR:case Yu.CATMULL_ROM:return t<2?(m(14300),0):t-1;case Yu.BEZIER:return t<4||t%4!=0?(m(14301),0):t/4;default:return H(!1,16407),0}},t.calcLinear=function(t,e,n){var r=new ge;return Xu(ts,t,1-n),Xu(es,e,n),Zu(r,ts,es),r},t.calcBezier=function(t,e,n,r,i){var a=new ge,m=1-i;return Xu(ts,t,m*m*m),Xu(es,e,3*i*m*m),Xu(ns,n,3*i*i*m),Xu(rs,r,i*i*i),Zu(ts,ts,es),Zu(ns,ns,rs),Zu(a,ts,ns),a},t.calcCatmullRom=function(t,e,n,r,i){var a=new ge,m=i*i,o=m*i;return Xu(ts,t,-.5*o+m-.5*i),Xu(es,e,1.5*o-2.5*m+1),Xu(ns,n,-1.5*o+2*m+.5*i),Xu(rs,r,.5*o-.5*m),Zu(ts,ts,es),Zu(ns,ns,rs),Zu(a,ts,ns),a},l(t,[{key:"type",get:function(){return this._type}},{key:"mode",get:function(){return this._mode}},{key:"knots",get:function(){return this._knots}}]),t}());function as(t,e){n(t+" is deprecated, please use "+e+" instead.")}t("E",Ju),function(t){t[t.ALL=0]="ALL",t[t.CLOSEST=1]="CLOSEST",t[t.ANY=2]="ANY"}(Ju||t("E",Ju={})),G(di,"intersect",[{name:"ray_aabb",newName:"rayAABB"},{name:"ray_plane",newName:"rayPlane"},{name:"ray_triangle",newName:"rayTriangle"},{name:"ray_sphere",newName:"raySphere"},{name:"ray_obb",newName:"rayOBB"},{name:"ray_capsule",newName:"rayCapsule"},{name:"ray_subMesh",newName:"raySubMesh"},{name:"ray_mesh",newName:"rayMesh"},{name:"ray_model",newName:"rayModel"},{name:"line_plane",newName:"linePlane"},{name:"line_triangle",newName:"lineTriangle"},{name:"line_aabb",newName:"lineAABB"},{name:"line_obb",newName:"lineOBB"},{name:"line_sphere",newName:"lineSphere"},{name:"aabb_aabb",newName:"aabbWithAABB"},{name:"aabb_obb",newName:"aabbWithOBB"},{name:"aabb_plane",newName:"aabbPlane"},{name:"aabb_frustum",newName:"aabbFrustum"},{name:"aabbFrustum_accurate",newName:"aabbFrustumAccurate"},{name:"obb_point",newName:"obbPoint"},{name:"obb_plane",newName:"obbPlane"},{name:"obb_frustum",newName:"obbFrustum"},{name:"obbFrustum_accurate",newName:"obbFrustumAccurate"},{name:"obb_obb",newName:"obbWithOBB"},{name:"obb_capsule",newName:"obbCapsule"},{name:"sphere_plane",newName:"spherePlane"},{name:"sphere_frustum",newName:"sphereFrustum"},{name:"sphereFrustum_accurate",newName:"sphereFrustumAccurate"},{name:"sphere_sphere",newName:"sphereWithSphere"},{name:"sphere_aabb",newName:"sphereAABB"},{name:"sphere_obb",newName:"sphereOBB"},{name:"sphere_capsule",newName:"sphereCapsule"},{name:"capsule_capsule",newName:"capsuleWithCapsule"}]);var ms,os=function(t){function e(){var e;return e=t.call(this)||this,as("line","Line"),e}return u(e,t),e}(tr),us=function(t){function e(){var e;return e=t.call(this)||this,as("plane","Plane"),e}return u(e,t),e}(_i),ss=function(t){function e(){var e;return e=t.call(this)||this,as("ray","Ray"),e}return u(e,t),e}(er),cs=function(t){function e(){var e;return e=t.call(this)||this,as("triangle","Triangle"),e}return u(e,t),e}(wi),hs=function(t){function e(){var e;return e=t.call(this)||this,as("sphere","Sphere"),e}return u(e,t),e}(lr),ls=function(t){function e(){var e;return e=t.call(this)||this,as("aabb","AABB"),e}return u(e,t),e}(qi),fs=function(t){function e(){var e;return e=t.call(this)||this,as("obb","OBB"),e}return u(e,t),e}(ra),ys=function(t){function e(){var e;return e=t.call(this)||this,as("capsule","Capsule"),e}return u(e,t),e}(Di),ds=function(t){function e(){var e;return e=t.call(this)||this,as("frustum","Frustum"),e}return u(e,t),e}(Zi),vs=Object.freeze({__proto__:null,AABB:qi,AnimationCurve:Wu,Capsule:Di,get ERaycastMode(){return Ju},Frustum:Zi,Keyframe:qu,Line:tr,OBB:ra,OptimizedKey:Du,Plane:_i,Ray:er,Sphere:lr,Spline:is,get SplineMode(){return Yu},Triangle:wi,get WrapModeMask(){return Gu},aabb:ls,capsule:ys,constructLegacyCurveAndConvert:ju,distance:Jn,enums:$n,evalOptCurve:Vu,frustum:ds,intersect:di,line:os,obb:fs,plane:us,ray:ss,sphere:hs,triangle:cs});t("a1",vs),t("aK",ms),function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=100]="MEDIUM",t[t.HIGH=200]="HIGH",t[t.SCHEDULER=2147483648]="SCHEDULER"}(ms||t("aK",ms={}));var gs=t("S",function(){function t(){this._id="",this._priority=0,this._executeInEditMode=!1}t.sortByPriority=function(t,e){return t._priority<e._priority?1:t._priority>e.priority?-1:0};var e=t.prototype;return e.init=function(){},e.update=function(){},e.postUpdate=function(){},e.destroy=function(){},l(t,[{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}}]),t}());gs.Priority=L({LOW:ms.LOW,MEDIUM:ms.MEDIUM,HIGH:ms.HIGH,SCHEDULER:ms.SCHEDULER});var ps=new D("Scheduler"),xs=function(){function t(t,e,n,r){this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=t,this.priority=e,this.paused=n,this.markedForDeletion=r}return t.get=function(e,n,r,i){var a=t._listEntries.pop();return a?(a.target=e,a.priority=n,a.paused=r,a.markedForDeletion=i):a=new t(e,n,r,i),a},t.put=function(e){t._listEntries.length<20&&(e.target=null,t._listEntries.push(e))},t}();xs._listEntries=[];var _s=function(){function t(t,e,n,r){this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=t,this.entry=e,this.target=n,this.callback=r}return t.get=function(e,n,r,i){var a=t._hashUpdateEntries.pop();return a?(a.list=e,a.entry=n,a.target=r,a.callback=i):a=new t(e,n,r,i),a},t.put=function(e){t._hashUpdateEntries.length<20&&(e.list=e.entry=e.target=e.callback=null,t._hashUpdateEntries.push(e))},t}();_s._hashUpdateEntries=[];var ws=function(){function t(t,e,n,r,i,a){this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=t,this.target=e,this.timerIndex=n,this.currentTimer=r,this.currentTimerSalvaged=i,this.paused=a}return t.get=function(e,n,r,i,a,m){var o=t._hashTimerEntries.pop();return o?(o.timers=e,o.target=n,o.timerIndex=r,o.currentTimer=i,o.currentTimerSalvaged=a,o.paused=m):o=new t(e,n,r,i,a,m),o},t.put=function(e){t._hashTimerEntries.length<20&&(e.timers=e.target=e.currentTimer=null,t._hashTimerEntries.push(e))},t}();ws._hashTimerEntries=[];var zs=function(){function t(){this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null}t.get=function(){return t._timers.pop()||new t},t.put=function(e){t._timers.length<20&&!e._lock&&(e._scheduler=e._target=e._callback=null,t._timers.push(e))};var n=t.prototype;return n.initWithCallback=function(t,n,r,i,a,m){return this._lock=!1,this._scheduler=t,this._target=r,this._callback=n,this._timesExecuted=0,this._elapsed=-1,this._interval=i,this._delay=m,this._useDelay=this._delay>0,this._repeat=a,this._runForever=this._repeat===e.macro.REPEAT_FOREVER,!0},n.getInterval=function(){return this._interval},n.setInterval=function(t){this._interval=t},n.update=function(t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},n.getCallback=function(){return this._callback},n.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},n.cancel=function(){this._scheduler&&this._callback&&this._target&&this._scheduler.unscheduleForTimer(this,this._target)},t}();zs._timers=[];var Es=t("B",function(t){function n(){var e;return(e=t.call(this)||this)._timeScale=void 0,e._updatesNegList=void 0,e._updates0List=void 0,e._updatesPosList=void 0,e._hashForUpdates=void 0,e._hashForTimers=void 0,e._currentTarget=void 0,e._currentTargetSalvaged=void 0,e._updateHashLocked=void 0,e._arrayForTimers=void 0,e._timeScale=1,e._updatesNegList=[],e._updates0List=[],e._updatesPosList=[],e._hashForUpdates=k(!0),e._hashForTimers=k(!0),e._currentTarget=null,e._currentTargetSalvaged=!1,e._updateHashLocked=!1,e._arrayForTimers=[],e}u(n,t),n.enableForTarget=function(t){var e=!1;(t.uuid||t.id)&&(e=!0),e||(t.id=ps.getNewId())};var r=n.prototype;return r.setTimeScale=function(t){this._timeScale=t},r.getTimeScale=function(){return this._timeScale},r.update=function(t){var e,n,r,i,a;for(this._updateHashLocked=!0,1!==this._timeScale&&(t*=this._timeScale),e=0,r=(n=this._updatesNegList).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||!i.target||null==i.target.update||i.target.update(t);for(e=0,r=(n=this._updates0List).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||!i.target||null==i.target.update||i.target.update(t);for(e=0,r=(n=this._updatesPosList).length;e<r;e++)(i=n[e]).paused||i.markedForDeletion||!i.target||null==i.target.update||i.target.update(t);var m=this._arrayForTimers;for(e=0;e<m.length;e++){var o;if(a=m[e],this._currentTarget=a,this._currentTargetSalvaged=!1,!a.paused&&a.timers)for(a.timerIndex=0;a.timerIndex<a.timers.length;++a.timerIndex)a.currentTimer=a.timers[a.timerIndex],a.currentTimerSalvaged=!1,a.currentTimer.update(t),a.currentTimer=null;this._currentTargetSalvaged&&0===(null==(o=this._currentTarget.timers)?void 0:o.length)&&(this._removeHashElement(this._currentTarget),--e)}for(e=0,n=this._updatesNegList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updates0List;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updatesPosList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;this._updateHashLocked=!1,this._currentTarget=null},r.schedule=function(t,n,r,i,o,u){var s,c,h,l;"function"!=typeof t?(m(1514),h=n,l=t):(h=t,l=n),3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(u=!!i,i=e.macro.REPEAT_FOREVER,o=0),H(Boolean(l),1502);var f=l.uuid||l.id;if(f){var y,d,v=this._hashForTimers[f];if(v?v.paused!==u&&m(1511):(v=ws.get(null,l,0,null,!1,Boolean(u)),this._arrayForTimers.push(v),this._hashForTimers[f]=v),null==v.timers)v.timers=[];else for(d=0;d<v.timers.length;++d)if((y=v.timers[d])&&h===y.getCallback())return q(1507,y.getInterval(),r),void y.setInterval(r);(y=zs.get()).initWithCallback(this,h,l,r,null!==(s=i)&&void 0!==s?s:0,null!==(c=o)&&void 0!==c?c:0),v.timers.push(y),this._currentTarget===v&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}else a(1510)},r.scheduleUpdate=function(t,e,n){var r=t.uuid||t.id;if(r){var i=this._hashForUpdates[r];if(i&&i.entry){if(i.entry.priority===e)return i.entry.markedForDeletion=!1,void(i.entry.paused=n);if(this._updateHashLocked)return q(1506),i.entry.markedForDeletion=!1,void(i.entry.paused=n);this.unscheduleUpdate(t)}var m,o=xs.get(t,e,n,!1);0===e?(m=this._updates0List,this._appendIn(m,o)):(m=e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(m,o,e)),this._hashForUpdates[r]=_s.get(m,o,t,null)}else a(1510)},r.unschedule=function(t,e){if(e&&t){var n=e.uuid||e.id;if(n){var r=this._hashForTimers[n];if(r){var i=r.timers;if(!i)return;for(var m=0,o=i.length;m<o;m++){var u=i[m];if(t===u.getCallback())return u!==r.currentTimer||r.currentTimerSalvaged||(r.currentTimerSalvaged=!0),i.splice(m,1),zs.put(u),r.timerIndex>=m&&r.timerIndex--,void(0===i.length&&(this._currentTarget===r?this._currentTargetSalvaged=!0:this._removeHashElement(r)))}}}else a(1510)}},r.unscheduleForTimer=function(t,e){var n=e.uuid||e.id,r=this._hashForTimers[n],i=r.timers;if(i&&0!==i.length)for(var a=i.length-1;a>=0;a--){var m=i[a];if(m===t)return i.splice(a,1),zs.put(m),r.timerIndex>=a&&r.timerIndex--,void(0===i.length&&(this._currentTargetSalvaged=!0))}},r.unscheduleUpdate=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForUpdates[e];null!=n&&n.entry&&(this._updateHashLocked?n.entry.markedForDeletion=!0:this._removeUpdateFromHash(n.entry))}else a(1510)}},r.unscheduleAllForTarget=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];if(null!=n&&n.timers){var r=n.timers;n.currentTimer&&r.indexOf(n.currentTimer)>-1&&!n.currentTimerSalvaged&&(n.currentTimerSalvaged=!0);for(var i=0,m=r.length;i<m;i++)zs.put(r[i]);r.length=0,this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)}this.unscheduleUpdate(t)}else a(1510)}},r.unscheduleAll=function(){this.unscheduleAllWithMinPriority(ms.SCHEDULER)},r.unscheduleAllWithMinPriority=function(t){var e,n,r,i=this._arrayForTimers;for(e=i.length-1;e>=0;e--)(n=i[e]).target&&this.unscheduleAllForTarget(n.target);var a=0;if(t<0)for(e=0;e<this._updatesNegList.length;){var m;a=this._updatesNegList.length,null!=(m=r=this._updatesNegList[e])&&m.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesNegList.length&&e++}if(t<=0)for(e=0;e<this._updates0List.length;){var o;a=this._updates0List.length,null!=(o=r=this._updates0List[e])&&o.target&&this.unscheduleUpdate(r.target),a===this._updates0List.length&&e++}for(e=0;e<this._updatesPosList.length;){var u;a=this._updatesPosList.length,null!=(u=r=this._updatesPosList[e])&&u.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesPosList.length&&e++}},r.isScheduled=function(t,e){H(Boolean(t),1508),H(Boolean(e),1509);var n=e.uuid||e.id;if(!n)return a(1510),!1;var r=this._hashForTimers[n];if(!r)return!1;if(null==r.timers)return!1;for(var i=r.timers,m=0;m<i.length;++m)if(t===i[m].getCallback())return!0;return!1},r.pauseAllTargets=function(){return this.pauseAllTargetsWithMinPriority(ms.SCHEDULER)},r.pauseAllTargetsWithMinPriority=function(t){var e,n,r,i,a=[],m=this._arrayForTimers;for(n=0,r=m.length;n<r;n++){var o;null!=(o=e=m[n])&&o.target&&(e.paused=!0,a.push(e.target))}if(t<0)for(n=0;n<this._updatesNegList.length;n++){var u;null!=(u=i=this._updatesNegList[n])&&u.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}if(t<=0)for(n=0;n<this._updates0List.length;n++){var s;null!=(s=i=this._updates0List[n])&&s.target&&(i.paused=!0,a.push(i.target))}for(n=0;n<this._updatesPosList.length;n++){var c;null!=(c=i=this._updatesPosList[n])&&c.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}return a},r.resumeTargets=function(t){if(t)for(var e=0;e<t.length;e++)this.resumeTarget(t[e])},r.pauseTarget=function(t){H(Boolean(t),1503);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!0);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!0)}else a(1510)},r.resumeTarget=function(t){H(Boolean(t),1504);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!1);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!1)}else a(1510)},r.isTargetPaused=function(t){H(Boolean(t),1505);var e=t.uuid||t.id;if(!e)return a(1510),!1;var n=this._hashForTimers[e];if(n)return n.paused;var r=this._hashForUpdates[e];return!(null==r||!r.entry)&&r.entry.paused},r._removeHashElement=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){delete this._hashForTimers[e];for(var n=this._arrayForTimers,r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice(r,1);break}ws.put(t)}}},r._removeUpdateFromHash=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){var n=this._hashForUpdates[e];if(n){var r=n.list,i=n.entry;if(r)for(var a=0,m=r.length;a<m;a++)if(r[a]===i){r.splice(a,1);break}delete this._hashForUpdates[e],i&&xs.put(i),_s.put(n)}}}},r._priorityIn=function(t,e,n){for(var r=0;r<t.length;r++)if(n<t[r].priority)return void t.splice(r,0,e);t.push(e)},r._appendIn=function(t,e){t.push(e)},n}(gs));Es.ID="scheduler",e.Scheduler=Es;var Ns={};G(Ns,"vmath",[{name:"vec2",newName:"Vec2",target:Hn,targetName:"math"},{name:"vec3",newName:"Vec3",target:Hn,targetName:"math"},{name:"vec4",newName:"Vec4",target:Hn,targetName:"math"},{name:"quat",newName:"Quat",target:Hn,targetName:"math"},{name:"mat3",newName:"Mat3",target:Hn,targetName:"math"},{name:"mat4",newName:"Mat4",target:Hn,targetName:"math"},{name:"color4",newName:"Color",target:Hn,targetName:"math"},{name:"rect",newName:"Rect",target:Hn,targetName:"math"},{name:"approx",newName:"approx",target:Hn,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:Hn,targetName:"math"},{name:"equals",newName:"equals",target:Hn,targetName:"math"},{name:"clamp",newName:"clamp",target:Hn,targetName:"math"},{name:"clamp01",newName:"clamp01",target:Hn,targetName:"math"},{name:"lerp",newName:"lerp",target:Hn,targetName:"math"},{name:"toRadian",newName:"toRadian",target:Hn,targetName:"math"},{name:"toDegree",newName:"toDegree",target:Hn,targetName:"math"},{name:"random",newName:"random",target:Hn,targetName:"math"},{name:"randomRange",newName:"randomRange",target:Hn,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:Hn,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:Hn,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:Hn,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:Hn,targetName:"math"},{name:"repeat",newName:"repeat",target:Hn,targetName:"math"},{name:"pingPong",newName:"pingPong",target:Hn,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:Hn,targetName:"math"}]),e.vmath=Ns,G(Es.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:Es,targetName:"Scheduler"}]),G(Es,"Scheduler",[{name:"PRIORITY_SYSTEM",newName:"System.Priority.SCHEDULER",customGetter:function(){return ms.SCHEDULER}}]),W(Es,"Scheduler",[{name:"PRIORITY_NON_SYSTEM",suggest:"Use enum` System.Priority` instead"}]),K(V,"js",[{name:"js",suggest:"'js.js' is deprecated since v3.7.0, please access 'js' directly instead."}]),e.easing=xo,e.math=Hn,e.geometry=vs}}}));
//# sourceMappingURL=index-BcjqSS2q.js.map
