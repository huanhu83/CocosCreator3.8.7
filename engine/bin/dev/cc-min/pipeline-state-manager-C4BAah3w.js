System.register(["./gc-object-BD6DANSw.js","./global-exports-ZavlJGEN.js","./index-BcjqSS2q.js","./device-manager-BCOP-4pU.js","./buffer-barrier-CZBuOw0V.js"],(function(_){"use strict";var E,O,T,F,A,S,I,N,R,L,n,e,M,D,P,C,t,U,B,a,c,i,r,o,G,u,H,s,w,l,W,d,V,f;return{setters:[function(_){E=_.E,O=_.B,T=_.t,F=_.s,A=_.S,S=_.w,I=_.l,N=_.g,R=_.v,L=_.u,n=_.a,e=_.R},function(_){M=_.l,D=_.c},null,null,function(_){P=_.g,C=_.h,t=_.S,U=_.U,B=_.i,a=_.j,c=_.k,i=_.l,r=_.V,o=_.n,G=_.F,u=_.o,H=_.T,s=_.d,w=_.e,l=_.p,W=_.q,d=_.r,V=_.s,f=_.t}],execute:function(){_({F:KE,G:jE,Y:zE,i:QE,l:z_,z:xE});var g,m,X,b,p,Y,h,J,v,Z,y,k,j,x,K={NONE:0,IGNORE_RAYCAST:1<<20,GIZMOS:1<<21,EDITOR:1<<22,UI_3D:1<<23,SCENE_GIZMO:1<<24,UI_2D:1<<25,PROFILER:1<<28,DEFAULT:1<<30,ALL:4294967295},Q=_("L",function(){function _(){}return _.init=function(){var E=F.querySettings(A.ENGINE,"customLayers");if(E)for(var O=0;O<E.length;O++){var T=E[O];_.addLayer(T.name,T.bit)}},_.makeMaskInclude=function(_){return _.reduce((function(_,E){return _|E}),0)},_.makeMaskExclude=function(E){return~_.makeMaskInclude(E)},_.addLayer=function(T,F){if(void 0!==F)if(F>19||F<0)S(16365);else{var A=1<<F;I(!_.Enum[T],N(2104,T)),_.Enum[T]=A,R(_.Enum,String(A),T),_.BitMask[T]=A,R(_.BitMask,String(A),T),O.update(_.BitMask),E.update(_.Enum)}else S(16364)},_.deleteLayer=function(T){if(T>19||T<0)S(16366);else{var F=1<<T;delete _.Enum[_.Enum[F]],delete _.Enum[F],delete _.BitMask[_.BitMask[F]],delete _.BitMask[F],O.update(_.BitMask),E.update(_.Enum)}},_.nameToLayer=function(E){return void 0===E?(S(16367),-1):L(_.Enum[E])},_.layerToName=function(E){return E>31||E<0?(S(16368),""):_.Enum[1<<E]},_}());Q.Enum=E(K),Q.BitMask=O(T({},K)),M.Layers=Q;var z,q,$=_("$","MainFlow"),__=_("Z","ForwardFlow"),E_=_("_","ShadowFlow");_("a0",z),function(_){_[_.DEFAULT=100]="DEFAULT",_[_.UI=200]="UI"}(z||_("a0",z={})),D.RenderPassStage=z,_("R",q),function(_){_[_.MIN=0]="MIN",_[_.MAX=255]="MAX",_[_.DEFAULT=128]="DEFAULT"}(q||_("R",q={}));var O_,T_=_("N",{bindings:[],layouts:{}}),F_=_("H",{bindings:[],layouts:{}});_("J",O_),function(_){_[_.UBO_GLOBAL=0]="UBO_GLOBAL",_[_.UBO_CAMERA=1]="UBO_CAMERA",_[_.UBO_SHADOW=2]="UBO_SHADOW",_[_.UBO_CSM=3]="UBO_CSM",_[_.SAMPLER_SHADOWMAP=4]="SAMPLER_SHADOWMAP",_[_.SAMPLER_ENVIRONMENT=5]="SAMPLER_ENVIRONMENT",_[_.SAMPLER_SPOT_SHADOW_MAP=6]="SAMPLER_SPOT_SHADOW_MAP",_[_.SAMPLER_DIFFUSEMAP=7]="SAMPLER_DIFFUSEMAP",_[_.COUNT=8]="COUNT"}(O_||_("J",O_={}));var A_,S_=O_.SAMPLER_SHADOWMAP,I_=O_.COUNT-S_;_("M",A_),function(_){_[_.UBO_LOCAL=0]="UBO_LOCAL",_[_.UBO_FORWARD_LIGHTS=1]="UBO_FORWARD_LIGHTS",_[_.UBO_SKINNING_ANIMATION=2]="UBO_SKINNING_ANIMATION",_[_.UBO_SKINNING_TEXTURE=3]="UBO_SKINNING_TEXTURE",_[_.UBO_MORPH=4]="UBO_MORPH",_[_.UBO_UI_LOCAL=5]="UBO_UI_LOCAL",_[_.UBO_SH=6]="UBO_SH",_[_.SAMPLER_JOINTS=7]="SAMPLER_JOINTS",_[_.SAMPLER_MORPH_POSITION=8]="SAMPLER_MORPH_POSITION",_[_.SAMPLER_MORPH_NORMAL=9]="SAMPLER_MORPH_NORMAL",_[_.SAMPLER_MORPH_TANGENT=10]="SAMPLER_MORPH_TANGENT",_[_.SAMPLER_LIGHTMAP=11]="SAMPLER_LIGHTMAP",_[_.SAMPLER_SPRITE=12]="SAMPLER_SPRITE",_[_.SAMPLER_REFLECTION_PROBE_CUBE=13]="SAMPLER_REFLECTION_PROBE_CUBE",_[_.SAMPLER_REFLECTION_PROBE_PLANAR=14]="SAMPLER_REFLECTION_PROBE_PLANAR",_[_.SAMPLER_REFLECTION_PROBE_DATA_MAP=15]="SAMPLER_REFLECTION_PROBE_DATA_MAP",_[_.COUNT=16]="COUNT"}(A_||_("M",A_={}));var N_,R_=A_.SAMPLER_JOINTS,L_=A_.COUNT-R_,n_=A_.COUNT-R_-L_;_("S",N_),function(_){_[_.GLOBAL=0]="GLOBAL",_[_.MATERIAL=1]="MATERIAL",_[_.LOCAL=2]="LOCAL",_[_.COUNT=3]="COUNT"}(N_||_("S",N_={}));var e_,M_=_("k",new o([S_,0,R_,0],[I_,0,L_,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,n_,0],[0,0,0,0],[0,2,1,3]));_("U",e_),function(_){_[_.TIME_OFFSET=0]="TIME_OFFSET",_[_.SCREEN_SIZE_OFFSET=4]="SCREEN_SIZE_OFFSET",_[_.NATIVE_SIZE_OFFSET=8]="NATIVE_SIZE_OFFSET",_[_.PROBE_INFO_OFFSET=12]="PROBE_INFO_OFFSET",_[_.DEBUG_VIEW_MODE_OFFSET=16]="DEBUG_VIEW_MODE_OFFSET",_[_.COUNT=20]="COUNT",_[_.SIZE=80]="SIZE"}(e_||_("U",e_={}));var D_,P_=_("Q",(function(){}));g=P_,P_.TIME_OFFSET=e_.TIME_OFFSET,P_.SCREEN_SIZE_OFFSET=e_.SCREEN_SIZE_OFFSET,P_.NATIVE_SIZE_OFFSET=e_.NATIVE_SIZE_OFFSET,P_.PROBE_INFO_OFFSET=e_.PROBE_INFO_OFFSET,P_.DEBUG_VIEW_MODE_OFFSET=e_.DEBUG_VIEW_MODE_OFFSET,P_.COUNT=e_.COUNT,P_.SIZE=e_.SIZE,P_.NAME="CCGlobal",P_.BINDING=O_.UBO_GLOBAL,P_.DESCRIPTOR=new P(g.BINDING,C.UNIFORM_BUFFER,1,t.ALL),P_.LAYOUT=new U(N_.GLOBAL,g.BINDING,g.NAME,[new B("cc_time",a.FLOAT4,1),new B("cc_screenSize",a.FLOAT4,1),new B("cc_nativeSize",a.FLOAT4,1),new B("cc_probeInfo",a.FLOAT4,1),new B("cc_debug_view_mode",a.FLOAT4,1)],1),T_.layouts[P_.NAME]=P_.LAYOUT,T_.bindings[P_.BINDING]=P_.DESCRIPTOR,_("a",D_),function(_){_[_.MAT_VIEW_OFFSET=0]="MAT_VIEW_OFFSET",_[_.MAT_VIEW_INV_OFFSET=16]="MAT_VIEW_INV_OFFSET",_[_.MAT_PROJ_OFFSET=32]="MAT_PROJ_OFFSET",_[_.MAT_PROJ_INV_OFFSET=48]="MAT_PROJ_INV_OFFSET",_[_.MAT_VIEW_PROJ_OFFSET=64]="MAT_VIEW_PROJ_OFFSET",_[_.MAT_VIEW_PROJ_INV_OFFSET=80]="MAT_VIEW_PROJ_INV_OFFSET",_[_.CAMERA_POS_OFFSET=96]="CAMERA_POS_OFFSET",_[_.SURFACE_TRANSFORM_OFFSET=100]="SURFACE_TRANSFORM_OFFSET",_[_.SCREEN_SCALE_OFFSET=104]="SCREEN_SCALE_OFFSET",_[_.EXPOSURE_OFFSET=108]="EXPOSURE_OFFSET",_[_.MAIN_LIT_DIR_OFFSET=112]="MAIN_LIT_DIR_OFFSET",_[_.MAIN_LIT_COLOR_OFFSET=116]="MAIN_LIT_COLOR_OFFSET",_[_.AMBIENT_SKY_OFFSET=120]="AMBIENT_SKY_OFFSET",_[_.AMBIENT_GROUND_OFFSET=124]="AMBIENT_GROUND_OFFSET",_[_.GLOBAL_FOG_COLOR_OFFSET=128]="GLOBAL_FOG_COLOR_OFFSET",_[_.GLOBAL_FOG_BASE_OFFSET=132]="GLOBAL_FOG_BASE_OFFSET",_[_.GLOBAL_FOG_ADD_OFFSET=136]="GLOBAL_FOG_ADD_OFFSET",_[_.NEAR_FAR_OFFSET=140]="NEAR_FAR_OFFSET",_[_.VIEW_PORT_OFFSET=144]="VIEW_PORT_OFFSET",_[_.COUNT=148]="COUNT",_[_.SIZE=592]="SIZE"}(D_||_("a",D_={}));var C_,t_=_("T",(function(){}));m=t_,t_.MAT_VIEW_OFFSET=D_.MAT_VIEW_OFFSET,t_.MAT_VIEW_INV_OFFSET=D_.MAT_VIEW_INV_OFFSET,t_.MAT_PROJ_OFFSET=D_.MAT_PROJ_OFFSET,t_.MAT_PROJ_INV_OFFSET=D_.MAT_PROJ_INV_OFFSET,t_.MAT_VIEW_PROJ_OFFSET=D_.MAT_VIEW_PROJ_OFFSET,t_.MAT_VIEW_PROJ_INV_OFFSET=D_.MAT_VIEW_PROJ_INV_OFFSET,t_.CAMERA_POS_OFFSET=D_.CAMERA_POS_OFFSET,t_.SURFACE_TRANSFORM_OFFSET=D_.SURFACE_TRANSFORM_OFFSET,t_.SCREEN_SCALE_OFFSET=D_.SCREEN_SCALE_OFFSET,t_.EXPOSURE_OFFSET=D_.EXPOSURE_OFFSET,t_.MAIN_LIT_DIR_OFFSET=D_.MAIN_LIT_DIR_OFFSET,t_.MAIN_LIT_COLOR_OFFSET=D_.MAIN_LIT_COLOR_OFFSET,t_.AMBIENT_SKY_OFFSET=D_.AMBIENT_SKY_OFFSET,t_.AMBIENT_GROUND_OFFSET=D_.AMBIENT_GROUND_OFFSET,t_.GLOBAL_FOG_COLOR_OFFSET=D_.GLOBAL_FOG_COLOR_OFFSET,t_.GLOBAL_FOG_BASE_OFFSET=D_.GLOBAL_FOG_BASE_OFFSET,t_.GLOBAL_FOG_ADD_OFFSET=D_.GLOBAL_FOG_ADD_OFFSET,t_.NEAR_FAR_OFFSET=D_.NEAR_FAR_OFFSET,t_.VIEW_PORT_OFFSET=D_.VIEW_PORT_OFFSET,t_.COUNT=D_.COUNT,t_.SIZE=D_.SIZE,t_.NAME="CCCamera",t_.BINDING=O_.UBO_CAMERA,t_.DESCRIPTOR=new P(m.BINDING,C.UNIFORM_BUFFER,1,t.ALL),t_.LAYOUT=new U(N_.GLOBAL,m.BINDING,m.NAME,[new B("cc_matView",a.MAT4,1),new B("cc_matViewInv",a.MAT4,1),new B("cc_matProj",a.MAT4,1),new B("cc_matProjInv",a.MAT4,1),new B("cc_matViewProj",a.MAT4,1),new B("cc_matViewProjInv",a.MAT4,1),new B("cc_cameraPos",a.FLOAT4,1),new B("cc_surfaceTransform",a.FLOAT4,1),new B("cc_screenScale",a.FLOAT4,1),new B("cc_exposure",a.FLOAT4,1),new B("cc_mainLitDir",a.FLOAT4,1),new B("cc_mainLitColor",a.FLOAT4,1),new B("cc_ambientSky",a.FLOAT4,1),new B("cc_ambientGround",a.FLOAT4,1),new B("cc_fogColor",a.FLOAT4,1),new B("cc_fogBase",a.FLOAT4,1),new B("cc_fogAdd",a.FLOAT4,1),new B("cc_nearFar",a.FLOAT4,1),new B("cc_viewPort",a.FLOAT4,1)],1),T_.layouts[t_.NAME]=t_.LAYOUT,T_.bindings[t_.BINDING]=t_.DESCRIPTOR,_("b",C_),function(_){_[_.MAT_LIGHT_VIEW_OFFSET=0]="MAT_LIGHT_VIEW_OFFSET",_[_.MAT_LIGHT_VIEW_PROJ_OFFSET=16]="MAT_LIGHT_VIEW_PROJ_OFFSET",_[_.SHADOW_INV_PROJ_DEPTH_INFO_OFFSET=32]="SHADOW_INV_PROJ_DEPTH_INFO_OFFSET",_[_.SHADOW_PROJ_DEPTH_INFO_OFFSET=36]="SHADOW_PROJ_DEPTH_INFO_OFFSET",_[_.SHADOW_PROJ_INFO_OFFSET=40]="SHADOW_PROJ_INFO_OFFSET",_[_.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET=44]="SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET",_[_.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET=48]="SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET",_[_.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET=52]="SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET",_[_.SHADOW_COLOR_OFFSET=56]="SHADOW_COLOR_OFFSET",_[_.PLANAR_NORMAL_DISTANCE_INFO_OFFSET=60]="PLANAR_NORMAL_DISTANCE_INFO_OFFSET",_[_.COUNT=64]="COUNT",_[_.SIZE=256]="SIZE"}(C_||_("b",C_={}));var U_,B_=_("K",(function(){}));X=B_,B_.MAT_LIGHT_VIEW_OFFSET=C_.MAT_LIGHT_VIEW_OFFSET,B_.MAT_LIGHT_VIEW_PROJ_OFFSET=C_.MAT_LIGHT_VIEW_PROJ_OFFSET,B_.SHADOW_INV_PROJ_DEPTH_INFO_OFFSET=C_.SHADOW_INV_PROJ_DEPTH_INFO_OFFSET,B_.SHADOW_PROJ_DEPTH_INFO_OFFSET=C_.SHADOW_PROJ_DEPTH_INFO_OFFSET,B_.SHADOW_PROJ_INFO_OFFSET=C_.SHADOW_PROJ_INFO_OFFSET,B_.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET=C_.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET,B_.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET=C_.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET,B_.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET=C_.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET,B_.SHADOW_COLOR_OFFSET=C_.SHADOW_COLOR_OFFSET,B_.PLANAR_NORMAL_DISTANCE_INFO_OFFSET=C_.PLANAR_NORMAL_DISTANCE_INFO_OFFSET,B_.COUNT=C_.COUNT,B_.SIZE=C_.SIZE,B_.NAME="CCShadow",B_.BINDING=O_.UBO_SHADOW,B_.DESCRIPTOR=new P(X.BINDING,C.UNIFORM_BUFFER,1,t.ALL),B_.LAYOUT=new U(N_.GLOBAL,X.BINDING,X.NAME,[new B("cc_matLightView",a.MAT4,1),new B("cc_matLightViewProj",a.MAT4,1),new B("cc_shadowInvProjDepthInfo",a.FLOAT4,1),new B("cc_shadowProjDepthInfo",a.FLOAT4,1),new B("cc_shadowProjInfo",a.FLOAT4,1),new B("cc_shadowNFLSInfo",a.FLOAT4,1),new B("cc_shadowWHPBInfo",a.FLOAT4,1),new B("cc_shadowLPNNInfo",a.FLOAT4,1),new B("cc_shadowColor",a.FLOAT4,1),new B("cc_planarNDInfo",a.FLOAT4,1)],1),T_.layouts[B_.NAME]=B_.LAYOUT,T_.bindings[B_.BINDING]=B_.DESCRIPTOR,_("O",U_),function(_){_[_.CSM_LEVEL_COUNT=4]="CSM_LEVEL_COUNT",_[_.CSM_VIEW_DIR_0_OFFSET=0]="CSM_VIEW_DIR_0_OFFSET",_[_.CSM_VIEW_DIR_1_OFFSET=16]="CSM_VIEW_DIR_1_OFFSET",_[_.CSM_VIEW_DIR_2_OFFSET=32]="CSM_VIEW_DIR_2_OFFSET",_[_.CSM_ATLAS_OFFSET=48]="CSM_ATLAS_OFFSET",_[_.MAT_CSM_VIEW_PROJ_OFFSET=64]="MAT_CSM_VIEW_PROJ_OFFSET",_[_.CSM_PROJ_DEPTH_INFO_OFFSET=128]="CSM_PROJ_DEPTH_INFO_OFFSET",_[_.CSM_PROJ_INFO_OFFSET=144]="CSM_PROJ_INFO_OFFSET",_[_.CSM_SPLITS_INFO_OFFSET=160]="CSM_SPLITS_INFO_OFFSET",_[_.COUNT=164]="COUNT",_[_.SIZE=656]="SIZE"}(U_||_("O",U_={}));var a_=_("V",(function(){}));b=a_,a_.CSM_LEVEL_COUNT=U_.CSM_LEVEL_COUNT,a_.CSM_VIEW_DIR_0_OFFSET=U_.CSM_VIEW_DIR_0_OFFSET,a_.CSM_VIEW_DIR_1_OFFSET=U_.CSM_VIEW_DIR_1_OFFSET,a_.CSM_VIEW_DIR_2_OFFSET=U_.CSM_VIEW_DIR_2_OFFSET,a_.CSM_ATLAS_OFFSET=U_.CSM_ATLAS_OFFSET,a_.MAT_CSM_VIEW_PROJ_OFFSET=U_.MAT_CSM_VIEW_PROJ_OFFSET,a_.CSM_PROJ_DEPTH_INFO_OFFSET=U_.CSM_PROJ_DEPTH_INFO_OFFSET,a_.CSM_PROJ_INFO_OFFSET=U_.CSM_PROJ_INFO_OFFSET,a_.CSM_SPLITS_INFO_OFFSET=U_.CSM_SPLITS_INFO_OFFSET,a_.COUNT=U_.COUNT,a_.SIZE=U_.SIZE,a_.NAME="CCCSM",a_.BINDING=O_.UBO_CSM,a_.DESCRIPTOR=new P(b.BINDING,C.UNIFORM_BUFFER,1,t.FRAGMENT),a_.LAYOUT=new U(N_.GLOBAL,b.BINDING,b.NAME,[new B("cc_csmViewDir0",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_csmViewDir1",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_csmViewDir2",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_csmAtlas",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_matCSMViewProj",a.MAT4,b.CSM_LEVEL_COUNT),new B("cc_csmProjDepthInfo",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_csmProjInfo",a.FLOAT4,b.CSM_LEVEL_COUNT),new B("cc_csmSplitsInfo",a.FLOAT4,1)],1),T_.layouts[a_.NAME]=a_.LAYOUT,T_.bindings[a_.BINDING]=a_.DESCRIPTOR;var c_="cc_shadowMap",i_=_("W",O_.SAMPLER_SHADOWMAP),r_=new P(i_,C.SAMPLER_TEXTURE,1,t.FRAGMENT),o_=new c(N_.GLOBAL,i_,c_,a.SAMPLER2D,1);T_.layouts[c_]=o_,T_.bindings[i_]=r_;var G_="cc_environment",u_=_("a1",O_.SAMPLER_ENVIRONMENT),H_=new P(u_,C.SAMPLER_TEXTURE,1,t.FRAGMENT),s_=new c(N_.GLOBAL,u_,G_,a.SAMPLER_CUBE,1);T_.layouts[G_]=s_,T_.bindings[u_]=H_;var w_="cc_diffuseMap",l_=_("a2",O_.SAMPLER_DIFFUSEMAP),W_=new P(l_,C.SAMPLER_TEXTURE,1,t.FRAGMENT),d_=new c(N_.GLOBAL,l_,w_,a.SAMPLER_CUBE,1);T_.layouts[w_]=d_,T_.bindings[l_]=W_;var V_,f_="cc_spotShadowMap",g_=_("X",O_.SAMPLER_SPOT_SHADOW_MAP),m_=new P(g_,C.SAMPLER_TEXTURE,1,t.FRAGMENT),X_=new c(N_.GLOBAL,g_,f_,a.SAMPLER2D,1);T_.layouts[f_]=X_,T_.bindings[g_]=m_,_("c",V_),function(_){_[_.MAT_WORLD_OFFSET=0]="MAT_WORLD_OFFSET",_[_.MAT_WORLD_IT_OFFSET=16]="MAT_WORLD_IT_OFFSET",_[_.LIGHTINGMAP_UVPARAM=32]="LIGHTINGMAP_UVPARAM",_[_.LOCAL_SHADOW_BIAS=36]="LOCAL_SHADOW_BIAS",_[_.REFLECTION_PROBE_DATA1=40]="REFLECTION_PROBE_DATA1",_[_.REFLECTION_PROBE_DATA2=44]="REFLECTION_PROBE_DATA2",_[_.REFLECTION_PROBE_BLEND_DATA1=48]="REFLECTION_PROBE_BLEND_DATA1",_[_.REFLECTION_PROBE_BLEND_DATA2=52]="REFLECTION_PROBE_BLEND_DATA2",_[_.COUNT=56]="COUNT",_[_.SIZE=224]="SIZE",_[_.BINDING=A_.UBO_LOCAL]="BINDING"}(V_||_("c",V_={}));var b_=_("D",(function(){}));p=b_,b_.MAT_WORLD_OFFSET=V_.MAT_WORLD_OFFSET,b_.MAT_WORLD_IT_OFFSET=V_.MAT_WORLD_IT_OFFSET,b_.LIGHTINGMAP_UVPARAM=V_.LIGHTINGMAP_UVPARAM,b_.LOCAL_SHADOW_BIAS=V_.LOCAL_SHADOW_BIAS,b_.REFLECTION_PROBE_DATA1=V_.REFLECTION_PROBE_DATA1,b_.REFLECTION_PROBE_DATA2=V_.REFLECTION_PROBE_DATA2,b_.REFLECTION_PROBE_BLEND_DATA1=V_.REFLECTION_PROBE_BLEND_DATA1,b_.REFLECTION_PROBE_BLEND_DATA2=V_.REFLECTION_PROBE_BLEND_DATA2,b_.COUNT=V_.COUNT,b_.SIZE=V_.SIZE,b_.NAME="CCLocal",b_.BINDING=V_.BINDING,b_.DESCRIPTOR=new P(V_.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX|t.FRAGMENT|t.COMPUTE,i.READ_ONLY,r.BUFFER),b_.LAYOUT=new U(N_.LOCAL,V_.BINDING,p.NAME,[new B("cc_matWorld",a.MAT4,1),new B("cc_matWorldIT",a.MAT4,1),new B("cc_lightingMapUVParam",a.FLOAT4,1),new B("cc_localShadowBias",a.FLOAT4,1),new B("cc_reflectionProbeData1",a.FLOAT4,1),new B("cc_reflectionProbeData2",a.FLOAT4,1),new B("cc_reflectionProbeBlendData1",a.FLOAT4,1),new B("cc_reflectionProbeBlendData2",a.FLOAT4,1)],1),F_.layouts[b_.NAME]=b_.LAYOUT,F_.bindings[V_.BINDING]=b_.DESCRIPTOR;var p_=_("d",(function(){}));Y=p_,p_.WORLD_BOUND_CENTER=0,p_.WORLD_BOUND_HALF_EXTENTS=Y.WORLD_BOUND_CENTER+4,p_.COUNT=Y.WORLD_BOUND_HALF_EXTENTS+4,p_.SIZE=4*Y.COUNT,p_.NAME="CCWorldBound",p_.BINDING=A_.UBO_LOCAL,p_.DESCRIPTOR=new P(Y.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX|t.COMPUTE,i.READ_ONLY,r.BUFFER),p_.LAYOUT=new U(N_.LOCAL,Y.BINDING,Y.NAME,[new B("cc_worldBoundCenter",a.FLOAT4,1),new B("cc_worldBoundHalfExtents",a.FLOAT4,1)],1),F_.layouts[p_.NAME]=p_.LAYOUT,F_.bindings[p_.BINDING]=p_.DESCRIPTOR;var Y_,h_=_("t","a_matWorld0"),J_=_("u","a_sh_linear_const_r"),v_=function(){};h=v_,v_.BATCHING_COUNT=10,v_.MAT_WORLDS_OFFSET=0,v_.COUNT=16*h.BATCHING_COUNT,v_.SIZE=4*h.COUNT,v_.NAME="CCLocalBatched",v_.BINDING=A_.UBO_LOCAL,v_.DESCRIPTOR=new P(h.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX|t.COMPUTE,i.READ_ONLY,r.BUFFER),v_.LAYOUT=new U(N_.LOCAL,h.BINDING,h.NAME,[new B("cc_matWorlds",a.MAT4,h.BATCHING_COUNT)],1),F_.layouts[v_.NAME]=v_.LAYOUT,F_.bindings[v_.BINDING]=v_.DESCRIPTOR,_("A",Y_),function(_){_[_.LIGHTS_PER_PASS=1]="LIGHTS_PER_PASS",_[_.LIGHT_POS_OFFSET=0]="LIGHT_POS_OFFSET",_[_.LIGHT_COLOR_OFFSET=4]="LIGHT_COLOR_OFFSET",_[_.LIGHT_SIZE_RANGE_ANGLE_OFFSET=8]="LIGHT_SIZE_RANGE_ANGLE_OFFSET",_[_.LIGHT_DIR_OFFSET=12]="LIGHT_DIR_OFFSET",_[_.LIGHT_BOUNDING_SIZE_VS_OFFSET=16]="LIGHT_BOUNDING_SIZE_VS_OFFSET",_[_.COUNT=20]="COUNT",_[_.SIZE=80]="SIZE"}(Y_||_("A",Y_={}));var Z_=_("B",(function(){}));J=Z_,Z_.LIGHTS_PER_PASS=Y_.LIGHTS_PER_PASS,Z_.LIGHT_POS_OFFSET=Y_.LIGHT_POS_OFFSET,Z_.LIGHT_COLOR_OFFSET=Y_.LIGHT_COLOR_OFFSET,Z_.LIGHT_SIZE_RANGE_ANGLE_OFFSET=Y_.LIGHT_SIZE_RANGE_ANGLE_OFFSET,Z_.LIGHT_DIR_OFFSET=Y_.LIGHT_DIR_OFFSET,Z_.LIGHT_BOUNDING_SIZE_VS_OFFSET=Y_.LIGHT_BOUNDING_SIZE_VS_OFFSET,Z_.COUNT=Y_.COUNT,Z_.SIZE=Y_.SIZE,Z_.NAME="CCForwardLight",Z_.BINDING=A_.UBO_FORWARD_LIGHTS,Z_.DESCRIPTOR=new P(J.BINDING,C.DYNAMIC_UNIFORM_BUFFER,1,t.FRAGMENT,i.READ_ONLY,r.BUFFER),Z_.LAYOUT=new U(N_.LOCAL,J.BINDING,J.NAME,[new B("cc_lightPos",a.FLOAT4,Y_.LIGHTS_PER_PASS),new B("cc_lightColor",a.FLOAT4,Y_.LIGHTS_PER_PASS),new B("cc_lightSizeRangeAngle",a.FLOAT4,Y_.LIGHTS_PER_PASS),new B("cc_lightDir",a.FLOAT4,Y_.LIGHTS_PER_PASS),new B("cc_lightBoundingSizeVS",a.FLOAT4,Y_.LIGHTS_PER_PASS)],1),F_.layouts[Z_.NAME]=Z_.LAYOUT,F_.bindings[Z_.BINDING]=Z_.DESCRIPTOR;var y_=_("E",(function(){}));y_.LIGHTS_PER_PASS=10;var k_=_("q",(function(){}));v=k_,k_.JOINTS_TEXTURE_INFO_OFFSET=0,k_.COUNT=v.JOINTS_TEXTURE_INFO_OFFSET+4,k_.SIZE=4*v.COUNT,k_.NAME="CCSkinningTexture",k_.BINDING=A_.UBO_SKINNING_TEXTURE,k_.DESCRIPTOR=new P(v.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX,i.READ_ONLY,r.BUFFER),k_.LAYOUT=new U(N_.LOCAL,v.BINDING,v.NAME,[new B("cc_jointTextureInfo",a.FLOAT4,1)],1),F_.layouts[k_.NAME]=k_.LAYOUT,F_.bindings[k_.BINDING]=k_.DESCRIPTOR;var j_=_("n",(function(){}));Z=j_,j_.JOINTS_ANIM_INFO_OFFSET=0,j_.COUNT=Z.JOINTS_ANIM_INFO_OFFSET+4,j_.SIZE=4*Z.COUNT,j_.NAME="CCSkinningAnimation",j_.BINDING=A_.UBO_SKINNING_ANIMATION,j_.DESCRIPTOR=new P(Z.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX,i.READ_ONLY,r.BUFFER),j_.LAYOUT=new U(N_.LOCAL,Z.BINDING,Z.NAME,[new B("cc_jointAnimInfo",a.FLOAT4,1)],1),F_.layouts[j_.NAME]=j_.LAYOUT,F_.bindings[j_.BINDING]=j_.DESCRIPTOR;var x_,K_=_("I","a_jointAnimInfo"),Q_=_("o",function(){function _(){}return _.initLayout=function(E){_._jointUniformCapacity=E,_._count=12*E,_._size=4*_._count,_.LAYOUT.members[0].count=3*E},n(_,null,[{key:"JOINT_UNIFORM_CAPACITY",get:function(){return _._jointUniformCapacity}},{key:"COUNT",get:function(){return _._count}},{key:"SIZE",get:function(){return _._size}}]),_}());function z_(_){Q_.initLayout(_),F_.layouts[Q_.NAME]=Q_.LAYOUT,F_.bindings[Q_.BINDING]=Q_.DESCRIPTOR}y=Q_,Q_._jointUniformCapacity=0,Q_._count=0,Q_._size=0,Q_.NAME="CCSkinning",Q_.BINDING=A_.UBO_SKINNING_TEXTURE,Q_.DESCRIPTOR=new P(y.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX,i.READ_ONLY,r.BUFFER),Q_.LAYOUT=new U(N_.LOCAL,y.BINDING,y.NAME,[new B("cc_joints",a.FLOAT4,1)],1),_("e",x_),function(_){_[_.MAX_MORPH_TARGET_COUNT=60]="MAX_MORPH_TARGET_COUNT",_[_.OFFSET_OF_WEIGHTS=0]="OFFSET_OF_WEIGHTS",_[_.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH=240]="OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH",_[_.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT=244]="OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT",_[_.OFFSET_OF_VERTICES_COUNT=248]="OFFSET_OF_VERTICES_COUNT",_[_.COUNT_BASE_4_BYTES=64]="COUNT_BASE_4_BYTES",_[_.SIZE=256]="SIZE"}(x_||_("e",x_={}));var q_=_("f",(function(){}));k=q_,q_.MAX_MORPH_TARGET_COUNT=x_.MAX_MORPH_TARGET_COUNT,q_.OFFSET_OF_WEIGHTS=x_.OFFSET_OF_WEIGHTS,q_.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH=x_.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH,q_.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT=x_.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT,q_.OFFSET_OF_VERTICES_COUNT=x_.OFFSET_OF_VERTICES_COUNT,q_.COUNT_BASE_4_BYTES=x_.COUNT_BASE_4_BYTES,q_.SIZE=x_.SIZE,q_.NAME="CCMorph",q_.BINDING=A_.UBO_MORPH,q_.DESCRIPTOR=new P(k.BINDING,C.UNIFORM_BUFFER,1,t.VERTEX,i.READ_ONLY,r.BUFFER),q_.LAYOUT=new U(N_.LOCAL,k.BINDING,k.NAME,[new B("cc_displacementWeights",a.FLOAT4,x_.MAX_MORPH_TARGET_COUNT/4),new B("cc_displacementTextureInfo",a.FLOAT4,1)],1),F_.layouts[q_.NAME]=q_.LAYOUT,F_.bindings[q_.BINDING]=q_.DESCRIPTOR;var $_,_E=function(){};j=_E,_E.NAME="CCUILocal",_E.BINDING=A_.UBO_UI_LOCAL,_E.DESCRIPTOR=new P(j.BINDING,C.DYNAMIC_UNIFORM_BUFFER,1,t.VERTEX,i.READ_ONLY,r.BUFFER),_E.LAYOUT=new U(N_.LOCAL,j.BINDING,j.NAME,[new B("cc_local_data",a.FLOAT4,1)],1),F_.layouts[_E.NAME]=_E.LAYOUT,F_.bindings[_E.BINDING]=_E.DESCRIPTOR,_("s",$_),function(_){_[_.SH_LINEAR_CONST_R_OFFSET=0]="SH_LINEAR_CONST_R_OFFSET",_[_.SH_LINEAR_CONST_G_OFFSET=4]="SH_LINEAR_CONST_G_OFFSET",_[_.SH_LINEAR_CONST_B_OFFSET=8]="SH_LINEAR_CONST_B_OFFSET",_[_.SH_QUADRATIC_R_OFFSET=12]="SH_QUADRATIC_R_OFFSET",_[_.SH_QUADRATIC_G_OFFSET=16]="SH_QUADRATIC_G_OFFSET",_[_.SH_QUADRATIC_B_OFFSET=20]="SH_QUADRATIC_B_OFFSET",_[_.SH_QUADRATIC_A_OFFSET=24]="SH_QUADRATIC_A_OFFSET",_[_.COUNT=28]="COUNT",_[_.SIZE=112]="SIZE",_[_.BINDING=A_.UBO_SH]="BINDING"}($_||_("s",$_={}));var EE=function(){};x=EE,EE.SH_LINEAR_CONST_R_OFFSET=$_.SH_LINEAR_CONST_R_OFFSET,EE.SH_LINEAR_CONST_G_OFFSET=$_.SH_LINEAR_CONST_G_OFFSET,EE.SH_LINEAR_CONST_B_OFFSET=$_.SH_LINEAR_CONST_B_OFFSET,EE.SH_QUADRATIC_R_OFFSET=$_.SH_QUADRATIC_R_OFFSET,EE.SH_QUADRATIC_G_OFFSET=$_.SH_QUADRATIC_G_OFFSET,EE.SH_QUADRATIC_B_OFFSET=$_.SH_QUADRATIC_B_OFFSET,EE.SH_QUADRATIC_A_OFFSET=$_.SH_QUADRATIC_A_OFFSET,EE.COUNT=$_.COUNT,EE.SIZE=$_.SIZE,EE.NAME="CCSH",EE.BINDING=$_.BINDING,EE.DESCRIPTOR=new P($_.BINDING,C.UNIFORM_BUFFER,1,t.FRAGMENT,i.READ_ONLY,r.BUFFER),EE.LAYOUT=new U(N_.LOCAL,$_.BINDING,x.NAME,[new B("cc_sh_linear_const_r",a.FLOAT4,1),new B("cc_sh_linear_const_g",a.FLOAT4,1),new B("cc_sh_linear_const_b",a.FLOAT4,1),new B("cc_sh_quadratic_r",a.FLOAT4,1),new B("cc_sh_quadratic_g",a.FLOAT4,1),new B("cc_sh_quadratic_b",a.FLOAT4,1),new B("cc_sh_quadratic_a",a.FLOAT4,1)],1),F_.layouts[EE.NAME]=EE.LAYOUT,F_.bindings[$_.BINDING]=EE.DESCRIPTOR;var OE="cc_jointTexture",TE=_("r",A_.SAMPLER_JOINTS),FE=new P(TE,C.SAMPLER_TEXTURE,1,t.VERTEX,i.READ_ONLY,r.TEX2D),AE=new c(N_.LOCAL,TE,OE,a.SAMPLER2D,1);F_.layouts[OE]=AE,F_.bindings[TE]=FE;var SE="cc_realtimeJoint",IE=_("p",A_.SAMPLER_JOINTS),NE=new P(IE,C.SAMPLER_TEXTURE,1,t.VERTEX,i.READ_ONLY,r.TEX2D),RE=new c(N_.LOCAL,IE,SE,a.SAMPLER2D,1);F_.layouts[SE]=RE,F_.bindings[IE]=NE;var LE="cc_PositionDisplacements",nE=_("j",A_.SAMPLER_MORPH_POSITION),eE=new P(nE,C.SAMPLER_TEXTURE,1,t.VERTEX,i.READ_ONLY,r.TEX2D),ME=new c(N_.LOCAL,nE,LE,a.SAMPLER2D,1);F_.layouts[LE]=ME,F_.bindings[nE]=eE;var DE="cc_NormalDisplacements",PE=_("h",A_.SAMPLER_MORPH_NORMAL),CE=new P(PE,C.SAMPLER_TEXTURE,1,t.VERTEX,i.READ_ONLY,r.TEX2D),tE=new c(N_.LOCAL,PE,DE,a.SAMPLER2D,1);F_.layouts[DE]=tE,F_.bindings[PE]=CE;var UE="cc_TangentDisplacements",BE=_("g",A_.SAMPLER_MORPH_TANGENT),aE=new P(BE,C.SAMPLER_TEXTURE,1,t.VERTEX,i.READ_ONLY,r.TEX2D),cE=new c(N_.LOCAL,BE,UE,a.SAMPLER2D,1);F_.layouts[UE]=cE,F_.bindings[BE]=aE;var iE="cc_lightingMap",rE=_("v",A_.SAMPLER_LIGHTMAP),oE=new P(rE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEX2D),GE=new c(N_.LOCAL,rE,iE,a.SAMPLER2D,1);F_.layouts[iE]=GE,F_.bindings[rE]=oE;var uE="cc_spriteTexture",HE=A_.SAMPLER_SPRITE,sE=new P(HE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEX2D),wE=new c(N_.LOCAL,HE,uE,a.SAMPLER2D,1);F_.layouts[uE]=wE,F_.bindings[HE]=sE;var lE="cc_reflectionProbeCubemap",WE=_("w",A_.SAMPLER_REFLECTION_PROBE_CUBE),dE=new P(WE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEXCUBE),VE=new c(N_.LOCAL,WE,lE,a.SAMPLER_CUBE,1);F_.layouts[lE]=VE,F_.bindings[WE]=dE;var fE="cc_reflectionProbePlanarMap",gE=_("x",A_.SAMPLER_REFLECTION_PROBE_PLANAR),mE=new P(gE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEX2D),XE=new c(N_.LOCAL,gE,fE,a.SAMPLER2D,1);F_.layouts[fE]=XE,F_.bindings[gE]=mE;var bE="cc_reflectionProbeDataMap",pE=_("y",A_.SAMPLER_REFLECTION_PROBE_DATA_MAP),YE=new P(pE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEX2D),hE=new c(N_.LOCAL,pE,bE,a.SAMPLER2D,1);F_.layouts[bE]=hE,F_.bindings[pE]=YE;var JE=A_.SAMPLER_REFLECTION_PROBE_DATA_MAP+1;new P(JE,C.SAMPLER_TEXTURE,1,t.FRAGMENT,i.READ_ONLY,r.TEXCUBE),new c(N_.LOCAL,JE,"cc_reflectionProbeBlendCubemap",a.SAMPLER_CUBE,1);var vE,ZE=_("C",Q.makeMaskExclude([Q.BitMask.UI_2D,Q.BitMask.GIZMOS,Q.BitMask.EDITOR,Q.BitMask.SCENE_GIZMO,Q.BitMask.PROFILER])),yE=Q.makeMaskExclude([Q.BitMask.UI_2D,Q.BitMask.PROFILER]),kE=Q.Enum.ALL;function jE(_){if(vE)return vE;var E=new H(s.TEX2D,w.NONE,xE(_)?G.R32F:G.RGBA8,16,16,l.NONE,1,1,W.X1,1);return vE=_.createTexture(E)}function xE(_){return(_.getFormatFeatures(G.R32F)&(u.RENDER_TARGET|u.SAMPLED_TEXTURE))==(u.RENDER_TARGET|u.SAMPLED_TEXTURE)&&!(_.gfxAPI===d.WEBGL)}function KE(_){return(_.getFormatFeatures(G.RGBA16F)&(u.RENDER_TARGET|u.SAMPLED_TEXTURE))==(u.RENDER_TARGET|u.SAMPLED_TEXTURE)}function QE(){return!(!D.rendering||!D.rendering.enableEffectImport)}function zE(){return new e((function(){return{priority:0,hash:0,depth:0,shaderId:0,subModel:null,passIdx:0}}),64)}_("m",Object.freeze({__proto__:null,CAMERA_DEFAULT_MASK:ZE,CAMERA_EDITOR_MASK:yE,ENABLE_PROBE_BLEND:!1,INST_JOINT_ANIM_INFO:K_,INST_MAT_WORLD:h_,INST_SH:J_,JOINT_UNIFORM_CAPACITY:30,MODEL_ALWAYS_MASK:kE,get ModelLocalBindings(){return A_},PIPELINE_FLOW_FORWARD:__,PIPELINE_FLOW_MAIN:$,PIPELINE_FLOW_SHADOW:E_,PIPELINE_FLOW_SMAA:"SMAAFlow",PIPELINE_FLOW_TONEMAP:"ToneMapFlow",get PipelineGlobalBindings(){return O_},get RenderPassStage(){return z},get RenderPriority(){return q},get SetIndex(){return N_},UBOCSM:a_,get UBOCSMEnum(){return U_},UBOCamera:t_,get UBOCameraEnum(){return D_},UBODeferredLight:y_,UBOForwardLight:Z_,get UBOForwardLightEnum(){return Y_},UBOGlobal:P_,get UBOGlobalEnum(){return e_},UBOLocal:b_,UBOLocalBatched:v_,get UBOLocalEnum(){return V_},UBOMorph:q_,get UBOMorphEnum(){return x_},UBOSH:EE,get UBOSHEnum(){return $_},UBOShadow:B_,get UBOShadowEnum(){return C_},UBOSkinning:Q_,UBOSkinningAnimation:j_,UBOSkinningTexture:k_,UBOUILocal:_E,UBOWorldBound:p_,UNIFORM_DIFFUSEMAP_BINDING:l_,UNIFORM_ENVIRONMENT_BINDING:u_,UNIFORM_JOINT_TEXTURE_BINDING:TE,UNIFORM_LIGHTMAP_TEXTURE_BINDING:rE,UNIFORM_NORMAL_MORPH_TEXTURE_BINDING:PE,UNIFORM_POSITION_MORPH_TEXTURE_BINDING:nE,UNIFORM_REALTIME_JOINT_TEXTURE_BINDING:IE,UNIFORM_REFLECTION_PROBE_BLEND_CUBEMAP_BINDING:JE,UNIFORM_REFLECTION_PROBE_CUBEMAP_BINDING:WE,UNIFORM_REFLECTION_PROBE_DATA_MAP_BINDING:pE,UNIFORM_REFLECTION_PROBE_TEXTURE_BINDING:gE,UNIFORM_SHADOWMAP_BINDING:i_,UNIFORM_SPOT_SHADOW_MAP_TEXTURE_BINDING:g_,UNIFORM_SPRITE_TEXTURE_BINDING:HE,UNIFORM_TANGENT_MORPH_TEXTURE_BINDING:BE,bindingMappingInfo:M_,getDefaultShadowTexture:jE,getPassPool:zE,globalDescriptorSetLayout:T_,isEnableEffect:QE,localDescriptorSetLayout:F_,localDescriptorSetLayout_ResizeMaxJoints:z_,supportsR16HalfFloatTexture:function(_){return(_.getFormatFeatures(G.R16F)&(u.RENDER_TARGET|u.SAMPLED_TEXTURE))==(u.RENDER_TARGET|u.SAMPLED_TEXTURE)},supportsR32FloatTexture:xE,supportsRGBA16HalfFloatTexture:KE,supportsRGBA32FloatTexture:function(_){return(_.getFormatFeatures(G.RGBA32F)&(u.RENDER_TARGET|u.SAMPLED_TEXTURE))==(u.RENDER_TARGET|u.SAMPLED_TEXTURE)}})),_("P",function(){function _(){}return _.getOrCreatePipelineState=function(_,E,O,T,F){var A=E.hash^T.hash^F.attributesHash^O.typedID,S=this._PSOHashMap.get(A);if(!S){var I=E.pipelineLayout,N=new V(F.attributes),R=new f(O,I,T,N,E.rasterizerState,E.depthStencilState,E.blendState,E.primitive,E.dynamicStates);S=_.createPipelineState(R),this._PSOHashMap.set(A,S)}return S},_}())._PSOHashMap=new Map}}}));
//# sourceMappingURL=pipeline-state-manager-C4BAah3w.js.map
