System.register(["./gc-object-BD6DANSw.js","./index-BcjqSS2q.js","./_virtual_internal_constants-CVZmBipG.js","./scene-D5fG1En6.js","./prefab-CJahvMeV.js","./pipeline-state-manager-C4BAah3w.js","./node-event-BDYemSfE.js"],(function(t){"use strict";var e,a,i,n,s,r,l,h,c,o,u,f;return{setters:[function(t){e=t._,a=t.h,i=t.w,n=t.a,s=t.b},function(t){r=t.a,l=t.c,h=t.d,c=t.t},null,function(t){o=t.M,u=t.b},null,null,function(t){f=t.C}],execute:function(){var _,m,M,d,g,I,p={parent:null,owner:null,subModelIdx:0},v=h,y=c;t("R",(_=l("cc.Renderer"),m=y(u),M=y([u]),_(d=v((g=function(t){function s(){var e;return(e=t.call(this)||this)._materials=I&&I(),e._materialInstances=[],e}e(s,t);var r=s.prototype;return r.getMaterial=function(t){return this.getSharedMaterial(t)},r.setMaterial=function(t,e){this.setSharedMaterial(t,e)},r.getSharedMaterial=function(t){return t<0||t>=this._materials.length?null:this._materials[t]},r.setSharedMaterial=function(t,e,i){if(void 0===i&&(i=!1),t&&t instanceof o&&a(12012),i||this._materials[e]!==t){this._materials[e]=t;var n=this._materialInstances[e];n&&(n.destroy(),this._materialInstances[e]=null),this._onMaterialModified(e,this._materials[e])}},r.getMaterialInstance=function(t){if(!this._materials[t])return null;if(!this._materialInstances[t]){p.parent=this._materials[t],p.owner=this,p.subModelIdx=t;var e=new o(p);p.parent=null,p.owner=null,p.subModelIdx=0,this.setMaterialInstance(e,t)}return this._materialInstances[t]},r.setMaterialInstance=function(t,e){if("number"==typeof t){i(12007);var a=t;t=e,e=a}var n=this._materialInstances[e];t&&t.parent?t!==n&&(this._materialInstances[e]=t,this._onMaterialModified(e,t)):(t!==this._materials[e]||n)&&this.setSharedMaterial(t,e)},r.getRenderMaterial=function(t){return this._materialInstances[t]||this._materials[t]},r._onMaterialModified=function(){},r._onRebuildPSO=function(){},r._clearMaterials=function(){},n(s,[{key:"sharedMaterial",get:function(){return this.getSharedMaterial(0)}},{key:"sharedMaterials",get:function(){return this._materials},set:function(t){for(var e=0;e<t.length;e++)t[e]!==this._materials[e]&&this.setSharedMaterial(t[e],e);if(t.length<this._materials.length){for(var a=t.length;a<this._materials.length;a++)this.setSharedMaterial(null,a);this._materials.splice(t.length)}}},{key:"material",get:function(){return this.getMaterialInstance(0)},set:function(t){(1!==this._materials.length||this._materialInstances[0]||this._materials[0]!==t)&&this.setMaterialInstance(t,0)}},{key:"materials",get:function(){for(var t=0;t<this._materials.length;t++)this._materialInstances[t]=this.getMaterialInstance(t);return this._materialInstances},set:function(t){for(var e=t.length,a=this._materials.length,i=e;i<a;i++)this.setMaterialInstance(null,i);this._materials.length=e,this._materialInstances.length=e;for(var n=0;n<e;n++)this._materialInstances[n]!=t[n]&&this.setMaterialInstance(t[n],n)}}]),s}(f),s(g.prototype,"sharedMaterials",[m],Object.getOwnPropertyDescriptor(g.prototype,"sharedMaterials"),g.prototype),I=r(g.prototype,"_materials",[M],(function(){return[]})),d=g))||d)||d))}}}));
//# sourceMappingURL=renderer-DVTO-7-w.js.map
